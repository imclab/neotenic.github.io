protobowl_app_build = 'Wed May 29 2013 21:53:45 GMT-0400 (EDT)';

var io="undefined"==typeof module?{}:module.exports;!function(){!function(e,t){var o=e;o.version="0.9.11",o.protocol=1,o.transports=[],o.j=[],o.sockets={},o.connect=function(e,n){var i,a,r=o.util.parseUri(e);t&&t.location&&(r.protocol=r.protocol||t.location.protocol.slice(0,-1),r.host=r.host||(t.document?t.document.domain:t.location.hostname),r.port=r.port||t.location.port),i=o.util.uniqueUri(r);var s={host:r.host,secure:"https"==r.protocol,port:r.port||("https"==r.protocol?443:80),query:r.query||""};return o.util.merge(s,n),(s["force new connection"]||!o.sockets[i])&&(a=new o.Socket(s)),!s["force new connection"]&&a&&(o.sockets[i]=a),a=a||o.sockets[i],a.of(r.path.length>1?r.path:"")}}("object"==typeof module?module.exports:this.io={},this),function(e,t){var o=e.util={},n=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,i=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];o.parseUri=function(e){for(var t=n.exec(e||""),o={},a=14;a--;)o[i[a]]=t[a]||"";return o},o.uniqueUri=function(e){var o=e.protocol,n=e.host,i=e.port;return"document"in t?(n=n||document.domain,i=i||("https"==o&&"https:"!==document.location.protocol?443:document.location.port)):(n=n||"localhost",!i&&"https"==o&&(i=443)),(o||"http")+"://"+n+":"+(i||80)},o.query=function(e,t){var n=o.chunkQuery(e||""),i=[];o.merge(n,o.chunkQuery(t||""));for(var a in n)n.hasOwnProperty(a)&&i.push(a+"="+n[a]);return i.length?"?"+i.join("&"):""},o.chunkQuery=function(e){for(var t,o={},n=e.split("&"),i=0,a=n.length;a>i;++i)t=n[i].split("="),t[0]&&(o[t[0]]=t[1]);return o};var a=!1;o.load=function(e){return"document"in t&&"complete"===document.readyState||a?e():(o.on(t,"load",e,!1),void 0)},o.on=function(e,t,o,n){e.attachEvent?e.attachEvent("on"+t,o):e.addEventListener&&e.addEventListener(t,o,n)},o.request=function(e){if(e&&"undefined"!=typeof XDomainRequest&&!o.ua.hasCORS)return new XDomainRequest;if("undefined"!=typeof XMLHttpRequest&&(!e||o.ua.hasCORS))return new XMLHttpRequest;if(!e)try{return new(window[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(t){}return null},"undefined"!=typeof window&&o.load(function(){a=!0}),o.defer=function(e){return o.ua.webkit&&"undefined"==typeof importScripts?(o.load(function(){setTimeout(e,100)}),void 0):e()},o.merge=function(e,t,n,i){var a,r=i||[],s="undefined"==typeof n?2:n;for(a in t)t.hasOwnProperty(a)&&o.indexOf(r,a)<0&&("object"==typeof e[a]&&s?o.merge(e[a],t[a],s-1,r):(e[a]=t[a],r.push(t[a])));return e},o.mixin=function(e,t){o.merge(e.prototype,t.prototype)},o.inherit=function(e,t){function o(){}o.prototype=t.prototype,e.prototype=new o},o.isArray=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},o.intersect=function(e,t){for(var n=[],i=e.length>t.length?e:t,a=e.length>t.length?t:e,r=0,s=a.length;s>r;r++)~o.indexOf(i,a[r])&&n.push(a[r]);return n},o.indexOf=function(e,t,o){for(var n=e.length,o=0>o?0>o+n?0:o+n:o||0;n>o&&e[o]!==t;o++);return o>=n?-1:o},o.toArray=function(e){for(var t=[],o=0,n=e.length;n>o;o++)t.push(e[o]);return t},o.ua={},o.ua.hasCORS="undefined"!=typeof XMLHttpRequest&&function(){try{var e=new XMLHttpRequest}catch(t){return!1}return void 0!=e.withCredentials}(),o.ua.webkit="undefined"!=typeof navigator&&/webkit/i.test(navigator.userAgent),o.ua.iDevice="undefined"!=typeof navigator&&/iPad|iPhone|iPod/i.test(navigator.userAgent)}("undefined"!=typeof io?io:module.exports,this),function(e,t){function o(){}e.EventEmitter=o,o.prototype.on=function(e,o){return this.$events||(this.$events={}),this.$events[e]?t.util.isArray(this.$events[e])?this.$events[e].push(o):this.$events[e]=[this.$events[e],o]:this.$events[e]=o,this},o.prototype.addListener=o.prototype.on,o.prototype.once=function(e,t){function o(){n.removeListener(e,o),t.apply(this,arguments)}var n=this;return o.listener=t,this.on(e,o),this},o.prototype.removeListener=function(e,o){if(this.$events&&this.$events[e]){var n=this.$events[e];if(t.util.isArray(n)){for(var i=-1,a=0,r=n.length;r>a;a++)if(n[a]===o||n[a].listener&&n[a].listener===o){i=a;break}if(0>i)return this;n.splice(i,1),n.length||delete this.$events[e]}else(n===o||n.listener&&n.listener===o)&&delete this.$events[e]}return this},o.prototype.removeAllListeners=function(e){return void 0===e?(this.$events={},this):(this.$events&&this.$events[e]&&(this.$events[e]=null),this)},o.prototype.listeners=function(e){return this.$events||(this.$events={}),this.$events[e]||(this.$events[e]=[]),t.util.isArray(this.$events[e])||(this.$events[e]=[this.$events[e]]),this.$events[e]},o.prototype.emit=function(e){if(!this.$events)return!1;var o=this.$events[e];if(!o)return!1;var n=Array.prototype.slice.call(arguments,1);if("function"==typeof o)o.apply(this,n);else{if(!t.util.isArray(o))return!1;for(var i=o.slice(),a=0,r=i.length;r>a;a++)i[a].apply(this,n)}return!0}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports),function(exports,nativeJSON){function f(e){return 10>e?"0"+e:e}function date(e){return isFinite(e.valueOf())?e.getUTCFullYear()+"-"+f(e.getUTCMonth()+1)+"-"+f(e.getUTCDate())+"T"+f(e.getUTCHours())+":"+f(e.getUTCMinutes())+":"+f(e.getUTCSeconds())+"Z":null}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var o,n,i,a,r,s=gap,u=t[e];switch(u instanceof Date&&(u=date(e)),"function"==typeof rep&&(u=rep.call(t,e,u)),typeof u){case"string":return quote(u);case"number":return isFinite(u)?String(u):"null";case"boolean":case"null":return String(u);case"object":if(!u)return"null";if(gap+=indent,r=[],"[object Array]"===Object.prototype.toString.apply(u)){for(a=u.length,o=0;a>o;o+=1)r[o]=str(o,u)||"null";return i=0===r.length?"[]":gap?"[\n"+gap+r.join(",\n"+gap)+"\n"+s+"]":"["+r.join(",")+"]",gap=s,i}if(rep&&"object"==typeof rep)for(a=rep.length,o=0;a>o;o+=1)"string"==typeof rep[o]&&(n=rep[o],i=str(n,u),i&&r.push(quote(n)+(gap?": ":":")+i));else for(n in u)Object.prototype.hasOwnProperty.call(u,n)&&(i=str(n,u),i&&r.push(quote(n)+(gap?": ":":")+i));return i=0===r.length?"{}":gap?"{\n"+gap+r.join(",\n"+gap)+"\n"+s+"}":"{"+r.join(",")+"}",gap=s,i}}if(nativeJSON&&nativeJSON.parse)return exports.JSON={parse:nativeJSON.parse,stringify:nativeJSON.stringify};var JSON=exports.JSON={},cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;JSON.stringify=function(e,t,o){var n;if(gap="",indent="","number"==typeof o)for(n=0;o>n;n+=1)indent+=" ";else"string"==typeof o&&(indent=o);if(rep=t,!t||"function"==typeof t||"object"==typeof t&&"number"==typeof t.length)return str("",{"":e});throw new Error("JSON.stringify")},JSON.parse=function(text,reviver){function walk(e,t){var o,n,i=e[t];if(i&&"object"==typeof i)for(o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n=walk(i,o),void 0!==n?i[o]=n:delete i[o]);return reviver.call(e,t,i)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof JSON?JSON:void 0),function(e,t){var o=e.parser={},n=o.packets=["disconnect","connect","heartbeat","message","json","event","ack","error","noop"],i=o.reasons=["transport not supported","client not handshaken","unauthorized"],a=o.advice=["reconnect"],r=t.JSON,s=t.util.indexOf;o.encodePacket=function(e){var t=s(n,e.type),o=e.id||"",u=e.endpoint||"",l=e.ack,h=null;switch(e.type){case"error":var c=e.reason?s(i,e.reason):"",d=e.advice?s(a,e.advice):"";(""!==c||""!==d)&&(h=c+(""!==d?"+"+d:""));break;case"message":""!==e.data&&(h=e.data);break;case"event":var p={name:e.name};e.args&&e.args.length&&(p.args=e.args),h=r.stringify(p);break;case"json":h=r.stringify(e.data);break;case"connect":e.qs&&(h=e.qs);break;case"ack":h=e.ackId+(e.args&&e.args.length?"+"+r.stringify(e.args):"")}var m=[t,o+("data"==l?"+":""),u];return null!==h&&void 0!==h&&m.push(h),m.join(":")},o.encodePayload=function(e){var t="";if(1==e.length)return e[0];for(var o=0,n=e.length;n>o;o++){var i=e[o];t+="�"+i.length+"�"+e[o]}return t};var u=/([^:]+):([0-9]+)?(\+)?:([^:]+)?:?([\s\S]*)?/;o.decodePacket=function(e){var t=e.match(u);if(!t)return{};var o=t[2]||"",e=t[5]||"",s={type:n[t[1]],endpoint:t[4]||""};switch(o&&(s.id=o,s.ack=t[3]?"data":!0),s.type){case"error":var t=e.split("+");s.reason=i[t[0]]||"",s.advice=a[t[1]]||"";break;case"message":s.data=e||"";break;case"event":try{var l=r.parse(e);s.name=l.name,s.args=l.args}catch(h){}s.args=s.args||[];break;case"json":try{s.data=r.parse(e)}catch(h){}break;case"connect":s.qs=e||"";break;case"ack":var t=e.match(/^([0-9]+)(\+)?(.*)/);if(t&&(s.ackId=t[1],s.args=[],t[3]))try{s.args=t[3]?r.parse(t[3]):[]}catch(h){}break;case"disconnect":case"heartbeat":}return s},o.decodePayload=function(e){if("�"==e.charAt(0)){for(var t=[],n=1,i="";n<e.length;n++)"�"==e.charAt(n)?(t.push(o.decodePacket(e.substr(n+1).substr(0,i))),n+=Number(i)+1,i=""):i+=e.charAt(n);return t}return[o.decodePacket(e)]}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports),function(e,t){function o(e,t){this.socket=e,this.sessid=t}e.Transport=o,t.util.mixin(o,t.EventEmitter),o.prototype.heartbeats=function(){return!0},o.prototype.onData=function(e){if(this.clearCloseTimeout(),(this.socket.connected||this.socket.connecting||this.socket.reconnecting)&&this.setCloseTimeout(),""!==e){var o=t.parser.decodePayload(e);if(o&&o.length)for(var n=0,i=o.length;i>n;n++)this.onPacket(o[n])}return this},o.prototype.onPacket=function(e){return this.socket.setHeartbeatTimeout(),"heartbeat"==e.type?this.onHeartbeat():("connect"==e.type&&""==e.endpoint&&this.onConnect(),"error"==e.type&&"reconnect"==e.advice&&(this.isOpen=!1),this.socket.onPacket(e),this)},o.prototype.setCloseTimeout=function(){if(!this.closeTimeout){var e=this;this.closeTimeout=setTimeout(function(){e.onDisconnect()},this.socket.closeTimeout)}},o.prototype.onDisconnect=function(){return this.isOpen&&this.close(),this.clearTimeouts(),this.socket.onDisconnect(),this},o.prototype.onConnect=function(){return this.socket.onConnect(),this},o.prototype.clearCloseTimeout=function(){this.closeTimeout&&(clearTimeout(this.closeTimeout),this.closeTimeout=null)},o.prototype.clearTimeouts=function(){this.clearCloseTimeout(),this.reopenTimeout&&clearTimeout(this.reopenTimeout)},o.prototype.packet=function(e){this.send(t.parser.encodePacket(e))},o.prototype.onHeartbeat=function(){this.packet({type:"heartbeat"})},o.prototype.onOpen=function(){this.isOpen=!0,this.clearCloseTimeout(),this.socket.onOpen()},o.prototype.onClose=function(){this.isOpen=!1,this.socket.onClose(),this.onDisconnect()},o.prototype.prepareUrl=function(){var e=this.socket.options;return this.scheme()+"://"+e.host+":"+e.port+"/"+e.resource+"/"+t.protocol+"/"+this.name+"/"+this.sessid},o.prototype.ready=function(e,t){t.call(this)}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports),function(e,t,o){function n(e){if(this.options={port:80,secure:!1,document:"document"in o?document:!1,resource:"socket.io",transports:t.transports,"connect timeout":1e4,"try multiple transports":!0,reconnect:!0,"reconnection delay":500,"reconnection limit":1/0,"reopen delay":3e3,"max reconnection attempts":10,"sync disconnect on unload":!1,"auto connect":!0,"flash policy port":10843,manualFlush:!1},t.util.merge(this.options,e),this.connected=!1,this.open=!1,this.connecting=!1,this.reconnecting=!1,this.namespaces={},this.buffer=[],this.doBuffer=!1,this.options["sync disconnect on unload"]&&(!this.isXDomain()||t.util.ua.hasCORS)){var n=this;t.util.on(o,"beforeunload",function(){n.disconnectSync()},!1)}this.options["auto connect"]&&this.connect()}function i(){}e.Socket=n,t.util.mixin(n,t.EventEmitter),n.prototype.of=function(e){return this.namespaces[e]||(this.namespaces[e]=new t.SocketNamespace(this,e),""!==e&&this.namespaces[e].packet({type:"connect"})),this.namespaces[e]},n.prototype.publish=function(){this.emit.apply(this,arguments);var e;for(var t in this.namespaces)this.namespaces.hasOwnProperty(t)&&(e=this.of(t),e.$emit.apply(e,arguments))},n.prototype.handshake=function(e){function o(t){t instanceof Error?(n.connecting=!1,n.onError(t.message)):e.apply(null,t.split(":"))}var n=this,a=this.options,r=["http"+(a.secure?"s":"")+":/",a.host+":"+a.port,a.resource,t.protocol,t.util.query(this.options.query,"t="+ +new Date)].join("/");if(this.isXDomain()&&!t.util.ua.hasCORS){var s=document.getElementsByTagName("script")[0],u=document.createElement("script");u.src=r+"&jsonp="+t.j.length,s.parentNode.insertBefore(u,s),t.j.push(function(e){o(e),u.parentNode.removeChild(u)})}else{var l=t.util.request();l.open("GET",r,!0),this.isXDomain()&&(l.withCredentials=!0),l.onreadystatechange=function(){4==l.readyState&&(l.onreadystatechange=i,200==l.status?o(l.responseText):403==l.status?n.onError(l.responseText):(n.connecting=!1,!n.reconnecting&&n.onError(l.responseText)))},l.send(null)}},n.prototype.getTransport=function(e){for(var o,n=e||this.transports,i=0;o=n[i];i++)if(t.Transport[o]&&t.Transport[o].check(this)&&(!this.isXDomain()||t.Transport[o].xdomainCheck(this)))return new t.Transport[o](this,this.sessionid);return null},n.prototype.connect=function(e){if(this.connecting)return this;var o=this;return o.connecting=!0,this.handshake(function(n,i,a,r){function s(e){return o.transport&&o.transport.clearTimeouts(),o.transport=o.getTransport(e),o.transport?(o.transport.ready(o,function(){o.connecting=!0,o.publish("connecting",o.transport.name),o.transport.open(),o.options["connect timeout"]&&(o.connectTimeoutTimer=setTimeout(function(){if(!o.connected&&(o.connecting=!1,o.options["try multiple transports"])){for(var e=o.transports;e.length>0&&e.splice(0,1)[0]!=o.transport.name;);e.length?s(e):o.publish("connect_failed")}},o.options["connect timeout"]))}),void 0):o.publish("connect_failed")}o.sessionid=n,o.closeTimeout=1e3*a,o.heartbeatTimeout=1e3*i,o.transports||(o.transports=o.origTransports=r?t.util.intersect(r.split(","),o.options.transports):o.options.transports),o.setHeartbeatTimeout(),s(o.transports),o.once("connect",function(){clearTimeout(o.connectTimeoutTimer),e&&"function"==typeof e&&e()})}),this},n.prototype.setHeartbeatTimeout=function(){if(clearTimeout(this.heartbeatTimeoutTimer),!this.transport||this.transport.heartbeats()){var e=this;this.heartbeatTimeoutTimer=setTimeout(function(){e.transport.onClose()},this.heartbeatTimeout)}},n.prototype.packet=function(e){return this.connected&&!this.doBuffer?this.transport.packet(e):this.buffer.push(e),this},n.prototype.setBuffer=function(e){this.doBuffer=e,!e&&this.connected&&this.buffer.length&&(this.options.manualFlush||this.flushBuffer())},n.prototype.flushBuffer=function(){this.transport.payload(this.buffer),this.buffer=[]},n.prototype.disconnect=function(){return(this.connected||this.connecting)&&(this.open&&this.of("").packet({type:"disconnect"}),this.onDisconnect("booted")),this},n.prototype.disconnectSync=function(){var e=t.util.request(),o=["http"+(this.options.secure?"s":"")+":/",this.options.host+":"+this.options.port,this.options.resource,t.protocol,"",this.sessionid].join("/")+"/?disconnect=1";e.open("GET",o,!1),e.send(null),this.onDisconnect("booted")},n.prototype.isXDomain=function(){var e=o.location.port||("https:"==o.location.protocol?443:80);return this.options.host!==o.location.hostname||this.options.port!=e},n.prototype.onConnect=function(){this.connected||(this.connected=!0,this.connecting=!1,this.doBuffer||this.setBuffer(!1),this.emit("connect"))},n.prototype.onOpen=function(){this.open=!0},n.prototype.onClose=function(){this.open=!1,clearTimeout(this.heartbeatTimeoutTimer)},n.prototype.onPacket=function(e){this.of(e.endpoint).onPacket(e)},n.prototype.onError=function(e){e&&e.advice&&"reconnect"===e.advice&&(this.connected||this.connecting)&&(this.disconnect(),this.options.reconnect&&this.reconnect()),this.publish("error",e&&e.reason?e.reason:e)},n.prototype.onDisconnect=function(e){var t=this.connected,o=this.connecting;this.connected=!1,this.connecting=!1,this.open=!1,(t||o)&&(this.transport.close(),this.transport.clearTimeouts(),t&&(this.publish("disconnect",e),"booted"!=e&&this.options.reconnect&&!this.reconnecting&&this.reconnect()))},n.prototype.reconnect=function(){function e(){if(o.connected){for(var e in o.namespaces)o.namespaces.hasOwnProperty(e)&&""!==e&&o.namespaces[e].packet({type:"connect"});o.publish("reconnect",o.transport.name,o.reconnectionAttempts)}clearTimeout(o.reconnectionTimer),o.removeListener("connect_failed",t),o.removeListener("connect",t),o.reconnecting=!1,delete o.reconnectionAttempts,delete o.reconnectionDelay,delete o.reconnectionTimer,delete o.redoTransports,o.options["try multiple transports"]=i}function t(){return o.reconnecting?o.connected?e():o.connecting&&o.reconnecting?o.reconnectionTimer=setTimeout(t,1e3):(o.reconnectionAttempts++>=n?o.redoTransports?(o.publish("reconnect_failed"),e()):(o.on("connect_failed",t),o.options["try multiple transports"]=!0,o.transports=o.origTransports,o.transport=o.getTransport(),o.redoTransports=!0,o.connect()):(o.reconnectionDelay<a&&(o.reconnectionDelay*=2),o.connect(),o.publish("reconnecting",o.reconnectionDelay,o.reconnectionAttempts),o.reconnectionTimer=setTimeout(t,o.reconnectionDelay)),void 0):void 0}this.reconnecting=!0,this.reconnectionAttempts=0,this.reconnectionDelay=this.options["reconnection delay"];var o=this,n=this.options["max reconnection attempts"],i=this.options["try multiple transports"],a=this.options["reconnection limit"];this.options["try multiple transports"]=!1,this.reconnectionTimer=setTimeout(t,this.reconnectionDelay),this.on("connect",t)}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports,this),function(e,t){function o(e,t){this.socket=e,this.name=t||"",this.flags={},this.json=new n(this,"json"),this.ackPackets=0,this.acks={}}function n(e,t){this.namespace=e,this.name=t}e.SocketNamespace=o,t.util.mixin(o,t.EventEmitter),o.prototype.$emit=t.EventEmitter.prototype.emit,o.prototype.of=function(){return this.socket.of.apply(this.socket,arguments)},o.prototype.packet=function(e){return e.endpoint=this.name,this.socket.packet(e),this.flags={},this},o.prototype.send=function(e,t){var o={type:this.flags.json?"json":"message",data:e};return"function"==typeof t&&(o.id=++this.ackPackets,o.ack=!0,this.acks[o.id]=t),this.packet(o)},o.prototype.emit=function(e){var t=Array.prototype.slice.call(arguments,1),o=t[t.length-1],n={type:"event",name:e};return"function"==typeof o&&(n.id=++this.ackPackets,n.ack="data",this.acks[n.id]=o,t=t.slice(0,t.length-1)),n.args=t,this.packet(n)},o.prototype.disconnect=function(){return""===this.name?this.socket.disconnect():(this.packet({type:"disconnect"}),this.$emit("disconnect")),this},o.prototype.onPacket=function(e){function o(){n.packet({type:"ack",args:t.util.toArray(arguments),ackId:e.id})}var n=this;switch(e.type){case"connect":this.$emit("connect");break;case"disconnect":""===this.name?this.socket.onDisconnect(e.reason||"booted"):this.$emit("disconnect",e.reason);break;case"message":case"json":var i=["message",e.data];"data"==e.ack?i.push(o):e.ack&&this.packet({type:"ack",ackId:e.id}),this.$emit.apply(this,i);break;case"event":var i=[e.name].concat(e.args);"data"==e.ack&&i.push(o),this.$emit.apply(this,i);break;case"ack":this.acks[e.ackId]&&(this.acks[e.ackId].apply(this,e.args),delete this.acks[e.ackId]);break;case"error":e.advice?this.socket.onError(e):"unauthorized"==e.reason?this.$emit("connect_failed",e.reason):this.$emit("error",e.reason)}},n.prototype.send=function(){this.namespace.flags[this.name]=!0,this.namespace.send.apply(this.namespace,arguments)},n.prototype.emit=function(){this.namespace.flags[this.name]=!0,this.namespace.emit.apply(this.namespace,arguments)}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports),function(e,t,o){function n(){t.Transport.apply(this,arguments)}e.websocket=n,t.util.inherit(n,t.Transport),n.prototype.name="websocket",n.prototype.open=function(){var e,n=t.util.query(this.socket.options.query),i=this;return e||(e=o.MozWebSocket||o.WebSocket),this.websocket=new e(this.prepareUrl()+n),this.websocket.onopen=function(){i.onOpen(),i.socket.setBuffer(!1)},this.websocket.onmessage=function(e){i.onData(e.data)},this.websocket.onclose=function(){i.onClose(),i.socket.setBuffer(!0)},this.websocket.onerror=function(e){i.onError(e)},this},n.prototype.send=t.util.ua.iDevice?function(e){var t=this;return setTimeout(function(){t.websocket.send(e)},0),this}:function(e){return this.websocket.send(e),this},n.prototype.payload=function(e){for(var t=0,o=e.length;o>t;t++)this.packet(e[t]);return this},n.prototype.close=function(){return this.websocket.close(),this},n.prototype.onError=function(e){this.socket.onError(e)},n.prototype.scheme=function(){return this.socket.options.secure?"wss":"ws"},n.check=function(){return"WebSocket"in o&&!("__addTask"in WebSocket)||"MozWebSocket"in o},n.xdomainCheck=function(){return!0},t.transports.push("websocket")}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this),function(e,t,o){function n(e){e&&(t.Transport.apply(this,arguments),this.sendBuffer=[])}function i(){}e.XHR=n,t.util.inherit(n,t.Transport),n.prototype.open=function(){return this.socket.setBuffer(!1),this.onOpen(),this.get(),this.setCloseTimeout(),this},n.prototype.payload=function(e){for(var o=[],n=0,i=e.length;i>n;n++)o.push(t.parser.encodePacket(e[n]));this.send(t.parser.encodePayload(o))},n.prototype.send=function(e){return this.post(e),this},n.prototype.post=function(e){function t(){4==this.readyState&&(this.onreadystatechange=i,a.posting=!1,200==this.status?a.socket.setBuffer(!1):a.onClose())}function n(){this.onload=i,a.socket.setBuffer(!1)}var a=this;this.socket.setBuffer(!0),this.sendXHR=this.request("POST"),o.XDomainRequest&&this.sendXHR instanceof XDomainRequest?this.sendXHR.onload=this.sendXHR.onerror=n:this.sendXHR.onreadystatechange=t,this.sendXHR.send(e)},n.prototype.close=function(){return this.onClose(),this},n.prototype.request=function(e){var o=t.util.request(this.socket.isXDomain()),n=t.util.query(this.socket.options.query,"t="+ +new Date);if(o.open(e||"GET",this.prepareUrl()+n,!0),"POST"==e)try{o.setRequestHeader?o.setRequestHeader("Content-type","text/plain;charset=UTF-8"):o.contentType="text/plain"}catch(i){}return o},n.prototype.scheme=function(){return this.socket.options.secure?"https":"http"},n.check=function(e,n){try{var i=t.util.request(n),a=o.XDomainRequest&&i instanceof XDomainRequest,r=e&&e.options&&e.options.secure?"https:":"http:",s=o.location&&r!=o.location.protocol;if(i&&(!a||!s))return!0}catch(u){}return!1},n.xdomainCheck=function(e){return n.check(e,!0)}}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this),function(e,t){function o(){t.Transport.XHR.apply(this,arguments)}e.htmlfile=o,t.util.inherit(o,t.Transport.XHR),o.prototype.name="htmlfile",o.prototype.get=function(){this.doc=new(window[["Active"].concat("Object").join("X")])("htmlfile"),this.doc.open(),this.doc.write("<html></html>"),this.doc.close(),this.doc.parentWindow.s=this;var e=this.doc.createElement("div");e.className="socketio",this.doc.body.appendChild(e),this.iframe=this.doc.createElement("iframe"),e.appendChild(this.iframe);var o=this,n=t.util.query(this.socket.options.query,"t="+ +new Date);this.iframe.src=this.prepareUrl()+n,t.util.on(window,"unload",function(){o.destroy()})},o.prototype._=function(e,t){this.onData(e);try{var o=t.getElementsByTagName("script")[0];o.parentNode.removeChild(o)}catch(n){}},o.prototype.destroy=function(){if(this.iframe){try{this.iframe.src="about:blank"}catch(e){}this.doc=null,this.iframe.parentNode.removeChild(this.iframe),this.iframe=null,CollectGarbage()}},o.prototype.close=function(){return this.destroy(),t.Transport.XHR.prototype.close.call(this)},o.check=function(e){if("undefined"!=typeof window&&["Active"].concat("Object").join("X")in window)try{var o=new(window[["Active"].concat("Object").join("X")])("htmlfile");return o&&t.Transport.XHR.check(e)}catch(n){}return!1},o.xdomainCheck=function(){return!1},t.transports.push("htmlfile")}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports),function(e,t,o){function n(){t.Transport.XHR.apply(this,arguments)}function i(){}e["xhr-polling"]=n,t.util.inherit(n,t.Transport.XHR),t.util.merge(n,t.Transport.XHR),n.prototype.name="xhr-polling",n.prototype.heartbeats=function(){return!1},n.prototype.open=function(){var e=this;return t.Transport.XHR.prototype.open.call(e),!1},n.prototype.get=function(){function e(){4==this.readyState&&(this.onreadystatechange=i,200==this.status?(a.onData(this.responseText),a.get()):a.onClose())}function t(){this.onload=i,this.onerror=i,a.retryCounter=1,a.onData(this.responseText),a.get()}function n(){a.retryCounter++,!a.retryCounter||a.retryCounter>3?a.onClose():a.get()}if(this.isOpen){var a=this;this.xhr=this.request(),o.XDomainRequest&&this.xhr instanceof XDomainRequest?(this.xhr.onload=t,this.xhr.onerror=n):this.xhr.onreadystatechange=e,this.xhr.send(null)}},n.prototype.onClose=function(){if(t.Transport.XHR.prototype.onClose.call(this),this.xhr){this.xhr.onreadystatechange=this.xhr.onload=this.xhr.onerror=i;try{this.xhr.abort()}catch(e){}this.xhr=null}},n.prototype.ready=function(e,o){var n=this;t.util.defer(function(){o.call(n)})},t.transports.push("xhr-polling")}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this),"function"==typeof define&&define.amd&&define([],function(){return io})}(),jade=function(e){function t(e){return null!=e}return Array.isArray||(Array.isArray=function(e){return"[object Array]"==Object.prototype.toString.call(e)}),Object.keys||(Object.keys=function(e){var t=[];for(var o in e)e.hasOwnProperty(o)&&t.push(o);return t}),e.merge=function(e,o){var n=e["class"],i=o["class"];(n||i)&&(n=n||[],i=i||[],Array.isArray(n)||(n=[n]),Array.isArray(i)||(i=[i]),n=n.filter(t),i=i.filter(t),e["class"]=n.concat(i).join(" "));for(var a in o)"class"!=a&&(e[a]=o[a]);return e},e.attrs=function(t,o){var n=[],i=t.terse;delete t.terse;var a=Object.keys(t),r=a.length;if(r){n.push("");for(var s=0;r>s;++s){var u=a[s],l=t[u];"boolean"==typeof l||null==l?l&&(i?n.push(u):n.push(u+'="'+u+'"')):0==u.indexOf("data")&&"string"!=typeof l?n.push(u+"='"+JSON.stringify(l)+"'"):"class"==u&&Array.isArray(l)?n.push(u+'="'+e.escape(l.join(" "))+'"'):o&&o[u]?n.push(u+'="'+e.escape(l)+'"'):n.push(u+'="'+l+'"')}}return n.join(" ")},e.escape=function(e){return String(e).replace(/&(?!(\w+|\#\d+);)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},e.rethrow=function(e,t,o){if(!t)throw e;throw e.path=t,e.message=(t||"Jade")+":"+o+"\n"+e.message,e},e}({}),jade.settings=function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{})buf.push('<div class="span3 thumbnail"><h5><i class="icon-wrench"></i>Settings</h5><div style="text-align: center; padding-right: 4px; padding-left: 4px; padding-top: 4px"><div class="localsettings"><div class="expando"><div class="input-prepend"><span style="width:21px" title="Public name" rel="tooltip" class="generate-name add-on"><i class="icon-user"></i></span><input id="username" type="text" value="" disabled="disabled"/></div></div><div style="display:none" class="expando set-team"><div class="input-prepend"><span style="width:21px" title="Teams" rel="tooltip" class="add-on"><i class="icon-group"></i></span><select class="input teams"><option value="">Individual</option></select></div></div><div style="display:none" class="expando reset-score"><div class="input-prepend"><span style="width:21px" title="Reset my score" rel="tooltip" class="add-on"><i class="icon-trash"></i></span><button class="btn input score-reset">Reset My Score </button></div></div><div style="display:none" class="expando relinquish-command"><div class="input-prepend"><span style="width:21px" title="Relinquish dominance over this room" rel="tooltip" class="add-on"><i class="icon-eye-close"></i></span><button class="btn input lose-command">Relinquish Command</button></div></div><label class="checkbox"><input type="checkbox" class="movingwindow"/>Points earned in last 20 questions</label><label class="checkbox"><input type="checkbox" class="adhd"/>Enable distraction free mode</label><div class="microwave"><label class="checkbox"><input type="checkbox" checked="checked" class="livechat"/>Show chat messages while typing</label></div><label class="checkbox"><input type="checkbox" class="sounds"/>Play sound on successful buzz</label><div style="display:none;white-space:nowrap;" class="lockvote"><label class="checkbox"><input type="checkbox" class="lock"/>Lock settings <span class=\'electorate\'>0/1 votes</span><i style="padding-left: 5px" class="icon-unlock status_icon"></i></label></div></div><hr/><div class="globalsettings"><div class="expando"><div class="input-prepend"><span style="width:21px" title="Read speed" rel="tooltip" class="add-on"><i class="icon-step-forward"></i></span><input type="range" value="200" min="60" max="600" class="speed"/></div></div><div class="expando"><div class="input-prepend"><span style="width:21px" title="Difficulty/Category" rel="tooltip" class="add-on"><i class="icon-briefcase"></i></span><select style="width: 60px; border-right: 0" class="padd-on difficulties"></select><select style="border-left: 0" class="input categories"></select></div></div><div style="display:none" class="custom-category"></div><label class="checkbox"><input type="checkbox" class="showbonus"/>Show bonus questions</label><label class="checkbox"><input type="checkbox" checked="checked" class="multibuzz"/>Allow players to buzz multiple times</label><label class="checkbox"><input type="checkbox" checked="checked" class="allowskip"/>Allow players to skip questions</label><label style="display: none" class="checkbox"><input type="checkbox" checked="checked" class="allowpause"/>Allow players to pause questions</label><div class="request-access"><button class="btn btn-large"><i class="icon-cog"></i>&nbsp; Request Access</button></div></div></div></div>');return buf.join("")},jade.update=function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{})buf.push('<div class="well"><a href="" class="btn btn-primary pull-right">Reload</a>A <strong>new version</strong> of this application has been downloaded. Please reload the application now.</div>');return buf.join("")},window.Modernizr=function(e,t,o){function n(e){m.cssText=e}function i(e,t){return typeof e===t}var a,r,s,u="2.6.1",l={},h=!0,c=t.documentElement,d="modernizr",p=t.createElement(d),m=p.style,f=({}.toString," -webkit- -moz- -o- -ms- ".split(" ")),y={},g=[],b=g.slice,w=function(e,o,n,i){var a,r,s,u=t.createElement("div"),l=t.body,h=l?l:t.createElement("body");
if(parseInt(n,10))for(;n--;)s=t.createElement("div"),s.id=i?i[n]:d+(n+1),u.appendChild(s);return a=["&#173;",'<style id="s',d,'">',e,"</style>"].join(""),u.id=d,(l?u:h).innerHTML+=a,h.appendChild(u),l||(h.style.background="",c.appendChild(h)),r=o(u,e),l?u.parentNode.removeChild(u):h.parentNode.removeChild(h),!!r},v={}.hasOwnProperty;s=i(v,"undefined")||i(v.call,"undefined")?function(e,t){return t in e&&i(e.constructor.prototype[t],"undefined")}:function(e,t){return v.call(e,t)},Function.prototype.bind||(Function.prototype.bind=function(e){var t=this;if("function"!=typeof t)throw new TypeError;var o=b.call(arguments,1),n=function(){if(this instanceof n){var i=function(){};i.prototype=t.prototype;var a=new i,r=t.apply(a,o.concat(b.call(arguments)));return Object(r)===r?r:a}return t.apply(e,o.concat(b.call(arguments)))};return n}),y.touch=function(){var o;return"ontouchstart"in e||e.DocumentTouch&&t instanceof DocumentTouch?o=!0:w(["@media (",f.join("touch-enabled),("),d,")","{#modernizr{top:9px;position:absolute}}"].join(""),function(e){o=9===e.offsetTop}),o};for(var k in y)s(y,k)&&(r=k.toLowerCase(),l[r]=y[k](),g.push((l[r]?"":"no-")+r));return l.addTest=function(e,t){if("object"==typeof e)for(var n in e)s(e,n)&&l.addTest(n,e[n]);else{if(e=e.toLowerCase(),l[e]!==o)return l;t="function"==typeof t?t():t,h&&(c.className+=" "+(t?"":"no-")+e),l[e]=t}return l},n(""),p=a=null,function(e,t){function o(e,t){var o=e.createElement("p"),n=e.getElementsByTagName("head")[0]||e.documentElement;return o.innerHTML="x<style>"+t+"</style>",n.insertBefore(o.lastChild,n.firstChild)}function n(){var e=g.elements;return"string"==typeof e?e.split(" "):e}function i(e){var t=y[e[m]];return t||(t={},f++,e[m]=f,y[f]=t),t}function a(e,o,n){if(o||(o=t),h)return o.createElement(e);n||(n=i(o));var a;return a=n.cache[e]?n.cache[e].cloneNode():p.test(e)?(n.cache[e]=n.createElem(e)).cloneNode():n.createElem(e),a.canHaveChildren&&!d.test(e)?n.frag.appendChild(a):a}function r(e,o){if(e||(e=t),h)return e.createDocumentFragment();o=o||i(e);for(var a=o.frag.cloneNode(),r=0,s=n(),u=s.length;u>r;r++)a.createElement(s[r]);return a}function s(e,t){t.cache||(t.cache={},t.createElem=e.createElement,t.createFrag=e.createDocumentFragment,t.frag=t.createFrag()),e.createElement=function(o){return g.shivMethods?a(o,e,t):t.createElem(o)},e.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+n().join().replace(/\w+/g,function(e){return t.createElem(e),t.frag.createElement(e),'c("'+e+'")'})+");return n}")(g,t.frag)}function u(e){e||(e=t);var n=i(e);return g.shivCSS&&!l&&!n.hasCSS&&(n.hasCSS=!!o(e,"article,aside,figcaption,figure,footer,header,hgroup,nav,section{display:block}mark{background:#FF0;color:#000}")),h||s(e,n),e}var l,h,c=e.html5||{},d=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,p=/^<|^(?:a|b|button|code|div|fieldset|form|h1|h2|h3|h4|h5|h6|i|iframe|img|input|label|li|link|ol|option|p|param|q|script|select|span|strong|style|table|tbody|td|textarea|tfoot|th|thead|tr|ul)$/i,m="_html5shiv",f=0,y={};!function(){try{var e=t.createElement("a");e.innerHTML="<xyz></xyz>",l="hidden"in e,h=1==e.childNodes.length||function(){t.createElement("a");var e=t.createDocumentFragment();return"undefined"==typeof e.cloneNode||"undefined"==typeof e.createDocumentFragment||"undefined"==typeof e.createElement}()}catch(o){l=!0,h=!0}}();var g={elements:c.elements||"abbr article aside audio bdi canvas data datalist details figcaption figure footer header hgroup mark meter nav output progress section summary time video",shivCSS:c.shivCSS!==!1,supportsUnknownElements:h,shivMethods:c.shivMethods!==!1,type:"default",shivDocument:u,createElement:a,createDocumentFragment:r};e.html5=g,u(t)}(this,t),l._version=u,l._prefixes=f,l.testStyles=w,c.className=c.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(h?" js "+g.join(" "):""),l}(this,this.document),function(e,t,o){function n(e){return"[object Function]"==y.call(e)}function i(e){return"string"==typeof e}function a(){}function r(e){return!e||"loaded"==e||"complete"==e||"uninitialized"==e}function s(){var e=g.shift();b=1,e?e.t?m(function(){("c"==e.t?d.injectCss:d.injectJs)(e.s,0,e.a,e.x,e.e,1)},0):(e(),s()):b=0}function u(e,o,n,i,a,u,l){function h(t){if(!p&&r(c.readyState)&&(w.r=p=1,!b&&s(),c.onload=c.onreadystatechange=null,t)){"img"!=e&&m(function(){k.removeChild(c)},50);for(var n in x[o])x[o].hasOwnProperty(n)&&x[o][n].onload()}}var l=l||d.errorTimeout,c=t.createElement(e),p=0,y=0,w={t:n,s:o,e:a,a:u,x:l};1===x[o]&&(y=1,x[o]=[]),"object"==e?c.data=o:(c.src=o,c.type=e),c.width=c.height="0",c.onerror=c.onload=c.onreadystatechange=function(){h.call(this,y)},g.splice(i,0,w),"img"!=e&&(y||2===x[o]?(k.insertBefore(c,v?null:f),m(h,l)):x[o].push(c))}function l(e,t,o,n,a){return b=0,t=t||"j",i(e)?u("c"==t?$:_,e,t,this.i++,o,n,a):(g.splice(this.i++,0,e),1==g.length&&s()),this}function h(){var e=d;return e.loader={load:l,i:0},e}var c,d,p=t.documentElement,m=e.setTimeout,f=t.getElementsByTagName("script")[0],y={}.toString,g=[],b=0,w="MozAppearance"in p.style,v=w&&!!t.createRange().compareNode,k=v?p:f.parentNode,p=e.opera&&"[object Opera]"==y.call(e.opera),p=!!t.attachEvent&&!p,_=w?"object":p?"script":"img",$=p?"script":_,E=Array.isArray||function(e){return"[object Array]"==y.call(e)},C=[],x={},A={timeout:function(e,t){return t.length&&(e.timeout=t[0]),e}};d=function(e){function t(e){var t,o,n,e=e.split("!"),i=C.length,a=e.pop(),r=e.length,a={url:a,origUrl:a,prefixes:e};for(o=0;r>o;o++)n=e[o].split("="),(t=A[n.shift()])&&(a=t(a,n));for(o=0;i>o;o++)a=C[o](a);return a}function r(e,i,a,r,s){var u=t(e),l=u.autoCallback;u.url.split(".").pop().split("?").shift(),u.bypass||(i&&(i=n(i)?i:i[e]||i[r]||i[e.split("/").pop().split("?")[0]]),u.instead?u.instead(e,i,a,r,s):(x[u.url]?u.noexec=!0:x[u.url]=1,a.load(u.url,u.forceCSS||!u.forceJS&&"css"==u.url.split(".").pop().split("?").shift()?"c":o,u.noexec,u.attrs,u.timeout),(n(i)||n(l))&&a.load(function(){h(),i&&i(u.origUrl,s,r),l&&l(u.origUrl,s,r),x[u.url]=2})))}function s(e,t){function o(e,o){if(e){if(i(e))o||(c=function(){var e=[].slice.call(arguments);d.apply(this,e),p()}),r(e,c,t,0,l);else if(Object(e)===e)for(u in s=function(){var t,o=0;for(t in e)e.hasOwnProperty(t)&&o++;return o}(),e)e.hasOwnProperty(u)&&(!o&&!--s&&(n(c)?c=function(){var e=[].slice.call(arguments);d.apply(this,e),p()}:c[u]=function(e){return function(){var t=[].slice.call(arguments);e&&e.apply(this,t),p()}}(d[u])),r(e[u],c,t,u,l))}else!o&&p()}var s,u,l=!!e.test,h=e.load||e.both,c=e.callback||a,d=c,p=e.complete||a;o(l?e.yep:e.nope,!!h),h&&o(h)}var u,l,c=this.yepnope.loader;if(i(e))r(e,0,c,0);else if(E(e))for(u=0;u<e.length;u++)l=e[u],i(l)?r(l,0,c,0):E(l)?d(l):Object(l)===l&&s(l,c);else Object(e)===e&&s(e,c)},d.addPrefix=function(e,t){A[e]=t},d.addFilter=function(e){C.push(e)},d.errorTimeout=1e4,null==t.readyState&&t.addEventListener&&(t.readyState="loading",t.addEventListener("DOMContentLoaded",c=function(){t.removeEventListener("DOMContentLoaded",c,0),t.readyState="complete"},0)),e.yepnope=h(),e.yepnope.executeStack=s,e.yepnope.injectJs=function(e,o,n,i,u,l){var h,c,p=t.createElement("script"),i=i||d.errorTimeout;p.src=e;for(c in n)p.setAttribute(c,n[c]);o=l?s:o||a,p.onreadystatechange=p.onload=function(){!h&&r(p.readyState)&&(h=1,o(),p.onload=p.onreadystatechange=null)},m(function(){h||(h=1,o(1))},i),u?p.onload():f.parentNode.insertBefore(p,f)},e.yepnope.injectCss=function(e,o,n,i,r,u){var l,i=t.createElement("link"),o=u?s:o||a;i.href=e,i.rel="stylesheet",i.type="text/css";for(l in n)i.setAttribute(l,n[l]);r||(f.parentNode.insertBefore(i,f),m(o,0))}}(this,document),Modernizr.load=function(){yepnope.apply(window,[].slice.call(arguments,0))},Modernizr.addTest("csscalc",function(e,t,o){return t="width:",o="calc(10px);",e=document.createElement("div"),e.style.cssText=t+Modernizr._prefixes.join(o+t),!!e.style.length}),!function(e){e(function(){"use strict";e.support.transition=function(){var e=function(){var e,t=document.createElement("bootstrap"),o={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(e in o)if(void 0!==t.style[e])return o[e]}();return e&&{end:e}}()})}(window.jQuery),!function(e){"use strict";function t(){e(n).each(function(){o(e(this)).removeClass("open")})}function o(t){var o,n=t.attr("data-target");return n||(n=t.attr("href"),n=n&&/#/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,"")),o=n&&e(n),o&&o.length||(o=t.parent()),o}var n="[data-toggle=dropdown]",i=function(t){var o=e(t).on("click.dropdown.data-api",this.toggle);e("html").on("click.dropdown.data-api",function(){o.parent().removeClass("open")})};i.prototype={constructor:i,toggle:function(){var n,i,a=e(this);if(!a.is(".disabled, :disabled"))return n=o(a),i=n.hasClass("open"),t(),i||n.toggleClass("open"),a.focus(),!1},keydown:function(t){var i,a,r,s,u;if(/(38|40|27)/.test(t.keyCode)&&(i=e(this),t.preventDefault(),t.stopPropagation(),!i.is(".disabled, :disabled"))){if(r=o(i),s=r.hasClass("open"),!s||s&&27==t.keyCode)return 27==t.which&&r.find(n).focus(),i.click();a=e("[role=menu] li:not(.divider):visible a",r),a.length&&(u=a.index(a.filter(":focus")),38==t.keyCode&&u>0&&u--,40==t.keyCode&&u<a.length-1&&u++,~u||(u=0),a.eq(u).focus())}}};var a=e.fn.dropdown;e.fn.dropdown=function(t){return this.each(function(){var o=e(this),n=o.data("dropdown");n||o.data("dropdown",n=new i(this)),"string"==typeof t&&n[t].call(o)})},e.fn.dropdown.Constructor=i,e.fn.dropdown.noConflict=function(){return e.fn.dropdown=a,this},e(document).on("click.dropdown.data-api",t).on("click.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.dropdown-menu",function(e){e.stopPropagation()}).on("click.dropdown.data-api",n,i.prototype.toggle).on("keydown.dropdown.data-api",n+", [role=menu]",i.prototype.keydown)}(window.jQuery),!function(e){"use strict";var t=function(t,o){this.options=o,this.$element=e(t).delegate('[data-dismiss="modal"]',"click.dismiss.modal",e.proxy(this.hide,this)),this.options.remote&&this.$element.find(".modal-body").load(this.options.remote)};t.prototype={constructor:t,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var t=this,o=e.Event("show");this.$element.trigger(o),this.isShown||o.isDefaultPrevented()||(e("body").addClass("modal-open"),this.isShown=!0,this.escape(),this.backdrop(function(){var o=e.support.transition&&t.$element.hasClass("fade");t.$element.parent().length||t.$element.appendTo(document.body),t.$element.show(),o&&t.$element[0].offsetWidth,t.$element.addClass("in").attr("aria-hidden",!1).focus(),t.enforceFocus(),o?t.$element.one(e.support.transition.end,function(){t.$element.trigger("shown")}):t.$element.trigger("shown")}))},hide:function(t){t&&t.preventDefault(),t=e.Event("hide"),this.$element.trigger(t),this.isShown&&!t.isDefaultPrevented()&&(this.isShown=!1,e("body").removeClass("modal-open"),this.escape(),e(document).off("focusin.modal"),this.$element.removeClass("in").attr("aria-hidden",!0),e.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal())},enforceFocus:function(){var t=this;e(document).on("focusin.modal",function(e){t.$element[0]===e.target||t.$element.has(e.target).length||t.$element.focus()})},escape:function(){var e=this;this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.modal",function(t){27==t.which&&e.hide()}):this.isShown||this.$element.off("keyup.dismiss.modal")},hideWithTransition:function(){var t=this,o=setTimeout(function(){t.$element.off(e.support.transition.end),t.hideModal()},500);this.$element.one(e.support.transition.end,function(){clearTimeout(o),t.hideModal()})},hideModal:function(){this.$element.hide().trigger("hidden"),this.backdrop()},removeBackdrop:function(){this.$backdrop.remove(),this.$backdrop=null},backdrop:function(t){var o=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var n=e.support.transition&&o;this.$backdrop=e('<div class="modal-backdrop '+o+'" />').appendTo(document.body),"static"!=this.options.backdrop&&this.$backdrop.click(e.proxy(this.hide,this)),n&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),n?this.$backdrop.one(e.support.transition.end,t):t()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(e.support.transition.end,e.proxy(this.removeBackdrop,this)):this.removeBackdrop()):t&&t()}},e.fn.modal=function(o){return this.each(function(){var n=e(this),i=n.data("modal"),a=e.extend({},e.fn.modal.defaults,n.data(),"object"==typeof o&&o);i||n.data("modal",i=new t(this,a)),"string"==typeof o?i[o]():a.show&&i.show()})},e.fn.modal.defaults={backdrop:!0,keyboard:!0,show:!0},e.fn.modal.Constructor=t,e(function(){e("body").on("click.modal.data-api",'[data-toggle="modal"]',function(t){var o=e(this),n=o.attr("href"),i=e(o.attr("data-target")||n&&n.replace(/.*(?=#[^\s]+$)/,"")),a=i.data("modal")?"toggle":e.extend({remote:!/#/.test(n)&&n},i.data(),o.data());t.preventDefault(),i.modal(a).one("hide",function(){o.focus()})})})}(window.jQuery),!function(e){"use strict";var t=function(e,t){this.init("tooltip",e,t)};t.prototype={constructor:t,init:function(t,o,n){var i,a;this.type=t,this.$element=e(o),this.options=this.getOptions(n),this.enabled=!0,"click"==this.options.trigger?this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this)):"manual"!=this.options.trigger&&(i="hover"==this.options.trigger?"mouseenter":"focus",a="hover"==this.options.trigger?"mouseleave":"blur",this.$element.on(i+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(a+"."+this.type,this.options.selector,e.proxy(this.leave,this))),this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(t){return t=e.extend({},e.fn[this.type].defaults,t,this.$element.data()),t.delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t},enter:function(t){var o=e(t.currentTarget)[this.type](this._options).data(this.type);return o.options.delay&&o.options.delay.show?(clearTimeout(this.timeout),o.hoverState="in",this.timeout=setTimeout(function(){"in"==o.hoverState&&o.show()},o.options.delay.show),void 0):o.show()},leave:function(t){var o=e(t.currentTarget)[this.type](this._options).data(this.type);return this.timeout&&clearTimeout(this.timeout),o.options.delay&&o.options.delay.hide?(o.hoverState="out",this.timeout=setTimeout(function(){"out"==o.hoverState&&o.hide()},o.options.delay.hide),void 0):o.hide()},show:function(){var e,t,o,n,i,a,r;if(this.hasContent()&&this.enabled){switch(e=this.tip(),this.setContent(),this.options.animation&&e.addClass("fade"),a="function"==typeof this.options.placement?this.options.placement.call(this,e[0],this.$element[0]):this.options.placement,t=/in/.test(a),e.remove().css({top:0,left:0,display:"block"}).appendTo(t?this.$element:document.body),o=this.getPosition(t),n=e[0].offsetWidth,i=e[0].offsetHeight,t?a.split(" ")[1]:a){case"bottom":r={top:o.top+o.height,left:o.left+o.width/2-n/2};break;case"top":r={top:o.top-i,left:o.left+o.width/2-n/2};break;case"left":r={top:o.top+o.height/2-i/2,left:o.left-n};break;case"right":r={top:o.top+o.height/2-i/2,left:o.left+o.width}}e.css(r).addClass(a).addClass("in")}},setContent:function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},hide:function(){function t(){var t=setTimeout(function(){o.off(e.support.transition.end).remove()},500);o.one(e.support.transition.end,function(){clearTimeout(t),o.remove()})}var o=this.tip();return o.removeClass("in"),e.support.transition&&this.$tip.hasClass("fade")?t():o.remove(),this},fixTitle:function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("data-original-title"))&&e.attr("data-original-title",e.attr("title")||"").removeAttr("title")},hasContent:function(){return this.getTitle()},getPosition:function(t){return e.extend({},t?{top:0,left:0}:this.$element.offset(),{width:this.$element[0].offsetWidth,height:this.$element[0].offsetHeight})},getTitle:function(){var e,t=this.$element,o=this.options;return e=t.attr("data-original-title")||("function"==typeof o.title?o.title.call(t[0]):o.title)},tip:function(){return this.$tip=this.$tip||e(this.options.template)},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(){this[this.tip().hasClass("in")?"hide":"show"]()},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}},e.fn.tooltip=function(o){return this.each(function(){var n=e(this),i=n.data("tooltip"),a="object"==typeof o&&o;i||n.data("tooltip",i=new t(this,a)),"string"==typeof o&&i[o]()})},e.fn.tooltip.Constructor=t,e.fn.tooltip.defaults={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover",title:"",delay:0,html:!0}}(window.jQuery),!function(e){"use strict";var t=function(e,t){this.init("popover",e,t)};t.prototype=e.extend({},e.fn.tooltip.Constructor.prototype,{constructor:t,setContent:function(){var e=this.tip(),t=this.getTitle(),o=this.getContent();e.find(".popover-title")[this.options.html?"html":"text"](t),e.find(".popover-content > *")[this.options.html?"html":"text"](o),e.removeClass("fade top bottom left right in")},hasContent:function(){return this.getTitle()||this.getContent()},getContent:function(){var e,t=this.$element,o=this.options;return e=t.attr("data-content")||("function"==typeof o.content?o.content.call(t[0]):o.content)},tip:function(){return this.$tip||(this.$tip=e(this.options.template)),this.$tip},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}}),e.fn.popover=function(o){return this.each(function(){var n=e(this),i=n.data("popover"),a="object"==typeof o&&o;i||n.data("popover",i=new t(this,a)),"string"==typeof o&&i[o]()})},e.fn.popover.Constructor=t,e.fn.popover.defaults=e.extend({},e.fn.tooltip.defaults,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><div class="popover-inner"><h3 class="popover-title"></h3><div class="popover-content"><p></p></div></div></div>'})}(window.jQuery),!function(e){"use strict";var t='[data-dismiss="alert"]',o=function(o){e(o).on("click",t,this.close)};o.prototype.close=function(t){function o(){n.trigger("closed").remove()}var n,i=e(this),a=i.attr("data-target");a||(a=i.attr("href"),a=a&&a.replace(/.*(?=#[^\s]*$)/,"")),n=e(a),t&&t.preventDefault(),n.length||(n=i.hasClass("alert")?i:i.parent()),n.trigger(t=e.Event("close")),t.isDefaultPrevented()||(n.removeClass("in"),e.support.transition&&n.hasClass("fade")?n.on(e.support.transition.end,o):n.slideUp("normal",function(){o()}))},e.fn.alert=function(t){return this.each(function(){var n=e(this),i=n.data("alert");i||n.data("alert",i=new o(this)),"string"==typeof t&&i[t].call(n)})},e.fn.alert.Constructor=o,e(function(){e("body").on("click.alert.data-api",t,o.prototype.close)})}(window.jQuery),!function(e){"use strict";var t=function(t,o){this.$element=e(t),this.options=e.extend({},e.fn.button.defaults,o)};t.prototype.setState=function(e){var t="disabled",o=this.$element,n=o.data(),i=o.is("input")?"val":"html";e+="Text",n.resetText||o.data("resetText",o[i]()),o[i](n[e]||this.options[e]),setTimeout(function(){"loadingText"==e?o.addClass(t).attr(t,t):o.removeClass(t).removeAttr(t)},0)},t.prototype.toggle=function(){var e=this.$element.closest('[data-toggle="buttons-radio"]');e&&e.find(".active").removeClass("active"),this.$element.toggleClass("active")},e.fn.button=function(o){return this.each(function(){var n=e(this),i=n.data("button"),a="object"==typeof o&&o;i||n.data("button",i=new t(this,a)),"toggle"==o?i.toggle():o&&i.setState(o)})},e.fn.button.defaults={loadingText:"loading..."},e.fn.button.Constructor=t,e(function(){e("body").on("click.button.data-api","[data-toggle^=button]",function(t){var o=e(t.target);o.hasClass("btn")||(o=o.closest(".btn")),o.button("toggle")})})}(window.jQuery),!function(e){"use strict";var t=function(t,o){this.$element=e(t),this.options=e.extend({},e.fn.typeahead.defaults,o),this.matcher=this.options.matcher||this.matcher,this.sorter=this.options.sorter||this.sorter,this.highlighter=this.options.highlighter||this.highlighter,this.updater=this.options.updater||this.updater,this.$menu=e(this.options.menu).appendTo("body"),this.source=this.options.source,this.shown=!1,this.listen()};t.prototype={constructor:t,select:function(){var e=this.$menu.find(".active").attr("data-value");return this.$element.val(this.updater(e)).change(),this.hide()},updater:function(e){return e},show:function(){var t=e.extend({},this.$element.offset(),{height:this.$element[0].offsetHeight});return this.$menu.css({top:t.top+t.height,left:t.left}),this.$menu.show(),this.shown=!0,this},hide:function(){return this.$menu.hide(),this.shown=!1,this},lookup:function(){var t;return this.query=this.$element.val(),!this.query||this.query.length<this.options.minLength?this.shown?this.hide():this:(t=e.isFunction(this.source)?this.source(this.query,e.proxy(this.process,this)):this.source,t?this.process(t):this)},process:function(t){var o=this;return t=e.grep(t,function(e){return o.matcher(e)}),t=this.sorter(t),t.length?this.render(t.slice(0,this.options.items)).show():this.shown?this.hide():this},matcher:function(e){return~e.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(e){for(var t,o=[],n=[],i=[];t=e.shift();)t.toLowerCase().indexOf(this.query.toLowerCase())?~t.indexOf(this.query)?n.push(t):i.push(t):o.push(t);return o.concat(n,i)},highlighter:function(e){var t=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return e.replace(new RegExp("("+t+")","ig"),function(e,t){return"<strong>"+t+"</strong>"})},render:function(t){var o=this;return t=e(t).map(function(t,n){return t=e(o.options.item).attr("data-value",n),t.find("a").html(o.highlighter(n)),t[0]}),t.first().addClass("active"),this.$menu.html(t),this},next:function(){var t=this.$menu.find(".active").removeClass("active"),o=t.next();o.length||(o=e(this.$menu.find("li")[0])),o.addClass("active")},prev:function(){var e=this.$menu.find(".active").removeClass("active"),t=e.prev();t.length||(t=this.$menu.find("li").last()),t.addClass("active")},listen:function(){this.$element.on("blur",e.proxy(this.blur,this)).on("keypress",e.proxy(this.keypress,this)).on("keyup",e.proxy(this.keyup,this)),(e.browser.chrome||e.browser.webkit||e.browser.msie)&&this.$element.on("keydown",e.proxy(this.keydown,this)),this.$menu.on("click",e.proxy(this.click,this)).on("mouseenter","li",e.proxy(this.mouseenter,this))},move:function(e){if(this.shown){switch(e.keyCode){case 9:case 13:case 27:e.preventDefault();break;case 38:e.preventDefault(),this.prev();break;case 40:e.preventDefault(),this.next()}e.stopPropagation()}},keydown:function(t){this.suppressKeyPressRepeat=!~e.inArray(t.keyCode,[40,38,9,13,27]),this.move(t)},keypress:function(e){this.suppressKeyPressRepeat||this.move(e)},keyup:function(e){switch(e.keyCode){case 40:case 38:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.lookup()}e.stopPropagation(),e.preventDefault()},blur:function(){var e=this;setTimeout(function(){e.hide()},150)},click:function(e){e.stopPropagation(),e.preventDefault(),this.select()},mouseenter:function(t){this.$menu.find(".active").removeClass("active"),e(t.currentTarget).addClass("active")}},e.fn.typeahead=function(o){return this.each(function(){var n=e(this),i=n.data("typeahead"),a="object"==typeof o&&o;i||n.data("typeahead",i=new t(this,a)),"string"==typeof o&&i[o]()})},e.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>',minLength:1},e.fn.typeahead.Constructor=t,e(function(){e("body").on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(t){var o=e(this);o.data("typeahead")||(t.preventDefault(),o.typeahead(o.data()))})})}(window.jQuery);var e,t,o;o=function(){var e,t,n,i,a,r,s,u,l;return a=1e3,e=5,n=60,t=60*n,i=["January","February","March","April","May","June","July","August","September","October","November","December"],r=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],u=function(e){var t,o,n,i,a,r;return r=e.getMinutes(),a=e.getHours(),t=a>12?"pm":"am",o=0===a||12===a?"12":""+a%12,n=10>r?"0"+r:""+r,i=""+o+":"+n+t},s=function(e){return i[e.getMonth()]},l=function(e){return r[e.getDay()]},o=function(o){var i,r,h,c,d,p,m,f,y,g,b,w,v,k,_,$,E,C,x;return d=new Date,p=(d.getTime()-o.getTime())/a,c=new Date(d.getFullYear()+1,0,1),r=new Date(d.getFullYear(),d.getMonth(),d.getDate()+(7-d.getDay())),E=new Date(d.getFullYear(),d.getMonth(),d.getDate()+1),y=new Date(d.getFullYear(),d.getMonth(),d.getDate()+2),_=new Date(d.getFullYear(),d.getMonth(),d.getDate()),x=new Date(d.getFullYear(),d.getMonth(),d.getDate()-1),b=new Date(d.getFullYear(),d.getMonth(),d.getDate()-d.getDay()),v=new Date(d.getFullYear(),0,1),h=(d.getTime()-c.getTime())/a,i=(d.getTime()-r.getTime())/a,f=(d.getTime()-y.getTime())/a,$=(d.getTime()-E.getTime())/a,k=(d.getTime()-_.getTime())/a,C=(d.getTime()-x.getTime())/a,g=(d.getTime()-b.getTime())/a,w=(d.getTime()-v.getTime())/a,m=p>=0?e>p?"A few seconds ago":n>p?""+Math.floor(p)+" seconds ago":2*n>p?"About a minute ago":t>p?""+Math.floor(p/n)+" minutes ago":2*t>p?"About an hour ago":k>p?""+Math.floor(p/t)+" hours ago":C>p?"Yesterday at "+u(o):g>p?""+l(o)+" at "+u(o):w>p?""+s(o)+" "+o.getDate()+" at "+u(o):""+s(o)+" "+o.getDate()+", "+o.getFullYear()+" at "+u(o):p>-e?"In a few seconds":p>-n?"In "+Math.floor(-p)+" seconds":p>2*-n?"In about a minute":p>-t?"In "+Math.floor(-p/n)+" minutes":p>2*-t?"In about an hour":p>$?"In "+Math.floor(-p/t)+" hours":p>f?"Tomorrow at "+u(o):p>i?""+l(o)+" at "+u(o):p>h?""+s(o)+" "+o.getDate()+" at "+u(o):""+s(o)+" "+o.getDate()+", "+o.getFullYear()+" at "+u(o)}}(),e=function(e){var t;return t=new Date,t.setTime(e),o(t)},t=function(e){var t;return t=new Date,t.setTime(e),t.getHours()%12+":"+("0"+t.getMinutes()).substr(-2,2)+(t.getHours()>12?"pm":"am")},function(e,t,o){"function"==typeof define&&define.amd?define(["jquery"],function(n){return o(n,e,t),n.mobile}):o(e.jQuery,e,t)}(this,document,function(e,t,o){!function(e){var t={touch:"ontouchend"in o};e.mobile=e.mobile||{},e.mobile.support=e.mobile.support||{},e.extend(e.support,t),e.extend(e.mobile.support,t)}(e),function(e,t,o,n){function i(e){for(;e&&"undefined"!=typeof e.originalEvent;)e=e.originalEvent;return e}function a(t,o){var a,r,s,u,l,h,c,d,p,m=t.type;if(t=e.Event(t),t.type=o,a=t.originalEvent,r=e.event.props,m.search(/^(mouse|click)/)>-1&&(r=D),a)for(c=r.length,u;c;)u=r[--c],t[u]=a[u];if(m.search(/mouse(down|up)|click/)>-1&&!t.which&&(t.which=1),-1!==m.search(/^touch/)&&(s=i(a),m=s.touches,l=s.changedTouches,h=m&&m.length?m[0]:l&&l.length?l[0]:n))for(d=0,p=A.length;p>d;d++)u=A[d],t[u]=h[u];return t}function r(t){for(var o,n,i={};t;){o=e.data(t,E);for(n in o)o[n]&&(i[n]=i.hasVirtualBinding=!0);t=t.parentNode}return i}function s(t,o){for(var n;t;){if(n=e.data(t,E),n&&(!o||n[o]))return t;t=t.parentNode}return null}function u(){F=!1}function l(){F=!0}function h(){H=0,N.length=0,q=!1,l()}function c(){u()}function d(){p(),S=setTimeout(function(){S=0,h()},e.vmouse.resetTimerDuration)}function p(){S&&(clearTimeout(S),S=0)}function m(t,o,n){var i;return(n&&n[t]||!n&&s(o.target,t))&&(i=a(o,t),e(o.target).trigger(i)),i}function f(t){var o=e.data(t.target,C);if(!(q||H&&H===o)){var n=m("v"+t.type,t);n&&(n.isDefaultPrevented()&&t.preventDefault(),n.isPropagationStopped()&&t.stopPropagation(),n.isImmediatePropagationStopped()&&t.stopImmediatePropagation())}}function y(t){var o,n,a=i(t).touches;if(a&&1===a.length&&(o=t.target,n=r(o),n.hasVirtualBinding)){H=U++,e.data(o,C,H),p(),c(),j=!1;var s=i(t).touches[0];z=s.pageX,I=s.pageY,m("vmouseover",t,n),m("vmousedown",t,n)}}function g(e){F||(j||m("vmousecancel",e,r(e.target)),j=!0,d())}function b(t){if(!F){var o=i(t).touches[0],n=j,a=e.vmouse.moveDistanceThreshold,s=r(t.target);j=j||Math.abs(o.pageX-z)>a||Math.abs(o.pageY-I)>a,j&&!n&&m("vmousecancel",t,s),m("vmousemove",t,s),d()}}function w(e){if(!F){l();var t,o=r(e.target);if(m("vmouseup",e,o),!j){var n=m("vclick",e,o);n&&n.isDefaultPrevented()&&(t=i(e).changedTouches[0],N.push({touchID:H,x:t.clientX,y:t.clientY}),q=!0)}m("vmouseout",e,o),j=!1,d()}}function v(t){var o,n=e.data(t,E);if(n)for(o in n)if(n[o])return!0;return!1}function k(){}function _(t){var o=t.substr(1);return{setup:function(){v(this)||e.data(this,E,{});var n=e.data(this,E);n[t]=!0,O[t]=(O[t]||0)+1,1===O[t]&&R.bind(o,f),e(this).bind(o,k),M&&(O.touchstart=(O.touchstart||0)+1,1===O.touchstart&&R.bind("touchstart",y).bind("touchend",w).bind("touchmove",b).bind("scroll",g))},teardown:function(){--O[t],O[t]||R.unbind(o,f),M&&(--O.touchstart,O.touchstart||R.unbind("touchstart",y).unbind("touchmove",b).unbind("touchend",w).unbind("scroll",g));var n=e(this),i=e.data(this,E);i&&(i[t]=!1),n.unbind(o,k),v(this)||n.removeData(E)}}}var $,E="virtualMouseBindings",C="virtualTouchID",x="vmouseover vmousedown vmousemove vmouseup vclick vmouseout vmousecancel".split(" "),A="clientX clientY pageX pageY screenX screenY".split(" "),T=e.event.mouseHooks?e.event.mouseHooks.props:[],D=e.event.props.concat(T),O={},S=0,z=0,I=0,j=!1,N=[],q=!1,F=!1,M="addEventListener"in o,R=e(o),U=1,H=0;e.vmouse={moveDistanceThreshold:10,clickDistanceThreshold:10,resetTimerDuration:1500};for(var L=0;L<x.length;L++)e.event.special[x[L]]=_(x[L]);M&&o.addEventListener("click",function(t){var o,n,i,a,r,s,u=N.length,l=t.target;if(u)for(o=t.clientX,n=t.clientY,$=e.vmouse.clickDistanceThreshold,i=l;i;){for(a=0;u>a;a++)if(r=N[a],s=0,i===l&&Math.abs(r.x-o)<$&&Math.abs(r.y-n)<$||e.data(i,C)===r.touchID)return t.preventDefault(),t.stopPropagation(),void 0;i=i.parentNode}},!0)}(e,t,o),function(e,t,n){function i(t,o,n){var i=n.type;n.type=o,e.event.handle.call(t,n),n.type=i}e.each("touchstart touchmove touchend tap taphold swipe swipeleft swiperight scrollstart scrollstop".split(" "),function(t,o){e.fn[o]=function(e){return e?this.bind(o,e):this.trigger(o)},e.attrFn&&(e.attrFn[o]=!0)});var a=e.mobile.support.touch,r="touchmove scroll",s=a?"touchstart":"mousedown",u=a?"touchend":"mouseup",l=a?"touchmove":"mousemove";e.event.special.scrollstart={enabled:!0,setup:function(){function t(e,t){o=t,i(a,o?"scrollstart":"scrollstop",e)}var o,n,a=this,s=e(a);s.bind(r,function(i){e.event.special.scrollstart.enabled&&(o||t(i,!0),clearTimeout(n),n=setTimeout(function(){t(i,!1)},50))})}},e.event.special.tap={tapholdThreshold:750,setup:function(){var t=this,n=e(t);n.bind("vmousedown",function(a){function r(){clearTimeout(l)}function s(){r(),n.unbind("vclick",u).unbind("vmouseup",r),e(o).unbind("vmousecancel",s)}function u(e){s(),h===e.target&&i(t,"tap",e)}if(a.which&&1!==a.which)return!1;var l,h=a.target;a.originalEvent,n.bind("vmouseup",r).bind("vclick",u),e(o).bind("vmousecancel",s),l=setTimeout(function(){i(t,"taphold",e.Event("taphold",{target:h}))},e.event.special.tap.tapholdThreshold)})}},e.event.special.swipe={scrollSupressionThreshold:30,durationThreshold:1e3,horizontalDistanceThreshold:30,verticalDistanceThreshold:75,setup:function(){var t=this,o=e(t);o.bind(s,function(t){function i(t){if(s){var o=t.originalEvent.touches?t.originalEvent.touches[0]:t;a={time:(new Date).getTime(),coords:[o.pageX,o.pageY]},Math.abs(s.coords[0]-a.coords[0])>e.event.special.swipe.scrollSupressionThreshold&&t.preventDefault()}}var a,r=t.originalEvent.touches?t.originalEvent.touches[0]:t,s={time:(new Date).getTime(),coords:[r.pageX,r.pageY],origin:e(t.target)};
o.bind(l,i).one(u,function(){o.unbind(l,i),s&&a&&a.time-s.time<e.event.special.swipe.durationThreshold&&Math.abs(s.coords[0]-a.coords[0])>e.event.special.swipe.horizontalDistanceThreshold&&Math.abs(s.coords[1]-a.coords[1])<e.event.special.swipe.verticalDistanceThreshold&&s.origin.trigger("swipe").trigger(s.coords[0]>a.coords[0]?"swipeleft":"swiperight"),s=a=n})})}},e.each({scrollstop:"scrollstart",taphold:"tap",swipeleft:"swipe",swiperight:"swipe"},function(t,o){e.event.special[t]={setup:function(){e(this).bind(o,e.noop)}}})}(e,this)});var n=window.bootbox||function(e,t){function o(e,t){return null==t&&(t=n),"string"==typeof c[t][e]?c[t][e]:t!=i?o(e,i):e}var n="en",i="en",a=!0,r="static",s="javascript:;",u="",l={},h={};h.setLocale=function(e){for(var t in c)if(t==e)return n=e,void 0;throw new Error("Invalid locale: "+e)},h.addLocale=function(e,t){"undefined"==typeof c[e]&&(c[e]={});for(var o in t)c[e][o]=t[o]},h.setIcons=function(e){l=e,("object"!=typeof l||null==l)&&(l={})},h.alert=function(){var e="",t=o("OK"),n=null;switch(arguments.length){case 1:e=arguments[0];break;case 2:e=arguments[0],"function"==typeof arguments[1]?n=arguments[1]:t=arguments[1];break;case 3:e=arguments[0],t=arguments[1],n=arguments[2];break;default:throw new Error("Incorrect number of arguments: expected 1-3")}return h.dialog(e,{label:t,icon:l.OK,callback:n},{onEscape:n||!0})},h.confirm=function(){var e="",t=o("CANCEL"),n=o("CONFIRM"),i=null;switch(arguments.length){case 1:e=arguments[0];break;case 2:e=arguments[0],"function"==typeof arguments[1]?i=arguments[1]:t=arguments[1];break;case 3:e=arguments[0],t=arguments[1],"function"==typeof arguments[2]?i=arguments[2]:n=arguments[2];break;case 4:e=arguments[0],t=arguments[1],n=arguments[2],i=arguments[3];break;default:throw new Error("Incorrect number of arguments: expected 1-4")}var a=function(){"function"==typeof i&&i(!1)},r=function(){"function"==typeof i&&i(!0)};return h.dialog(e,[{label:t,icon:l.CANCEL,callback:a},{label:n,icon:l.CONFIRM,callback:r}],{onEscape:a})},h.prompt=function(){var e="",n=o("CANCEL"),i=o("CONFIRM"),a=null,r="";switch(arguments.length){case 1:e=arguments[0];break;case 2:e=arguments[0],"function"==typeof arguments[1]?a=arguments[1]:n=arguments[1];break;case 3:e=arguments[0],n=arguments[1],"function"==typeof arguments[2]?a=arguments[2]:i=arguments[2];break;case 4:e=arguments[0],n=arguments[1],i=arguments[2],a=arguments[3];break;case 5:e=arguments[0],n=arguments[1],i=arguments[2],a=arguments[3],r=arguments[4];break;default:throw new Error("Incorrect number of arguments: expected 1-5")}var s=e,u=t("<form></form>");u.append("<input autocomplete=off type=text value='"+r+"' />");var c=function(){"function"==typeof a&&a(null)},d=function(){"function"==typeof a&&a(u.find("input[type=text]").val())},p=h.dialog(u,[{label:n,icon:l.CANCEL,callback:c},{label:i,icon:l.CONFIRM,callback:d}],{header:s,show:!1,onEscape:c});return p.on("shown",function(){u.find("input[type=text]").focus(),u.on("submit",function(e){e.preventDefault(),p.find(".btn-primary").click()})}),p.modal("show"),p},h.dialog=function(o,n,i){var l="",h=[],i=i||{};null==n?n=[]:"undefined"==typeof n.length&&(n=[n]);for(var c=n.length;c--;){var d=null,p=null,m=null,f="",y=null;if("undefined"==typeof n[c].label&&"undefined"==typeof n[c]["class"]&&"undefined"==typeof n[c].callback){var g=0,b=null;for(var w in n[c])if(b=w,++g>1)break;1==g&&"function"==typeof n[c][w]&&(n[c].label=b,n[c].callback=n[c][w])}"function"==typeof n[c].callback&&(y=n[c].callback),n[c]["class"]?m=n[c]["class"]:c==n.length-1&&n.length<=2&&(m="btn-primary"),d=n[c].label?n[c].label:"Option "+(c+1),n[c].icon&&(f="<i class='"+n[c].icon+"'></i> "),p=n[c].href?n[c].href:s,l="<a data-handler='"+c+"' class='btn "+m+"' href='"+p+"'>"+f+d+"</a>"+l,h[c]=y}var v=["<div class='bootbox modal' tabindex='-1' style='overflow:hidden;'>"];if(i.header){var k="";("undefined"==typeof i.headerCloseButton||i.headerCloseButton)&&(k="<a href='"+s+"' class='close'>&times;</a>"),v.push("<div class='modal-header'>"+k+"<h3>"+i.header+"</h3></div>")}v.push("<div class='modal-body'></div>"),l&&v.push("<div class='modal-footer'>"+l+"</div>"),v.push("</div>");var _=t(v.join("\n")),$="undefined"==typeof i.animate?a:i.animate;$&&_.addClass("fade");var E="undefined"==typeof i.classes?u:i.classes;return E&&_.addClass(E),_.find(".modal-body").html(o),_.on("hidden",function(){_.remove()}),_.on("keyup.dismiss.modal",function(e){27==e.which&&i.onEscape&&("function"==typeof i.onEscape&&i.onEscape(),_.modal("hide"))}),_.on("shown",function(){_.find("a.btn-primary:first").focus()}),_.on("click",".modal-footer a, a.close",function(e){var o=t(this).data("handler"),i=h[o],a=null;("undefined"==typeof o||"undefined"==typeof n[o].href)&&(e.preventDefault(),"function"==typeof i&&(a=i()),a!==!1&&_.modal("hide"))}),t("body").append(_),_.modal({backdrop:"undefined"==typeof i.backdrop?r:i.backdrop,keyboard:!1,show:!1}),_.on("show",function(){t(e).off("focusin.modal")}),("undefined"==typeof i.show||i.show===!0)&&_.modal("show"),_},h.modal=function(){var e,o,n,i={onEscape:null,keyboard:!0,backdrop:r};switch(arguments.length){case 1:e=arguments[0];break;case 2:e=arguments[0],"object"==typeof arguments[1]?n=arguments[1]:o=arguments[1];break;case 3:e=arguments[0],o=arguments[1],n=arguments[2];break;default:throw new Error("Incorrect number of arguments: expected 1-3")}return i.header=o,n="object"==typeof n?t.extend(i,n):i,h.dialog(e,[],n)},h.hideAll=function(){t(".bootbox").modal("hide")},h.animate=function(e){a=e},h.backdrop=function(e){r=e},h.classes=function(e){u=e};var c={en:{OK:"OK",CANCEL:"Cancel",CONFIRM:"OK"},fr:{OK:"OK",CANCEL:"Annuler",CONFIRM:"D'accord"},de:{OK:"OK",CANCEL:"Abbrechen",CONFIRM:"Akzeptieren"},es:{OK:"OK",CANCEL:"Cancelar",CONFIRM:"Aceptar"},br:{OK:"OK",CANCEL:"Cancelar",CONFIRM:"Sim"},nl:{OK:"OK",CANCEL:"Annuleren",CONFIRM:"Accepteren"},ru:{OK:"OK",CANCEL:"Отмена",CONFIRM:"Применить"},it:{OK:"OK",CANCEL:"Annulla",CONFIRM:"Conferma"}};return h}(document,window.jQuery);window.bootbox=n;var i,a,r=[].slice;window.requestAnimationFrame||(window.requestAnimationFrame=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return window.setTimeout(function(){return e(+new Date)},1e3/60)}),Date.now||(Date.now=function(){return(new Date).valueOf()}),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+/,"").replace(/\s+$/,"")}),window.clone_shallow=function(e){var t,o;o={};for(t in e)o[t]=e[t];return o},RegExp.quote=function(e){return(e+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")},jQuery.fn.disable=function(e){return e=!!e,$(this).each(function(){return $(this).prop("disabled")!==e?$(this).prop("disabled",e):void 0})},function(){var e,t,o,n,i,a,r,s,u,l,h;for(n=null!=(u=window.location.search)?u.substr(1):void 0,a=n.split("&"),o=function(){var o,n,r,s;for(s=[],o=0,n=a.length;n>o;o++)t=a[o],s.push((r=t.split("="),e=r[0],i=r[1],r));return s}(),window.location.query={},h=[],r=0,s=o.length;s>r;r++)l=o[r],e=l[0],i=l[1],h.push(window.location.query[e]=i);return h}(),jQuery.cookie=function(e,t,o){var n,i,a,r,s,u,l,h,c,d;if("undefined"!=typeof t)return o=o||{},null===t&&(t="",o.expires=-1),u="",o.expires&&("number"==typeof o.expires||o.expires.toUTCString)&&("number"==typeof o.expires?(r=new Date,r.setTime(r.getTime()+1e3*60*60*24*o.expires)):r=o.expires,u="; expires="+r.toUTCString()),l=o.path?"; path="+o.path:"",s=o.domain?"; domain="+o.domain:"",h=o.secure?"; secure="+o.secure:"",document.cookie=[e,"=",encodeURIComponent(t),u,l,s,h].join("");if(i=null,document.cookie&&""!==document.cookie)for(a=document.cookie.split(";"),c=0,d=a.length;d>c;c++)if(n=a[c],n=jQuery.trim(n),n.substring(0,e.length+1)===""+e+"="){i=decodeURIComponent(n.substring(e.length+1));break}return i},jQuery.fn.capQueue=function(){var e;return e=$(this).queue("fx"),e&&e.splice(1,e.length),$(this)},jQuery.fn.fireworks=function(e){var t,o,n,i,a=this;for(null==e&&(e=5),i=[],o=n=0;e>=0?e>n:n>e;o=e>=0?++n:--n)t=2e3*Math.random(),i.push(this.delay(t).queue(function(){var e,t,o,n,i,r,s,u,l,h,c,d,p,m;for(p=a.position(),l=p.top,i=p.left,i+=jQuery(window).width()*Math.random(),l+=jQuery(window).height()*Math.random(),t="#"+Math.random().toString(16).slice(2,8),a.dequeue(),m=[],n=d=0;50>d;n=++d)e=6.294*Math.random(),u=Math.min(100,150*Math.random()),h=u*Math.cos(e),c=u*Math.sin(e),r=2*Math.random(),s=5,o=Math.random()*s,m.push(jQuery("<div>").css({position:"fixed","background-color":t,width:s,height:s,"border-radius":s,top:l,left:i}).appendTo("body").animate({left:"+="+h*r,top:"+="+c*r,width:o,height:o},{duration:1e3*r,complete:function(){return $(this).remove()}}));return m}));return i},$(window).resize(function(){return $(".expando").each(function(){var e,t,o,n,i,a,r,s;for(e=0,s=$(this).find(".add-on, .padd-on"),a=0,r=s.length;r>a;a++)t=s[a],e+=$(t).outerWidth();return i=$(this).width(),o=$(this).find("input, .input"),n=o.hasClass("input")?0:o.outerWidth()-o.width(),Modernizr.csscalc?(o.css("width","-webkit-calc(100% - "+(n+e)+"px)"),o.css("width","-moz-calc(100% - "+(n+e)+"px)"),o.css("width","-o-calc(100% - "+(n+e)+"px)"),o.css("width","calc(100% - "+(n+e)+"px)")):o.width(i-n-e)})}),$(window).resize(),setTimeout(function(){return $(window).resize()},762),setTimeout(function(){return $(window).resize()},2718),setTimeout(function(){return $(window).resize()},6022),function(){var e,t,o;return t=new Date,t.setFullYear(t.getFullYear()+1),t.setHours(0),t.setMonth(0),t.setMinutes(0),t.setSeconds(0),t.setDate(1),o=t-Date.now(),2147483647>o&&setTimeout(function(){return $("body").fireworks(25)},o),e=new Date,e.setHours(16),e.setMinutes(20),e.setSeconds(0),e.setMonth(3),e.setDate(20),o=e-Date.now(),2147483647>o&&o>0&&setTimeout(function(){return wt("pass the weed, man")},o),e=new Date,e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMonth(8),e.setDate(5),o=e-Date.now(),2147483647>o&&o>0?setTimeout(function(){return w($("<div>").addClass("alert alert-info").html("Today is protobowl developer <b>Ben Vest</b>'s birthday. Send him an email at <code>vestben@gmail.com</code> or something."))},o):void 0}(),a=function(e){var t,o;if(null!=e?e.split:void 0)return o=e.split("."),t=function(){var e,t,n,i,a,s,u,l;for(a=1<=arguments.length?r.call(arguments,0):[],s=0,l=a.length;l>s;s++){for(n=a[s],i=n.split("."),t=0,e=u=0;4>=u;e=++u)"x"!==i[e]&&i[e]!==o[e]&&t++;if(0===t)return!0}return!1},t("129.65.x.x","207.62.x.x","198.188.x.x")?$("a.brand strong").text("Poly"):void 0},i=function(){var e,t,o;return e=new Date,24!==(o=e.getDate())&&25!==o||11!==e.getMonth()?1===e.getMonth()&&0===e.getDay()&&e.getDate()<=7?$("a.brand strong").text("Super"):3===e.getMonth()&&22===e.getDate()?($("body").addClass("earthday"),$("a.brand .motto").text("growing one thing and growing it well")):7===e.getMonth()&&28===e.getDate()?$("a.brand .motto").text("on August 28, 2012, protobowl was first <a href='http://hsquizbowl.org/forums/viewtopic.php?f=123&t=13478'>announced</a>"):5===e.getMonth()&&30===e.getDate()?$("a.brand .motto").text("protobowl's precursor, <a href='https://github.com/polarcuke/its-ac-attack'>its-ac-attack</a> was started June 30, 2012"):6===e.getMonth()&&20===e.getDate()?$("a.brand .motto").text("the first line of protobowl code was written July 20, 2012"):3===e.getMonth()&&1===e.getDate()?($("a.brand").html('<u><b>Quizbowl DB</b></u> <em style="font-size:small">Welcome to Quizbowl DB, the best way to get better at quizbowl!</em>'),$("body").addClass("aprilfools")):(t=new Date,t.setDate(e.getDate()+1),t.setHours(0),t.setMinutes(0),t.setSeconds(0),setTimeout(i,Math.max(100,t-Date.now()))):$("body").addClass("christmas")},i(),("undefined"==typeof console||null===console)&&(window.console={log:function(){return null},trace:function(){return null},error:function(){return null}}),Array.prototype.map||(Array.prototype.map=function(e,t){var o,n,i,a,r,s,u;if(i=void 0,o=void 0,a=void 0,"undefined"==typeof this||null===this)throw new TypeError(" this is null or not defined");if(n=Object(this),s=n.length>>>0,"function"!=typeof e)throw new TypeError(e+" is not a function");for(t&&(i=t),o=new Array(s),a=0;s>a;)r=void 0,u=void 0,a in n&&(r=n[a],u=e.call(i,r,a,n),o[a]=u),a++;return o});var s,u,l,h,c;s=null,u=null,l=function(e){var t,o,n,i;e?jQuery.cookie("protoauth",e):"undefined"!=typeof e&&jQuery.cookie("protoauth","");try{i=jQuery.cookie("protoauth").split("&"),n=i[0],t=i[1],u=JSON.parse(decodeURIComponent(t))}catch(a){o=a,u=null}return $("body").toggleClass("authenticated",!!u),$("#userinfo").is(":hidden")||!!u===$("#user").is(":hidden")?$("#userinfo").fadeOut("normal",function(){return u?($("#signin").hide(),$(".user-name").text(u.email),$("#user").show(),$("#userinfo").fadeIn()):($("#signin").show(),$("#user").hide(),$("#userinfo").fadeIn())}):void 0},l(),$(document).ready(function(){var e;return("undefined"!=typeof protobowl_config&&null!==protobowl_config?protobowl_config.auth:void 0)?"undefined"!=typeof navigator&&null!==navigator?null!=(e=navigator.id)?e.watch({loggedInUser:null!=u?u.email:void 0,onlogin:function(e){return s=e,qt()&&Ut?Wt.link(s):void 0},onlogout:function(){return s=null,u&&j({verb:"logging out of the current authenticated session"}),l(null),c()}}):void 0:void 0:void 0}),h=function(e){var t;return s=null,"okay"!==(null!=e?e.status:void 0)?(j({verb:"server rejected login request: "+(null!=e?e.reason:void 0)}),"undefined"!=typeof navigator&&null!==navigator?null!=(t=navigator.id)?t.logout():void 0:void 0):(u||Wt.accelerate_cleanup(),j({verb:"logging in and beginning a new authenticated session"}),"function"==typeof l&&l(e.cookie),c())},c=function(){return eo.hide_disconnect=!0,eo.socket.disconnect(),Vt.users={},eo.socket.reconnect(),eo.hide_disconnect=!1},$("a[href='#signin']").click(function(e){var t;return"undefined"!=typeof navigator&&null!==navigator&&null!=(t=navigator.id)&&t.request(),e.preventDefault()}),$("a[href='#logout']").click(function(e){var t;return"undefined"!=typeof navigator&&null!==navigator&&null!=(t=navigator.id)&&t.logout(),e.preventDefault()});var d,p=[].indexOf||function(e){for(var t=0,o=this.length;o>t;t++)if(t in this&&this[t]===e)return t;return-1},r=[].slice;d=function(){function e(e,t){this.id=t,this.room=e,this.guesses=0,this.interrupts=0,this.early=0,this.earlyseen=0,this.seen=0,this.correct=0,this.streak=0,this.streak_record=0,this.negstreak=0,this.negstreak_record=0,this.history=[],this.time_spent=0,this.last_action=this.room.serverTime(),this.last_session=this.room.serverTime(),this.created=this.room.serverTime(),this.idle=!1,this.times_buzzed=0,this.team="",this.banned=0,this.auth=null,this.moderator=!1,this.bubble=0,this.prefs={typing:!0},this.lock=!1,this.muwave=!1,this.__recent_actions=[],this.__rate_limited=0}return e.prototype.link=function(){return this.room.log("QuizPlayer.link(name) not implemented")},e.prototype.emit=function(){return this.room.log("QuizPlayer.emit(name, data) not implemented")},e.prototype.touch=function(e){var t,o;return this.idle=!1,t=this.room.serverTime(),e||(o=t-this.last_action,6e5>o&&(this.time_spent+=o)),this.last_action=t,this.room.check_timeout()},e.prototype.active=function(){return this.online()&&this.room.serverTime()-this.last_action<6e5&&!this.idle},e.prototype.online=function(){return!0},e.prototype.level=function(){var e,t;return e=this.room.acl,"_"===this.id[0]?e.ninja:this.moderator?e.moderator:(null!=(t=this.elect)?t.term:void 0)>this.room.serverTime()?e.elected:this.room.locked()?this.score()>=50?e.fifty:this.score()>0?e.positive:e.baseline:e.unlocked},e.prototype.authorized=function(e){return null==e&&(e=this.room.escalate),"string"==typeof e&&(e=this.room.acl[e]),this.level()>=e},e.prototype.score=function(){var e,t,o;return e=10,t=15,o=-5,this.room.interrupts?this.early*t+(this.correct-this.early)*e+this.interrupts*o:this.correct*e},e.prototype.reset_score=function(){return this.verb("was reset from "+this.score()+" points ("+this.correct+" correct, "+this.early+" early, "+this.guesses+" guesses)"),this.negstreak_record=this.negstreak=this.streak_record=this.streak=this.earlyseen=this.seen=this.interrupts=this.guesses=this.correct=this.early=0,this.history=[],this.sync(!0)},e.prototype.bookmark=function(e){var t,o;return o=e.value,t=e.id,0},e.prototype.ban=function(){return 1},e.prototype.rate_limited=function(){var e,t,o,n,i,a,r,s,u,l,h,c,d;if(l=function(){var e,t;e=this.room.users,t=[];for(o in e)s=e[o],"_"!==o[0]&&s.active()&&t.push(o);return t}.call(this),e=856,l.length<=2&&(e=612),a=316,u=10,t=this.room.serverTime(),this.__recent_actions=this.__recent_actions.slice(-u),this.__recent_actions.length===u){for(i=0,d=this.__recent_actions,h=0,c=d.length;c>h;h++)r=d[h],i+=r;if(n=t-i/u,u*a/2>n&&this.throttle(),u*e/2>n)return!0}},e.prototype.throttle=function(){var e;return e=this.room.serverTime()+5e3,e-this.__rate_limited>762&&(this.emit("throttle",this.__rate_limited),this.__recent_actions.push(this.room.serverTime())),this.__rate_limited=e},e.prototype.rate_limit=function(){return this.__recent_actions.push(this.room.serverTime()),this.rate_limited()?this.create_tribunal():void 0},e.prototype.reprimand=function(e){var t,o,n;return o=e.user,t=e.reason,this.reprimand_embargo>this.room.serverTime()?(this.notify("can not reprimand anyone for "+Math.ceil((this.reprimand_embargo-this.room.serverTime())/1e3)+" seconds"),void 0):(this.authorized(this.room.acl.moderator)||(this.reprimand_embargo=this.room.serverTime()+6e4,this.sync()),null!=(n=this.room.users[o])?n.emit("reprimand",{trigger:this.id,time:this.room.serverTime(),reason:t}):void 0)},e.prototype.nominate=function(){var e,t,o,n,i=this;return this.touch(),this.room.escalate>this.room.acl.unlocked?void 0:this.elect_embargo&&this.elect_embargo>this.room.serverTime()?(this.notify("can not run for reelection for another "+Math.ceil((this.elect_embargo-this.room.serverTime())/6e4)+" minutes"),void 0):this.elect?void 0:(e=this.room.serverTime(),n=function(){var e,n;e=this.room.users,n=[];for(t in e)o=e[t],"_"!==t[0]&&o.active()&&!o.prefs.distraction&&n.push(t);return n}.call(this),this.__elect_timeout=setTimeout(function(){return i.verb("got romneyed",!0),i.elect_embargo=i.room.serverTime()+24e4,i.elect=null,i.sync(!0)},6e4),this.elect={votes:[],against:[],time:e,witnesses:n},this.vote_election({user:this.id,position:"elect"}))},e.prototype.create_tribunal=function(e){var t,o,n,i,a,r,s=this;if(null==e&&(e=!1),this.touch(),!this.tribunal){if(t=this.room.serverTime(),i=function(){var e,t;e=this.room.users,t=[];for(o in e)n=e[o],"_"!==o[0]&&n.active()&&!n.prefs.distraction&&t.push(o);return t}.call(this),i.length<=1)return;return this.room.users[null!=(a=this.tribunal)?a.initiator:void 0]&&!this.room.users[null!=(r=this.tribunal)?r.initiator:void 0].authorized("moderator")&&(this.room.users[this.tribunal.initiator].tribunal_embargo=this.room.serverTime()+6e4),this.__tribunal_timeout=setTimeout(function(){var e,t;return s.room.users[null!=(e=s.tribunal)?e.initiator:void 0]&&!s.room.users[null!=(t=s.tribunal)?t.initiator:void 0].authorized("moderator")&&(s.room.users[s.tribunal.initiator].tribunal_embargo=s.room.serverTime()+24e4,s.room.users[s.tribunal.initiator].sync()),s.verb("survived the tribunal",!0),s.tribunal=null,s.sync(!0)},6e4),this.tribunal={votes:[],against:[],time:t,witnesses:i,term:0,initiator:e},this.sync(!0)}},e.prototype.trigger_tribunal=function(e){var t,o;return this.touch(),e&&(null!=(t=this.room)?t.users[e]:void 0)?e===this.id?(this.notify("is somewhat of a masochist"),void 0):this.tribunal_embargo&&this.tribunal_embargo>this.room.serverTime()?(this.notify("can not trigger a ban tribunal for another "+Math.ceil((this.tribunal_embargo-this.room.serverTime())/6e4)+" minutes"),void 0):this.room.users[e].authorized("moderator")?(this.notify("cannot fell a god with a mortal sword"),void 0):(this.verb("created a ban tribunal for !@"+e),null!=(o=this.room.users[e])?o.create_tribunal(this.id):void 0):void 0},e.prototype.ban_user=function(e){var t,o,n;return this.authorized("moderator")?((!(null!=(t=this.room.users[e])?t.banned:void 0)||this.room.serverTime()>(null!=(o=this.room.users[e])?o.banned:void 0))&&this.verb("banned !@"+e+" from /"+this.room.name),null!=(n=this.room.users[e])?n.ban(3e5):void 0):void 0},e.prototype.vote_election=function(e){var t,o,n,i,a,r,s,u,l,h,c,d,m,f,y,g,b,w;if(l=e.user,a=e.position,this.touch(),o=null!=(m=this.room.users[l])?m.elect:void 0){if(!o.term){if(h=o.votes,t=o.against,d=o.witnesses,f=this.id,p.call(d,f)<0)return;if(y=this.id,p.call(h,y)>=0||(g=this.id,p.call(t,g)>=0))return;return"elect"===a?h.push(this.id):"deny"===a?t.push(this.id):this.verb("voted from a diebold machine"),h.length>d.length/2+t.length&&(r=6e4,d=function(){var e,t;e=this.room.users,t=[];for(n in e)s=e[n],"_"!==n[0]&&s.active()&&t.push(n);return t}.call(this),this.room.users[l].elect={impeach:[],witnesses:d,term:this.room.serverTime()+r},this.room.users[l].inaugurate()),u=d.length-t.length-h.length,h.length+u<=d.length/2+t.length&&(this.room.users[l].verb("was not elected",!0),this.room.users[l].elect_embargo=this.room.serverTime()+72e4,this.room.users[l].impeach()),this.room.users[l].sync(!0)}if(o.term>this.room.serverTime()){if(i=o.impeach,d=o.witnesses,b=this.id,p.call(d,b)<0)return;if(w=this.id,p.call(i,w)>=0)return;if("impeach"===a)return i.push(this.id),c=Math.floor(d.length/2+1)-i.length,0>=c?(this.room.users[l].verb("was impeached from office",!0),this.room.users[l].impeach()):this.room.users[l].sync(!0)}}},e.prototype.inaugurate=function(){var e,t=this;if(null!=(e=this.elect)?e.term:void 0)return clearTimeout(this.__elect_timeout),this.__elect_timeout=setTimeout(function(){return t.verb("is no longer commander in chief",!0),t.impeach()},this.elect.term-this.room.serverTime())},e.prototype.impeach=function(){return this.elect=null,clearTimeout(this.__elect_timeout),this.sync(!0)},e.prototype.finish_term=function(){var e;if(null!=(e=this.elect)?e.term:void 0)return this.verb("has finished tenure in office",!0),this.impeach()},e.prototype.vote_tribunal=function(e){var t,o,n,i,a,r,s,u,l,h,c,d,m;if(a=e.user,o=e.position,n=null!=(u=this.room.users[a])?u.tribunal:void 0){if(r=n.votes,t=n.against,s=n.witnesses,l=this.id,p.call(s,l)<0)return;if(h=this.id,p.call(r,h)>=0||(c=this.id,p.call(t,c)>=0))return;return"ban"===o?(r.push(this.id),this.verb("voted to ban !@"+a)):"free"===o?(t.push(this.id),this.verb("voted to free !@"+a)):this.verb("voted with a hanging chad"),r.length>(s.length-1)/2+t.length&&(this.room.users[a].verb("got voted off the island",!0),clearTimeout(this.room.users[a].__tribunal_timeout),this.room.users[a].tribunal=null,this.room.users[a].ban(9e5)),i=s.length-t.length-r.length-1,r.length+i<=(s.length-1)/2+t.length&&(this.room.users[null!=(d=this.room.users[a])?null!=(m=d.tribunal)?m.initiator:void 0:void 0]&&(this.room.users[this.room.users[a].tribunal.initiator].tribunal_embargo=this.room.serverTime()+48e4),this.room.users[a].verb("was freed because of a hung jury",!0),this.room.users[a].tribunal=null,clearTimeout(this.room.users[a].__tribunal_timeout)),this.room.users[a].sync(!0)}},e.prototype.verb=function(e,t){return"_"===this.id.toString()[0]?this.notify(e):(t||this.rate_limit(),this.room.emit("log",{user:this.id,verb:e,time:this.room.serverTime()}))},e.prototype.notify=function(e){return this.emit("log",{user:this.id,verb:e,time:this.room.serverTime(),notify:!0})},e.prototype.disconnect_all=function(){return this.room.log("QuizPlayer::disconnect_all() not implemented")},e.prototype.disconnected=function(){var e;return this.touch(),0===this.sockets.length&&(e=(this.room.serverTime()-this.last_session)/1e3,e>90?this.verb("left the room (logged on "+Math.round(e/60)+" minutes ago)"):e>1?this.verb("left the room (logged on "+Math.round(e)+" seconds ago)"):this.verb("left the room")),this.sync(!0)},e.prototype.echo=function(e,t){return e.avg&&e.std&&e.n&&(this._latency=[e.avg,e.std,e.n]),t(this.room.serverTime())},e.prototype.buzz=function(e,t){return this.touch(),this.room.qid===e&&this.room.buzz(this.id,t)?this.rate_limit():void 0},e.prototype.guess=function(e){return this.touch(),this.room.guess(this.id,e)},e.prototype.command=function(e,t){var o,n;return"auth"===e?(null!=(o=t[0])?o.trim().toLowerCase():void 0)===("function"==typeof this._password?this._password():void 0)?this._apotheify():this.notify("has an invalid password"):"ragequit"===e||"qq"===e||"corgi"===e||"super"===e||"quit"===e||"dog"===e||"cute"===e?this.emit("redirect","http://i.imgur.com/4Dx75Bq.jpg"):"deauth"===e||"unauth"===e?this.cincinnatus():"rename"===e||"name"===e?this.set_name(null!=(n=t[0])?n.trim():void 0):this.notify("no command named `"+e+"` exists")},e.prototype.chat=function(e){var t,o,n,i,a,s,u,l,h,c,d,p,m,f,y;if(c=e.text,n=e.done,i=e.first,h=e.session,this.touch(),"string"==typeof c&&this.authorized(this.room.mute)){if("@$>"===c.substr(0,3)&&n)return m=c.substr(3).trim().split(" "),u=m[0],o=2<=m.length?r.call(m,1):[],this.command(u,o),void 0;if(c=c.slice(0,1e4),a=this.id,"_"===a[0]&&(a="__"+this.name.replace(/\s+/g,"_")),l={text:c,session:h,user:a,first:i,done:n,time:this.room.serverTime()},i){t={};for(s in l)p=l[s],t[s]=p;t.text="(typing)"}if(this.room.serverTime()<this.bubble)return this.emit("chat",l),void 0;if(n||"(typing)"===c)return this.rate_limit(),this.room.emit("chat",l);f=this.room.users,y=[];for(a in f)d=f[a],d.prefs.typing&&!d.muwave?y.push(d.emit("chat",l)):i?y.push(d.emit("chat",t)):y.push(void 0);return y}},e.prototype.skip=function(){return this.touch(),this.room.attempt||this.room.no_skip?void 0:(this.room.new_question(),this.verb("skipped a question"))},e.prototype.next=function(){return this.touch(),this.room.next()},e.prototype.finish=function(){return this.touch(),this.attempt||this.room.no_skip||this.room.time()>=this.room.end_time||this.room.time_freeze?void 0:(this.verb("skipped to the end of a question"),this.room.finish(),this.room.sync())},e.prototype.pause=function(){return this.touch(),this.room.no_pause||this.room.time_freeze?void 0:!this.room.attempt&&this.room.time()<this.room.end_time?(this.rate_limit(),this.verb("paused the game"),this.room.freeze(),this.room.sync()):void 0},e.prototype.unpause=function(){var e;return this.touch(),this.room.time_freeze?(this.room.question?this.room.attempt||(e=Math.round((this.room.offsetTime()-this.room.time_freeze)/1e3),e>2?this.verb("resumed the game (paused for "+e+" seconds}"):this.verb("resumed the game"),this.room.unfreeze()):(this.room.new_question(),this.room.unfreeze()),this.room.sync()):void 0},e.prototype.accelerate_cleanup=function(){return this.score()<=20?this.room.delete_user(this.id):void 0},e.prototype.set_distribution=function(e){var t,o,n,i,a=this;if(this.touch(),this.authorized()&&e){i=[],n=[];for(t in e)o=e[t],0===this.room.distribution[t]&&o>0&&i.push(t),this.room.distribution[t]>0&&0===o&&n.push(t);return this.room.distribution=e,this.room.sync(4),this.room.get_size(function(e){return i.length>0&&a.verb("enabled "+i.join(", ")+" ("+e+" questions)"),n.length>0?a.verb("disabled "+n.join(", ")+" ("+e+" questions)"):void 0})}},e.prototype.set_difficulty=function(e){var t=this;return this.touch(),this.authorized()?(this.room.difficulty=e,this.room.sync(1),this.room.get_size(function(o){return t.verb("set difficulty to "+(e||"everything")+" ("+o+" questions)")})):void 0},e.prototype.set_category=function(e){var t=this;return this.touch(),this.authorized()?(this.room.category=e,e||this.room.reset_distribution(),this.room.sync(1),this.room.get_size(function(o){return"custom"===e?t.verb("enabled a custom category distribution ("+o+" questions)"):t.verb("set category to "+(e.toLowerCase()||"potpourri")+" ("+o+" questions)")})):void 0},e.prototype.set_max_buzz=function(e){return this.touch(),this.authorized()?(this.room.max_buzz!==e&&(e?1===e?this.verb("restricted players and teams to a single buzz per question"):e>1&&this.verb("restricted players and teams to "+e+" buzzes per question"):this.verb("allowed players to buzz multiple times")),this.room.max_buzz=e,this.room.sync(1)):void 0},e.prototype.set_skip=function(e){return this.touch(),this.authorized()?(this.room.no_skip=!e,this.room.sync(1),this.room.no_skip?this.verb("disabled question skipping"):this.verb("enabled question skipping")):void 0},e.prototype.set_pause=function(e){return this.touch(),this.authorized()?(this.unpause(),e?this.verb("enabled pausing questions"):this.verb("disabled pausing questions"),this.room.no_pause=!e,this.room.sync(1)):void 0},e.prototype.set_bonus=function(e){return this.touch(),this.authorized()?(this.room.show_bonus=!!e,this.room.show_bonus?this.verb("enabled showing bonus questions"):this.verb("disabled showing bonus questions"),this.room.sync(1)):void 0},e.prototype.set_speed=function(e){return this.touch(),!this.authorized()||isNaN(e)||0>=e?void 0:(this.room.set_speed(e),this.room.sync(1))},e.prototype.set_duration=function(e){return this.touch(),!this.authorized("ninja")||isNaN(e)||0>=e?void 0:(this.room.answer_duration=e,this.room.set_speed(this.room.rate),this.room.sync(1))},e.prototype.set_prompt_duration=function(e){return this.touch(),!this.authorized("ninja")||isNaN(e)||0>=e?void 0:(this.room.prompt_duration=e,this.room.sync(1))},e.prototype.set_attempt_duration=function(e){return this.touch(),!this.authorized("ninja")||isNaN(e)||0>=e?void 0:(this.room.attempt_duration=e,this.room.sync(1))},e.prototype.set_interrupts=function(e){return this.touch(),this.authorized("ninja")?(e?this.verb("enabled interrupts"):this.verb("disabled interrupts"),this.room.interrupts=!!e,this.room.sync(1)):void 0},e.prototype.set_semi=function(e){return this.touch(),this.authorized("ninja")?(e?this.verb("enabled semi-transparent readouts"):this.verb("disabled semi-transparent readouts"),this.room.semi=!!e,this.room.sync(1)):void 0},e.prototype.set_type=function(e){var t=this;return this.touch(),this.authorized("ninja")?"string"!=typeof e?this.notify("error `"+state+"` is not string"):e?(this.room.type=e,this.room.category="",this.room.difficulty="",this.room.sync(4),this.room.get_size(function(o){return t.verb("changed the question type to "+e+" ("+o+" questions)")})):void 0:void 0},e.prototype.set_escalate=function(e){return this.touch(),this.authorized("ninja")?"number"!=typeof e?this.notify("error `"+e+"` is not number"):(this.room.escalate=e,this.room.sync(2)):void 0},e.prototype.set_mute=function(e){return this.touch(),this.authorized("ninja")?"number"!=typeof e?this.notify("error `"+e+"` is not number"):(this.room.mute=e,this.room.sync(1)):void 0},e.prototype.set_topic=function(e){return this.touch(),this.authorized("ninja")?"string"!=typeof e?this.notify("error `"+state+"` is not string"):(this.room.topic=e,this.room.sync(4)):void 0},e.prototype.pref=function(e,t){return this.touch(),"string"==typeof e&&"toString"!==e&&"toLocaleString"!==e&&"valueOf"!==e&&"hasOwnProperty"!==e&&"isPrototypeOf"!==e&&"propertyIsEnumerable"!==e&&"constructor"!==e?"_"!==e[0]?(this.prefs[e]=t,this.sync()):void 0:void 0},e.prototype.set_team=function(e){return this.touch(),e?this.verb("switched to team "+e):e!==this.name&&this.verb("is playing as an individual"),this.team=e,this.sync(!0)},e.prototype.set_idle=function(e){return this.idle=!!e},e.prototype.set_lock=function(e){return this.lock=!!e,this.touch(),this.sync(!0)},e.prototype.set_name=function(e){return this.touch(),(e+"").trim().length>0?(this.name=e.trim().slice(0,140).replace(/\u202e|\u2606|\u2605|\u269d/g,""),this.sync(!0)):void 0},e.prototype.report_question=function(){return this.verb("QuizPlayer::report_question({id, tags}) not implemented")},e.prototype.tag_question=function(){return this.verb("QuizPlayer::tag_question({id, tags}) not implemented")},e.prototype.change_bold=function(){return this.verb("QuizPlayer::change_bold({id, answer}) not implemented")},e.prototype.report_answer=function(){return this.verb("QuizPlayer::report_answer(data) not implemented")
},e.prototype.check_public=function(){return this.verb("QuizPlayer::check_public() not implemented")},e.prototype._apotheify=function(){return this.moderator?void 0:(this.verb("is now an administrator of this room"),this.admin_name=this.name,this.moderator=!0,this.room.sync(2))},e.prototype.cincinnatus=function(){return this.moderator?(this.verb("is no longer an administrator of this room"),this.moderator=!1,this.admin_name="",this.room.sync(2)):void 0},e.prototype.serialize=function(){var e,t,o,n;o={},t=["sockets","room"];for(e in this)p.call(t,e)<0&&"function"!=(n=typeof this[e])&&"_"!==e[0]&&(o[e]=this[e]);return o},e.prototype.deserialize=function(e){var t,o,n,i;o=["tribunal","elect"],i=[];for(t in e)n=e[t],"_"!==t[0]&&p.call(o,t)<0&&i.push(this[t]=n);return i},e.prototype.update=function(){return 1},e.prototype.sync=function(e){return null==e&&(e=!1),e&&"_"!==this.id[0]?this.room.emit("sync",this.room.sync(this)):this.emit("sync",this.room.sync(this))},e}(),"undefined"!=typeof exports&&null!==exports&&(exports.QuizPlayer=d);var m,f,y,g,p=[].indexOf||function(e){for(var t=0,o=this.length;o>t;t++)if(t in this&&this[t]===e)return t;return-1};g={category:"$0x40000",difficulty:"segmentation fault",num:"NaN",tournament:"Guru Meditation Cup",question:"This type of event occurs when the queried database returns an invalid question and is frequently indicative of a set of constraints which yields a null set. Certain manifestations of this kind of event lead to significant monetary loss and often result in large public relations campaigns to recover from the damaged brand valuation. This type of event is most common with computer software and hardware, and one way to diagnose this type of event when it happens on the bootstrapping phase of a computer operating system is by looking for the POST information. Kernel varieties of this event which are unrecoverable are referred to as namesake panics in the BSD/Mach hybrid microkernel which powers Mac OS X. The infamous Disk Operating System variety of this type of event is known for its primary color backdrop and continues to plague many of the contemporary descendents of DOS with code names such as Whistler, Longhorn and Chidori. For 10 points, name this event which happened right now.",answer:"error",year:1970,round:"0x080483ba"},y={category:"Mission Accomplished",difficulty:"null",num:"undefined",tournament:"magic smoke",question:"This question has not yet been written.",answer:"failure",year:2003,round:"1"},f={"Fine Arts":2,Literature:4,History:3,Science:3,Trash:1,Geography:1,Mythology:1,Philosophy:1,Religion:1,"Social Science":1},m=function(){function e(e){null==e&&(e="temporary"),this.name=e,this.type="qb",this.answer_duration=5e3,this.attempt_duration=8e3,this.prompt_duration=1e4,this.time_offset=0,this.sync_offset=0,this.start_offset=0,this.seen=0,this.end_time=0,this.begin_time=0,this.question="",this.answer="",this.info={},this.qid=null,this.timing=[],this.cumulative=[],this.rate=60,this.__timeout={},this.distribution=f,this.freeze(),this.users={},this.difficulty="",this.category="",this.max_buzz=null,this.attempt=null,this.no_skip=!1,this.show_bonus=!1,this.interrupts=!0,this.semi=!1,this.no_pause=!1,this.created=this.serverTime(),this.acl={baseline:100,positive:110,fifty:120,unlocked:200,elected:230,moderator:300,admin:310,ninja:400},this.mute=this.acl.baseline,this.escalate=this.acl.unlocked}return e.prototype.log=function(e){return this.emit("log",{verb:e})},e.prototype.locked=function(){var e,t,o,n,i,a;if(this.escalate&&this.escalate>this.acl.unlocked)return!0;t=0,o=0,a=this.users;for(e in a)i=a[e],i.active()&&i.active()&&(t++,i.lock&&o++);return n=Math.floor(t/2+1),2>=t?!1:o>=n?!0:!1},e.prototype.admin_online=function(){var e,t,o;o=this.users;for(e in o)if(t=o[e],t.active()&&t.authorized("moderator"))return!0;return!1},e.prototype.active_count=function(){var e,t,o,n;e=0,n=this.users;for(t in n)o=n[t],o.active()&&e++;return e},e.prototype.get_parameters=function(e,t,o){return this.emit("log",{verb:"NOT IMPLEMENTED (async get params)"}),o(["HS","MS"],["Science","Trash"])},e.prototype.count_questions=function(){return this.log("NOT IMPLEMENTED (question counting)")},e.prototype.get_size=function(e,t,o,n){return null==t&&(t=this.type),null==o&&(o=this.difficulty),null==n&&(n=this.category),this.count_questions(t,o,"custom"===n?this.distribution:n,function(t){return e(t)})},e.prototype.get_question=function(e){var t=this;return setTimeout(function(){return"__error_bonus"===t.next_id?e(y):e(g)},10),this.log("NOT IMPLEMENTED (async get question)")},e.prototype.emit=function(){return console.log("room.emit(name, data) not implemented")},e.prototype.reset_distribution=function(){return this.distribution=f},e.prototype.time=function(){return this.time_freeze?this.time_freeze:this.offsetTime()},e.prototype.offsetTime=function(){return this.serverTime()-this.time_offset},e.prototype.serverTime=function(){return new Date-this.sync_offset},e.prototype.set_time=function(e){return this.time_offset=this.serverTime()-e},e.prototype.freeze=function(){return this.time_freeze=this.time()},e.prototype.unfreeze=function(){return this.time_freeze?(this.set_time(this.time_freeze),this.time_freeze=0):void 0},e.prototype.timeout=function(e,t){return this.clear_timeout(),this.__timeout=setTimeout(t,e)},e.prototype.clear_timeout=function(){return clearTimeout(this.__timeout)},e.prototype.check_timeout=function(){return this.attempt&&this.serverTime()>this.attempt.realTime+this.attempt.duration?(this.clear_timeout(),this.end_buzz(this.attempt.session)):void 0},e.prototype.new_question=function(){var e=this;return this.generating_question=this.serverTime(),this.get_question(function(t){var o,n,i,a,r,s,u;t&&t.question&&t.answer||(t=g),delete e.generating_question,e.generated_time=e.serverTime(),e.attempt=null,e.clear_timeout(),e.next_id=t.next||null,e.info={category:t.category,difficulty:t.difficulty,tournament:t.tournament,num:t.num,year:t.year,tags:t.tags,round:t.round},e.question=t.question.replace(/FTP/g,"For 10 points").replace(/^\[.*?\]/,"").replace(/\n/g," ").replace(/\s+/g," "),e.answer=t.answer.replace(/\<\w\w\>/g,"").replace(/\[\w\w\]/g,""),e.qid=(null!=t?null!=(s=t._id)?s.toString():void 0:void 0)||(null!=t?t.qid:void 0)||(null!=t?t.id:void 0)||"question_id",e.begin_time=e.time()+e.start_offset,i="undefined"!=typeof go&&null!==go?go:require("./syllable").syllables,e.timing=function(){var e,t,o,n;for(o=this.question.split(" "),n=[],e=0,t=o.length;t>e;e++)r=o[e],n.push((+i(r)||0)+1);return n}.call(e),e.set_speed(e.rate),o=e.question.indexOf("*")>5,e.seen++,u=e.users;for(n in u)a=u[n],a.times_buzzed=0,a.active()&&(a.seen++,o&&a.earlyseen++),a.history.push(a.score()),a.history=a.history.slice(-30);return e.journal(),e.sync(3)})},e.prototype.set_speed=function(e){var t,o,n,i,a,r,s;if(e)return t=function(e,t){var o,n,i,a,r,s;for(n=0,r=[5].concat(e).slice(0,-1),s=[],i=0,a=r.length;a>i;i++)o=r[i],s.push(n+=Math.round(o*t));return s},r=this.time(),this.cumulative=t(this.timing,this.rate),i=r-this.begin_time,n=this.cumulative[this.cumulative.length-1],o=i/n,s=0,o>1&&(s=i-n,o=1),this.rate=e,this.cumulative=t(this.timing,this.rate),a=this.cumulative[this.cumulative.length-1],this.begin_time=Math.round(r-a*o-s),this.end_time=Math.round(this.begin_time+a+this.answer_duration),isNaN(this.begin_time)&&(this.begin_time=0),isNaN(this.end_time)?this.end_time=0:void 0},e.prototype.finish=function(){return this.emit("finish_question",this.time()),this.set_time(this.end_time)},e.prototype.next=function(){if(!(this.attempt||this.time()<=this.end_time)){if(this.generating_question&&this.serverTime()-this.generating_question>2e3)return delete this.generating_question,void 0;if(!this.generating_question)return this.unfreeze(),this.new_question()}},e.prototype.check_answer=function(){return Math.random()>.8?"prompt":Math.random()>.3},e.prototype.end_buzz=function(e){var t,o,n,i,a,r,s,u,l,h,c,d,p,m=this;if((null!=(h=this.attempt)?h.session:void 0)===e){if(l=this.users[null!=(c=this.attempt)?c.user:void 0],!this.attempt||!l)return this.attempt=null,this.sync(),void 0;if(this.attempt.prompt?(this.attempt.done=!0,this.attempt.correct=this.check_answer(this.attempt.text,this.answer,this.question),"prompt"===this.attempt.correct&&(this.attempt.correct=!1),this.sync()):(this.clear_timeout(),this.attempt.done=!0,this.attempt.correct=this.check_answer(this.attempt.text,this.answer,this.question),o=!1,"prompt"===this.attempt.correct&&(o=!0,this.attempt.correct=!1),o===!0&&(this.attempt.correct="prompt",this.sync(),this.attempt.prompt=!0,this.attempt.done=!1,this.attempt.realTime=this.serverTime(),this.attempt.start=this.time(),this.attempt.text=this.attempt.text.trim()+" ",this.attempt.duration=this.prompt_duration,this.timeout(this.attempt.duration,function(){return m.end_buzz(e)})),this.sync()),this.attempt.done){if(this.unfreeze(),this.attempt.correct){l.streak++,l.streak_record=Math.max(l.streak,l.streak_record),d=this.users;for(n in d)u=d[n],n!==this.attempt.user&&(u.streak=0);l.negstreak=0,l.correct++,this.attempt.early&&l.early++,this.finish()}else{l.streak=0,l.negstreak++,l.negstreak_record=Math.max(l.negstreak,l.negstreak_record),this.attempt.interrupt&&l.interrupts++,t=0,i=0,r={},p=this.users;for(n in p)u=p[n],"_"!==n[0]&&u.active()&&(r[u.team||n]=r[u.team||n]||0,r[u.team||n]+=u.times_buzzed);for(a in r)s=r[a],s>=this.max_buzz&&this.max_buzz&&t++,i++;this.max_buzz&&t>=i&&this.finish()}return this.journal(),this.attempt=null,this.sync(2)}}},e.prototype.buzz=function(e,t){var o,n,i,a,r,s,u=this;if(r=0,!(e in this.users))return!1;s=this.users;for(n in s)i=s[n],(i.team||n)===(this.users[e].team||e)&&(r+=i.times_buzzed);if(this.max_buzz&&this.users[e].times_buzzed>=this.max_buzz)t&&t("THE BUZZES ARE TOO DAMN HIGH"),this.attempt||this.emit("log",{user:e,verb:"has already buzzed"});else if(this.max_buzz&&r>=this.max_buzz)t&&t("THE BUZZES ARE TOO DAMN HIGH"),this.emit("log",{user:e,verb:"is in a team which has already buzzed"});else if(!this.interrupts&&this.time()<=this.end_time-this.answer_duration)this.emit("log",{user:e,verb:"attempted an illegal interrupt"}),t&&t("THE GAME");else{if(!this.attempt&&this.time()<=this.end_time)return t&&t("http://www.whosawesome.com/"),a=Math.random().toString(36).slice(2),o=this.question.replace(/[^ \*]/g,"").indexOf("*"),this.attempt={user:e,realTime:this.serverTime(),start:this.time(),duration:this.attempt_duration,session:a,text:"",early:-1!==o&&this.time()<this.begin_time+this.cumulative[o],interrupt:this.time()<this.end_time-this.answer_duration,done:!1},this.users[e].times_buzzed++,this.users[e].guesses++,this.freeze(),this.sync(2),this.timeout(this.attempt.duration,function(){return u.end_buzz(a)}),!0;this.attempt?(this.emit("log",{user:e,verb:"lost the buzzer race"}),t&&t("THE GAME")):(this.emit("log",{user:e,verb:"attempted an invalid buzz"}),t&&t("THE GAME"))}return!1},e.prototype.guess=function(e,t){var o;return(null!=(o=this.attempt)?o.user:void 0)===e?(this.attempt.text=t.text,t.done?this.end_buzz(this.attempt.session):this.sync(-1)):void 0},e.prototype.sync=function(e){var t,o,n,i,a,r,s,u,l,h,c,d,m=this;for(null==e&&(e=0),n={real_time:this.serverTime()},s=["time_offset","time_freeze","attempt"],u=0,l=s.length;l>u;u++)t=s[u],n[t]=this[t];if(o=["question","answer","generated_time","timing","info","cumulative","users","distribution","sync_offset","generating_question","topic","acl"],r=["sockets","room"],e.id){a={};for(t in e)p.call(r,t)<0&&"function"!=(h=typeof e[t])&&"_"!==t[0]&&(a[t]=e[t]);return a.online_state=e.online(),n.users=[a],n}if(e>=1)for(t in this)"function"!=typeof this[t]&&p.call(o,t)<0&&"_"!==t[0]&&(n[t]=this[t]);if(e>=2&&(n.users=function(){var e,o;o=[];for(i in this.users)if("_"!==i[0]){a={};for(t in this.users[i])p.call(r,t)<0&&"function"!=(e=typeof this.users[i][t])&&"_"!==t[0]&&(a[t]=this.users[i][t]);a.online_state=this.users[i].online(),o.push(a)}return o}.call(this)),e>=3&&(n.question=this.question,n.answer=this.answer,n.timing=this.timing,n.info=this.info,n.generated_time=this.generated_time),e>=4)return"topic"in this&&(n.topic=this.topic),n.distribution=this.distribution,this.get_parameters(this.type,this.difficulty,function(e,t){return n.difficulties=e,n.categories=t,m.emit("sync",n)}),this.journal();if(0>e){c=this.users,d=[];for(i in c)a=c[i],a.muwave||d.push(a.emit("sync",n));return d}return this.emit("sync",n)},e.prototype.journal=function(){return 0},e.prototype.delete_user=function(e){return this.users[e]?(this.emit("delete_user",e),this.users[e]=null,delete this.users[e]):!1},e.prototype.serialize=function(){var e,t,o,n,i,a;o={},t=["users","attempt","generating_question","acl"];for(e in this)p.call(t,e)<0&&"function"!=(a=typeof this[e])&&"_"!==e[0]&&(o[e]=this[e]);return o.users=function(){var e,t;e=this.users,t=[];for(n in e)i=e[n],t.push(i.serialize());return t}.call(this),o},e}(),"undefined"!=typeof exports&&null!==exports&&(exports.QuizRoom=m);var b,w,v,k,_,E,C,x,A,T,D,O,S,z,I,j,p=[].indexOf||function(e){for(var t=0,o=this.length;o>t;t++)if(t in this&&this[t]===e)return t;return-1};x=function(e,t,o){var n;return null==o&&(o=5e3),n=$("<div>").addClass("alert").hide(),n.append($("<button>",{"data-dismiss":"alert",type:"button"}).html("&times;").addClass("close")),n.append($("<strong>").text(e)),n.append(" "),n.append(t),setTimeout(function(){return n.slideDown()},10),setTimeout(function(){return n.slideUp().queue(function(){return $(this).dequeue(),$(this).remove()})},o),n},b=function(e,t){var o,n;return null==t&&(t="undefined"!=typeof sync&&null!==sync?sync.name:void 0),$(".bundle .ruling").tooltip("destroy"),n=$(".room-"+(t||"").replace(/[^a-z0-9]/g,"")),0===n.length&&(n=$("#history .bundle.active")),o=n.eq(0).find(".annotations"),0===o.length&&(o=$("#history .annotations").eq(0)),e.prependTo(o),e.hasClass("annoying")&&Wt.prefs.distraction||e.css("display","none").slideDown(),e},w=function(e){return $(".bundle .ruling").tooltip("destroy"),0!==$("#history .bundle.active .sticky").length?e.css("display","none").prependTo($("#history .bundle.active .sticky")):e.css("display","none").prependTo($("#history .sticky:first")),e.slideDown(),e},I=function(e,t){var o,n,i,a,r;return a="undefined"!=typeof Vt&&null!==Vt?Vt.users[e]:void 0,i=$(document.createElement("span")).data("id",e),"__"===e.slice(0,2)?i.text(e.slice(2).replace(/_/g," ")):i.text((null!=a?a.name:void 0)||"[name missing]"),n=function(e){return i.prepend("<i class='icon-"+e+" user-prefix'></i>")},"__"===e.slice(0,2)?/ninja/.test(e)?n("magic"):n("bullhorn"):(null!=a?a.authorized("moderator"):void 0)?n("star-empty"):(null!=a?null!=(r=a.prefs)?r.distraction:void 0:void 0)?n("eye-close"):(null!=a?a.auth:void 0)&&i.addClass("auth"),(null!=a?a._suffix:void 0)&&(i.append(" "),i.append($('<span style="color: rgb(150, 150, 150)">').text(a._suffix))),o="userhash-"+encodeURIComponent(i.attr("class")+i.html()).replace(/[^a-z0-9]/g,""),i.addClass("username user-"+e),t&&$(".user-"+e+":not(."+o+")").replaceWith(function(){return i.clone()}),i},S=function(e){var t,o,n,i;return e||($(".tooltip").remove(),$(".banham").each(function(){return S($(this))})),e&&(o=e.hasClass("full"),n=e.data("uid"),"_"!==n[0]&&qt()&&(e.html(""),Vt.users[n]))?(t="",n===Wt.id?(t="identity",e.append($("<span>",{title:"This post can be used against you",rel:"tooltip"}).addClass("pull-right banhammer").append($("<i>").addClass("icon-legal")))):(Wt.reprimand_embargo<Vt.serverTime()||Wt.authorized("elected"))&&(t="reprimand"),6e5>(i=Date.now()-Vt.users[n].__reprimanded)&&i>1e4&&Wt.tribunal_embargo<Vt.serverTime()&&!Vt.admin_online()&&(t="tribunal"),o||Wt.authorized("moderator")||(Vt.users[n].banned>Vt.serverTime()?(e.append($("<span>").addClass("pull-right banhammer").css("color","#c83025").append($("<i>").addClass("icon-ban-circle"))),t=""):""===t&&e.append($("<span>").addClass("pull-right banhammer").append($("<i>").addClass("icon-legal")))),("reprimand"===t||o)&&e.append($("<a>",{href:"#",title:"Reprimand this user",rel:"tooltip","data-id":n}).addClass("label label-info pull-right banhammer reprimand").append($("<i>").addClass("icon-thumbs-down"))),("tribunal"===t||o)&&e.append($("<a>",{href:"#",title:"Initiate ban tribunal for this user",rel:"tooltip","data-id":n}).addClass("label label-warning pull-right banhammer make-tribunal").append($("<i>").addClass("icon-legal"))),o||Wt.authorized("moderator")?e.append($("<a>",{href:"#",title:"Instantly ban this user for 10 minutes",rel:"tooltip","data-id":n}).addClass("label label-important pull-right banhammer instaban").append($("<i>").addClass("icon-ban-circle"))):void 0):void 0},v=function(e,t){var o;return null==t&&(t=!1),o=$("<span>").addClass("banham banham-"+e).attr("data-uid",e),"boolean"==typeof t&&t===!0&&o.addClass("full"),"string"==typeof t&&t&&o.attr("data-reason",t),S(o),o},A=function(e){var t,o,n,i,a,r,s,u,l,h,c,d,p,m,f,y,g,b,w,k,_,E;return g=e.session,b=e.text,w=e.user,r=e.done,i=e.correct,l=e.interrupt,s=e.early,p=e.prompt,u=""+w+"-"+g+"-"+(p?"prompt":"guess"),$("#"+u).length>0?h=$("#"+u):(h=$("<p>").attr("id",u).addClass("guess"),p?(m=$("<a>").addClass("label prompt label-info").text("Prompt"),h.append(" "),h.append(m)):(c=$("<span>").addClass("label").text("Buzz"),s||(l?c.addClass("label-important"):c.addClass("label-info")),h.append(c)),h.append(" "),h.append(I(w)),h.append(document.createTextNode(" ")),$("<span>").addClass("comment").appendTo(h),y=$("<a>").addClass("label ruling").hide().attr("href","#").attr("title","Click to Report").data("placement","right"),h.append(" "),h.append(y),t=$("#history .bundle:first .annotations"),0===t.length&&(t=$("#history .annotations:first")),h.css("display","none").prependTo(t),h.slideDown()),r?""===b?h.find(".comment").html("<em>(blank)</em>"):h.find(".comment").text(b):Wt.muwave?h.find(".comment").html('<em style="color:gray">(typing...)</em>'):h.find(".comment").text(b),r&&(y=h.find(".ruling").css("display","none"),a="","prompt"===i?(y.addClass("label-info").text("Prompt"),a="prompt"):i?(a="correct",y.addClass("label-success").text("Correct"),(null!=(k=Vt.users[w])?k.streak:void 0)>3&&Vt.active_count()>2&&h.prepend(v(w)),w===Wt.id&&(d=Wt.score(),n=function(){var e,t,o;return o=Wt.score(),o===d?(setTimeout(n,100),void 0):(e=1e3,t=Math.round(d/e)*e,0!==t?t>0&&t>d&&o>=t?($("body").fireworks(10*(t/e)),x("Congratulations","You have over "+t+" points! Here's some fireworks.").addClass("alert-success").insertAfter(y.parents(".bundle").find(".annotations"))):void 0:void 0)},n())):(a="wrong",y.addClass("label-warning").text("Wrong"),(((null!=(_=Vt.users[w])?_.negstreak:void 0)>3||(null!=(E=Vt.users[w])?E.score():void 0)<0)&&Vt.active_count()>2||("function"==typeof ho?ho(b):void 0))&&h.prepend(v(w,"bad language")),w===Wt.id&&Wt.id in Vt.users&&(d=Wt.score(),-100>d&&x("you suck","like seriously you really really suck. you are a turd.").addClass("alert-info").insertAfter(y.parents(".bundle").find(".annotations")))),y.fadeIn().css("display","inline"),o=Vt.answer,f=Vt.qid,y.click(function(){return Wt.report_answer({guess:b,answer:o,ruling:a,qid:f}),x("Reported Answer","You have successfully told me that my algorithm sucks. Thanks, I'll fix it eventually. ").addClass("alert-success").insertAfter(y.parents(".bundle").find(".annotations")),!1}),"guess"===ut&&$t("")),h},E=function(e){var o,n,i,a,r,s,u,l,h,c,d,m,f,y,g,w,k,_,E,C,x,A,T;h=e.session,f=e.text,k=e.user,i=e.done,y=e.time,h||(h="auto-"+Math.random().toString(36).slice(3)),s=k+"-"+h,$("#"+s).length>0?u=$("#"+s):(u=$("<p>").attr("id",s).addClass("chat annoying"),u.append($("<span>").addClass("author").append(I(k).attr("title",t(y)))),u.append($("<span>").addClass("timecolon").append(" ("+t(y)+"): ")),u.append(document.createTextNode(" ")),$("<span>").addClass("comment").appendTo(u),b(u,null!=(E=Vt.users[k])?null!=(C=E.room)?C.name:void 0:void 0)),_=[],w=/\b((?:https?:\/\/|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?«»“”‘’]))/gi,a=f.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/(^|\s+)(\/[a-z0-9\-]+)(\s+|$)/g,function(e,t,o,n){return t+("<a href='"+o+"'>"+o+"</a>")+n}).replace(w,function(e){var t;return t=e,/:\//.test(e)||(t="http://"+e),/\.(jpe?g|gif|png)$/i.test(e)?"<a href='"+t+"' class='show_image' target='_blank'>"+e+"</a> (click to show) 				<div style='display:none;overflow:hidden' class='chat_image'>					<img src='"+t+"' alt='"+e+"'>				</div>":"<a href='"+t+"' target='_blank'>"+e+"</a>"}).replace(/!@([a-z0-9]+)/g,function(e,t){return _.push(t),I(t).wrap("<span>").parent().addClass("recipient").clone().wrap("<div>").parent().html()}),m={},x=Vt.users;for(r in x)g=x[r],m[g.team||"individuals"]=1;d=[];for(c in m)a=a.replace(new RegExp("\\*@("+RegExp.quote(c)+")","g"),function(e,t){return d.push(t),$("<span>").text(t).addClass("team-recipient").wrap("<div>").parent().html()});return i?(u.removeClass("buffer"),A=Wt.team||"individuals",l=p.call(d,A)>=0||(T=Wt.id,p.call(_,T)>=0)||"_"===Wt.id[0]||k===Wt.id,o="@"!==f[0]||l,l&&u.removeClass("annoying"),""!==f&&o?("@"===f.slice(0,1)&&(d.length>0?u.prepend('<i class="icon-group"></i> '):u.prepend('<i class="icon-user"></i> ')),n="function"==typeof ho?ho(f):void 0,n&&"lobby"===Vt.name&&(a=a.replace(/nigger/gi,"******")),u.find(".comment").html(a),k in Vt.users&&(n?u.prepend(v(k,"bad language")):f.length>70&&u.prepend(v(k,"spamming")))):(u.find(".comment").html("<em>(no message)</em>"),u.slideUp("normal",function(){return u.remove()}))):$(".livechat")[0].checked&&"(typing)"!==f?(u.removeClass("buffer"),u.find(".comment").html(a)):(u.addClass("buffer"),u.find(".comment").text(" is typing...")),u.toggleClass("typing",!i),u.data("last_update",y)},z=function(e){var t,o,n,i;return n=e.time,i=e.trigger,o=e.reason,setTimeout(function(){return $(".bundle .ruling").tooltip("destroy")},100),t=$("<p>").addClass("log"),t.prepend('<i class="icon-thumbs-down"></i> '),"_"!==(null!=i?i[0]:void 0)&&Vt.users[i]?(t.append(I(i)),t.append(" has issued you a warning for "),o?t.append(o):t.append("your behavior"),t.append(" ")):(t.append("your behavior has been reprimanded"),o&&(t.append(" for "),t.append(o))),b(t)},k=function(e){var o,n,i,a,r;return r=e.user,i=e.qid,a=e.time,o=e.answer,setTimeout(function(){return $(".bundle .ruling").tooltip("destroy")},100),n=$("<p>").addClass("log"),n.append(I(r).attr("title",t(a))),n.append(" changed the answer line to "),n.append(o.replace(/\{/g,"<strong>").replace(/\}/g,"</strong>")),$(".bundle.qid-"+i+" .annotations").append(n.hide()),n.slideDown()},j=function(e){var o,n,i,a,r,s,u,l;return s=e.user,u=e.verb,r=e.time,i=e.notify,setTimeout(function(){return $(".bundle .ruling").tooltip("destroy")},100),l="verb-"+s+"-"+u.replace(/[^a-z]/gi," ").split(" ").slice(0,2).join("-"),n=$("<p>").addClass("log annoying"),n.addClass(l),s?(s!==Wt.id||/skip|pause|resume/.test(u)||n.removeClass("annoying"),i&&n.prepend('<i class="icon-user"></i> '),n.append(I(s).attr("title",t(r))),n.append(" "+u.replace(/!@([a-z0-9]+)/g,function(e,t){return I(t).clone().wrap("<div>").parent().html()}))):n.append(u),(/paused the/.test(u)||/skipped/.test(u)||/category/.test(u)||/difficulty/.test(u)||/ban tribunal/.test(u)||"_"===Wt.id[0])&&n.prepend(v(s)),o=$(".bundle.active .verb-"+s+"-left-the"),"joined"===u.split(" ")[0]&&o.length>0?(o.slideUp(),j({user:s,verb:"reloaded the page",time:r}),void 0):(a=$(".bundle.active ."+l),a.length>0?(n.data("count",a.data("count")+1),n.hide(),n.prepend($('<span style="margin-right:5px">').addClass("badge").text(n.data("count")+"x")),a.slideUp("normal",function(){return $(this).remove()}),b(n)):(n.data("count",1),b(n)))},T=function(e){var t;return t=$("<pre>"),t.append(e),$("#history").prepend(t.hide().slideDown())},O=function(){return b($('<iframe width="420" height="315" src="http://www.youtube.com/embed/6bMLrA_0O5I?rel=0" frameborder="0" allowfullscreen></iframe>'))},D=function(){var e,t;return t=$("<span>").html('<b>Like Protobowl?</b> Consider liking us on <a href="https://www.facebook.com/protobowl">Facebook</a>. '),e=$('<iframe src="https://www.facebook.com/plugins/like.php?href=https%3A%2F%2Fwww.facebook.com%2Fprotobowl&amp;send=false&amp;layout=button_count&amp;width=450&amp;show_faces=false&amp;font&amp;colorscheme=light&amp;action=like&amp;height=21&amp;appId=111694105666039" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:150px; height:21px;" allowTransparency="true"></iframe>'),$("body").append(e.css("vertical-align","bottom").hide()),setTimeout(function(){return b($("<p>").append(t).append(e.show()))},1e3)},_=function(e){var t,o,n,i,a,r,s,u,l,h,c,d,m,f;return n=e.id,u=e.tribunal,l=u.votes,s=u.time,c=u.witnesses,t=u.against,i=u.initiator,d=Wt.id,p.call(c,d)<0&&"_"!==Wt.id[0]?void 0:(h=Math.floor((c.length-1)/2+1)-l.length+t.length,a=$("<div>").addClass("alert").addClass("troll-"+n),i&&"_"===i[0]&&(i=""),n===Wt.id?(i?(a.append(I(i)),a.append(" has complained about your behavior and created a ban tribunal. ")):a.text("Protobowl has detected abnormally high activity from your computer.\n"),a.append(" <strong> Currently "+l.length+" of "+(c.length-1)+" users have voted</strong> ("+h+" more votes are needed to ban you from this room).")):(a.append($("<strong>").append("Is ").append(I(n)).append(" trolling? ")),i?(a.append(I(i)),a.append(" has created a ban tribunal for "),a.append(I(n)),a.append(". ")):(a.append("Protobowl has detected abnormally high rates of activity from "),a.append(I(n)),a.append(". ")),a.append("<br>"),o=$("<button>").addClass("btn btn-small").text("Ban this user"),a.append(o),a.append(" "),r=$("<button>").addClass("btn btn-small").text("Don't ban"),a.append(r),a.append(" <strong> Currently "+l.length+" of "+(c.length-1)+" users have voted</strong> ("+h+" more votes needed)"),o.click(function(){return Wt.vote_tribunal({user:n,position:"ban"})}),r.click(function(){return Wt.vote_tribunal({user:n,position:"free"})}),o.add(r).disable((m=Wt.id,p.call(l,m)>=0||(f=Wt.id,p.call(t,f)>=0)))),$(".troll-"+n).length>0&&$(".troll-"+n).parents(".active").length>0?$(".troll-"+n).replaceWith(a):($(".troll-"+n).slideUp("normal",function(){return $(this).remove()}),w(a)))},C=function(e){var t,o,n,i,a,r,s,u,l,h,c,d,m,f,y,g,w,v,k;if(i=e.id,o=e.elect,s=$("<div>").addClass("alert alert-info").addClass("elect-"+i),o.term){if(m=o.witnesses,a=o.impeach,y=Wt.id,p.call(m,y)<0&&"_"!==Wt.id[0])return;if(d=Math.floor((m.length-1)/2+1)-a.length,Vt.serverTime()>o.term)return $(".elect-"+i).slideUp("normal",function(){return $(this).remove()}),void 0;i===Wt.id?(h=function(){var e;return e=Math.round(Math.max(0,Wt.elect.term-Vt.serverTime())/1e3),$(".term-timeout").text(e),e>0?setTimeout(h,1e3):void 0},s.html("You have access to the settings for <b>the next <span class='term-timeout'>60</span> seconds</b>. \n"),h(),n=$("<button>").addClass("btn btn-small").text("Done"),n.click(function(){return Wt.finish_term()}),s.append(n)):(r=$("<button>").addClass("btn btn-small").text("Impeach"),r.click(function(){return Wt.vote_election({user:i,position:"impeach"})}),s.append(r.disable((g=Wt.id,p.call(a,g)>=0))),s.append(" <strong> "+a.length+" of "+(m.length-1)+" users have voted to impeach </strong>"),s.append(I(i).css("font-weight","bold")),s.append(" ("+d+" more votes needed)"))}else{if(c=o.votes,l=o.time,m=o.witnesses,t=o.against,w=Wt.id,p.call(m,w)<0&&"_"!==Wt.id[0])return;d=Math.floor(m.length/2+1)-c.length+t.length,i===Wt.id?s.append(" <strong>"+c.length+" of "+m.length+" users have voted</strong> ("+d+" more votes are needed)"):(s.append($("<strong>").append("Is ").append(I(i)).append(" trustworthy? ")),s.append("Grant control over the room settings if you believe the motives of "),s.append(I(i)),s.append(" are pure. Elected terms are 1 minute. <br>"),f=$("<button>").addClass("btn btn-small").text("Grant access"),s.append(f),s.append(" "),u=$("<button>").addClass("btn btn-small").text("Deny"),s.append(u),s.append(" <strong> "+c.length+" of "+m.length+" users have voted</strong> ("+d+" more votes needed)"),f.click(function(){return Wt.vote_election({user:i,position:"elect"})}),u.click(function(){return Wt.vote_election({user:i,position:"deny"})}),f.add(u).disable((v=Wt.id,p.call(c,v)>=0||(k=Wt.id,p.call(t,k)>=0))))}return $(".elect-"+i).length>0?$(".elect-"+i).replaceWith(s):b(s)};var F,N,q,M,R,U,H,L,P,B,Y,W,G,K,Q,X,J,V,Z,et,tt,ot,nt,it,at,rt,st,p=[].indexOf||function(e){for(var t=0,o=this.length;o>t;t++)if(t in this&&this[t]===e)return t;return-1},r=[].slice;tt=function(){var e,t,o,n,i,a,r,s,u,l,h,c;if($(".custom-category").empty(),Vt.distribution){i=0,l=Vt.distribution;for(e in l)a=l[e],i+=a;for(h=Vt.categories,c=[],s=0,u=h.length;u>s;s++)e=h[s],t=$("<div>").addClass("category-item").appendTo(".custom-category").data("value",e),$("<span>").addClass("name").text(e).appendTo(t),n=$("<div>").addClass("btn-group pull-right dist-picker").appendTo(t),$("<button>").addClass("btn btn-small decrease disabled").append($("<i>").addClass("icon-minus")).appendTo(n),$("<button>").addClass("btn btn-small increase disabled").append($("<i>").addClass("icon-plus")).appendTo(n),$("<span>").addClass("percentage pull-right").css("color","gray").appendTo(t),r=$(t).data("value"),o=Vt.distribution[r]/i,$(t).find(".percentage").html(""+Math.round(100*o)+"% &nbsp;"),$(t).find(".increase").removeClass("disabled"),o>0&&i>1?$(t).find(".decrease").removeClass("disabled"):($(t).find(".decrease").addClass("disabled"),$(t).find(".name").css("font-weight","normal")),o>0?c.push($(t).find(".name").css("font-weight","bold")):c.push(void 0);return c}},$(".dist-picker .increase").live("click",function(){var e,t;if(Vt.distribution)return e=$(this).parents(".category-item"),t=clone_shallow(Vt.distribution),t[$(e).data("value")]++,Wt.set_distribution(t)}),$(".dist-picker .decrease").live("click",function(){var e,t,o,n,i,a;if(Vt.distribution){t=$(this).parents(".category-item"),n=0,a=Vt.distribution;for(e in a)i=a[e],n+=i;return o=clone_shallow(Vt.distribution),o[$(t).data("value")]>0&&n>1?(o[$(t).data("value")]--,Wt.set_distribution(o)):void 0}}),X=function(){var e,t,o,n,i,a,r,s;for($(".difficulties option").remove(),$(".difficulties")[0].options.add(new Option("Any","")),r=Vt.difficulties,o=0,i=r.length;i>o;o++)t=r[o],$(".difficulties")[0].options.add(new Option(t,t));for($(".categories option").remove(),$(".categories")[0].options.add(new Option("Everything","")),$(".categories")[0].options.add(new Option("Custom","custom")),s=Vt.categories,n=0,a=s.length;a>n;n++)e=s[n],$(".categories")[0].options.add(new Option(e,e));return tt(),Vt.topic?($(".topic .thumbnail").html(Vt.topic),$(".topic").slideDown()):$(".topic").slideUp()},Z=function(){var e,t,o;if("custom"===Vt.category?(tt(),$(".custom-category").slideDown()):$(".custom-category").slideUp(),$(".categories").val(Vt.category),$(".difficulties").val(Vt.difficulty),$(".multibuzz").prop("checked",!Vt.max_buzz),$(".allowskip").prop("checked",!Vt.no_skip),$(".allowpause").prop("checked",!Vt.no_pause),$(".adhd").prop("checked",!!Wt.prefs.distraction),$("body").toggleClass("distraction",!!Wt.prefs.distraction),$(".settings").is(":hidden")&&($(".settings").slideDown(),$(window).resize()),$(".bundle.active").toggleClass("semi",Vt.semi),Wt.id in Vt.users&&"prefs"in Vt.users[Wt.id]&&(!$(".timer-widget").data("hidden")!=!Wt.prefs.timer_hide&&(Wt.prefs.timer_hide?($(".timer-widget").data("hidden",!0),$(".timer, .progress").slideUp().queue(function(){return $(this).css("opacity","").dequeue(),$(".expand-timer").fadeIn()})):($(".timer-widget").data("hidden",!1),$(".expand-timer").fadeOut(),$(".timer, .progress").slideDown().animate({opacity:.7}).queue(function(){return $(this).css("opacity","").dequeue()}))),$(".livechat").prop("checked",!!Wt.prefs.typing),$(".sounds").prop("checked",!!Wt.prefs.sounds),$(".lock").prop("checked",!!Wt.lock),$(".teams").val(Wt.team),$(".microwave").toggle(!Wt.muwave),Wt.guesses>0?$(".reset-score").slideDown():$(".reset-score").slideUp(),Wt.authorized("moderator")&&!Wt.authorized("admin")?$(".relinquish-command").slideDown():$(".relinquish-command").slideUp(),e=function(){var e;
e=[];for(t in Vt.users)e.push(1);return e}().length,e>1?$(".set-team").slideDown():$(".set-team").slideUp()),Wt.id&&"_"===Wt.id[0]&&($("a.brand").prop("href","/stalkermode"),$("div.navbar-inner").css("background","rgb(224, 235, 225)"),$(".motto").text("omg did you know im a ninja?")),Vt.attempt&&A(Vt.attempt),o=Math.round(12e3/Vt.rate),(!$(".speed").data("last_update")||new Date-$(".speed").data("last_update")>1337)&&Math.abs($(".speed").val()-o)>1&&$(".speed").val(o),Vt.attempt&&Vt.attempt.user===Wt.id){if(Vt.attempt.prompt){if("prompt"!==ut)return $t("prompt"),$(".prompt_input").val(Vt.attempt.text).focus()}else if("guess"!==ut)return $t("guess")}else if("guess"===ut||"prompt"===ut)return $t("")},Y=0,J=function(){var e,t,o;if(!((!Vt.time_freeze||Vt.attempt)&&Vt.time()<Vt.end_time&&(requestAnimationFrame(J),new Date-Y<50)))return Y=+new Date,Vt.question?(0!==$(".start-page").length&&$(".start-page").slideUp("normal",function(){return $(this).remove()}),e=$("#history .bundle:first").data("info"),((null!=e?e.generated_time:void 0)!==("undefined"!=typeof Vt&&null!==Vt?Vt.generated_time:void 0)||("undefined"!=typeof Vt&&null!==Vt?Vt.question:void 0)!==(null!=e?e.question:void 0))&&(N(),Rt(Vt.qid,function(e){return un(e)}))):0===$(".start-page").length&&(t=$("<div>").addClass("start-page").hide().prependTo("#history"),o=$("<div>").addClass("well").appendTo(t),$("<button>").addClass("btn btn-success btn-large").text("Start the Question").appendTo(o).click(function(){return Wt.next()}),t.slideDown()),at(),V()},V=function(){var e,t,o,n,i,a,r,s,u,l,h,c;return Vt.end_time&&Vt.begin_time?$(".timer").removeClass("disabled"):$(".timer").addClass("disabled"),c=Math.max(Vt.begin_time,Vt.time()),qt()||("undefined"!=typeof eo&&null!==eo?eo.hide_disconnect:void 0)?$(".offline-badge").capQueue().fadeOut():$(".offline-badge").capQueue().fadeIn(),$(".chatbtn").disable(!Wt.authorized(Vt.mute)||Wt.prefs.distraction),Vt.time_freeze?($(".buzzbtn").disable(!0),Vt.attempt?($(".label.pause").hide(),$(".label.buzz").capQueue().fadeIn()):($(".label.pause").capQueue().fadeIn(),$(".label.buzz").hide(),$(".pausebtn").hasClass("btn-warning")&&($(".pausebtn .resume").show(),$(".pausebtn .pause").hide(),$(".pausebtn").addClass("btn-success").removeClass("btn-warning")))):($(".label.pause").capQueue().fadeOut(),$(".label.buzz").capQueue().fadeOut(),$(".pausebtn").hasClass("btn-success")&&($(".pausebtn .resume").hide(),$(".pausebtn .pause").show(),$(".pausebtn").addClass("btn-warning").removeClass("btn-success"))),c>=Vt.end_time&&!Vt.time_freeze?$(".label.finished").capQueue().fadeIn():$(".label.finished").capQueue().fadeOut(),c>=Vt.end_time?$(".nextbtn").is(":hidden")&&($(".nextbtn").show(),$(".skipbtn").hide()):$(".nextbtn").is(":hidden")||($(".nextbtn").hide(),$(".skipbtn").show()),$(".timer").toggleClass("buzz",!!Vt.attempt),$(".primary-bar").toggleClass("bar-warning",!(!Vt.time_freeze||Vt.attempt)),$(".primary-bar").toggleClass("bar-danger",!!Vt.attempt),$(".progress").toggleClass("active",!!Vt.attempt),Vt.attempt?(o=Vt.serverTime()-Vt.attempt.realTime,a=Vt.attempt.duration-o,s=o/Vt.attempt.duration,$(".pausebtn, .buzzbtn, .skipbtn, .nextbtn").disable(!0)):(a=Vt.end_time-c,o=c-Vt.begin_time,s=o/(Vt.end_time-Vt.begin_time),$(".skipbtn, .nextbtn").disable(!1),$(".pausebtn").disable(0>a||Vt.no_pause),Vt.time_freeze||(!Vt.interrupts&&c<Vt.end_time-Vt.answer_duration?$(".buzzbtn").disable(!0):$(".buzzbtn").disable(0>a||100>o)),0>a&&($(".bundle.active").addClass("revealed"),rt(),u=$(".bundle.active").find(".ruling"),u.data("shown_tooltip")||(u.data("shown_tooltip",!0),t=$(".bundle.active").find(".ruling").first().tooltip({trigger:"manual"}),t.tooltip("show")))),Vt.no_skip&&$(".skipbtn").disable(!0),$(".timer-widget").data("hidden")?void 0:(Vt.attempt||Vt.time_freeze?($(".progress .primary-bar").width(100*s+"%"),$(".progress .aux-bar").width("0%")):(n=100*(1-Vt.answer_duration/(Vt.end_time-Vt.begin_time)),$(".progress .primary-bar").width(Math.min(100*s,n)+"%"),$(".progress .aux-bar").width(Math.min(100-n,Math.max(0,100*s-n))+"%")),a=Math.max(0,a),h="",0>a&&(h="+"),l=Math.abs(a)/1e3,isNaN(l)?($(".timer .face").text("00:00"),$(".timer .fraction").text(".0")):(e=(l%1).toFixed(1).slice(1),$(".timer .fraction").text(e),i=l/60,r=function(e){var t;for(t=Math.floor(e).toString();t.length<2;)t="0"+t;return t},$(".timer .face").text(h+r(i)+":"+r(l%60))))},B=function(e){var t,o;return e?(o=0,o=e.members?jt(function(){var o,n,i,a;for(i=e.members,a=[],o=0,n=i.length;n>o;o++)t=i[o],a.push(B(t));return a}()):Wt.prefs.movingwindow?e.score()-[0].concat(e.history).slice(-Wt.prefs.movingwindow)[0]:e.score(),1335===o?1337:o):0},ot=function(){var e,t,o,n,i,a;o=0,t=0,a=Vt.users;for(e in a)i=a[e],i.active()&&i.active()&&(t++,i.lock&&o++);return n=Math.floor(t/2+1),2>=t||Vt.escalate>=Vt.acl.moderator?$(".lockvote").slideUp():($(".lockvote").slideDown(),n>o?$(".lockvote .electorate").text(""+(n-o)+" needed"):$(".lockvote .electorate").text(""+o+"/"+t+" votes")),$(".lockvote .status_icon").removeClass("icon-lock icon-unlock icon-flag"),$(".request-access button").disable(!!Wt.elect),$(".globalsettings").toggleClass("escalate",!(Vt.escalate>Vt.acl.unlocked)),Wt.authorized()?(Vt.locked()?$(".lockvote .status_icon").addClass("icon-flag"):$(".lockvote .status_icon").addClass("icon-unlock"),$(".globalsettings").removeClass("locked"),$(".globalsettings .checkbox, .globalsettings .expando").find("select, input").disable(!1)):($(".lockvote .status_icon").addClass("icon-lock"),$(".globalsettings").addClass("locked"),$(".globalsettings .checkbox, .globalsettings .expando").find("select, input").disable(!0))},et=function(){var e,t,o,n,i,a,r,s,u,l,h,c,d,m,f,y,g,b,w,v,k,E,x,A,T,D,O,S,z,j,N,F,M,U,H,L,P,Y,W,G,K,Q,X,J,V,Z,et,tt,nt,it;if(Vt.users){S={},O="",w={},Q=Vt.users;for(h in Q)N=Q[h],w[N.name]||(w[N.name]=[]),w[N.name].push(h);for(b in w)if(c=w[b],c.length>1)for(x=c.sort(function(e,t){return Vt.users[e].last_session-Vt.users[t].last_session}),v=U=0,X=x.length;X>=0?X>U:U>X;v=X>=0?++U:--U)Vt.users[x[v]]._suffix="#"+(v+1);else delete Vt.users[c[0]]._suffix;J=Vt.users;for(h in J)N=J[h],N.team&&("t-"+N.team in S||(S["t-"+N.team]=[]),S["t-"+N.team].push(N.id),O+=N.team+N.id),I(N.id,!0),N.tribunal?_(N):($(".troll-"+N.id).slideUp("normal",function(){return $(this).remove()}),N.elect?C(N):$(".elect-"+N.id).slideUp("normal",function(){return $(this).remove()}));if(ot(),$(".teams").data("teamhash")!==O){$(".teams").data("teamhash",O),$(".teams").empty(),$(".teams")[0].options.add(new Option("Individual",""));for(T in S)y=S[T],T=T.slice(2),$(".teams")[0].options.add(new Option(""+T+" ("+y.length+")",T));$(".teams")[0].options.add(new Option("Create Team","__create")),Wt.id in Vt.users&&$(".teams").val(Vt.users[Wt.id].team)}if(d=$(".leaderboard tbody"),u=function(e){var t;return t=e.created||e.members[0].created,B(e)+(Vt.serverTime()-t)/1e15},s=function(){var e,t;e=Vt.users,t=[];for(h in e)N=e[h],t.push(N);return t}(),F=s.length,D=0,$(".teams").val()||"__"===Wt.id.slice(0,2)){s=function(){var e;e=[];for(T in S)y=S[T],T=T.slice(2),o={room:Vt},D++,o.members=function(){var e,t,o;for(o=[],e=0,t=y.length;t>e;e++)f=y[e],o.push(Vt.users[f]);return o}(),o.interrupts=jt(function(){var e,t,n,i;for(n=o.members,i=[],e=0,t=n.length;t>e;e++)j=n[e],i.push(j.interrupts);return i}()),o.name=T,o.id="team-"+escape(T).toLowerCase().replace(/[^a-z0-9]/g,""),e.push(o);return e}(),V=Vt.users;for(h in V)N=V[h],N.team||s.push(N)}for(s=s.sort(function(e,t){return u(t)-u(e)}),k=1,m=null,M=H=0,Y=s.length;Y>H;M=++H)N=s[M],s[M-1]&&B(N)<B(s[M-1])&&k++,N.rank=k,N.position=M,!m&&(Z=Vt.users[Wt.id],p.call(N.members||[N],Z)>=0)&&(m=N);for(d.find(".refreshed").removeClass("refreshed"),a=function(e,t){var o,n,i,r,s,l,h,c,m,y,g,w,v;if(null==t&&(t=!1),e){if(i=$(".row-"+e.id),s=i.length>0?i.first().empty():$("<tr>").addClass("row-"+e.id),s.addClass("refreshed").data("entity",e).appendTo(d).click(function(){return 1}),n=$("<span>").addClass("badge pull-right").text(B(e)),y=Vt.users[Wt.id],p.call(e.members||[e],y)>=0)n.addClass("badge-info").prop("title","You");else{for(r=0,o=0,g=e.members||[e],l=0,c=g.length;c>l;l++)f=g[l],f.online()&&(f.active()?o++:r++);o>0?n.addClass("badge-success").prop("title","Online"):r>0&&n.addClass("badge-warning").prop("title","Idle")}if(t?(s.addClass("subordinate"),$("<td>").addClass("rank").appendTo(s)):$("<td>").addClass("rank").append(e.rank).appendTo(s),$("<td>").addClass("score").append(n).appendTo(s),b=$("<td>").appendTo(s),$("<td>").addClass("negs").text(e.interrupts).appendTo(s),e.members){for(b.append($("<span>").text(e.name).css("font-weight","bold")).append(" ("+e.members.length+")"),w=e.members.sort(function(e,t){return u(t)-u(e)}),v=[],h=0,m=w.length;m>h;h++)e=w[h],v.push(a(e,!0));return v}return b.append($("<span>").append(I(e.id)))}},t=3,e=2,r=null,E=0,z=t+2*e,l=L=0;t>=0?t>L:L>t;l=t>=0?++L:--L)l<s.length&&(a(s[l]),E++);if(s.length>t&&(r=$("<tr>").addClass("ellipsis refreshed").appendTo(d)),m&&m.position>=t+2*e&&!Wt.prefs.leaderboard){for(n=Math.min(s.length,m.position+e)-(m.position-e),l=P=t,et=t+(2*e-n);et>=t?et>P:P>et;l=et>=t?++P:--P)l<s.length&&(a(s[l]),E++);for(l=W=tt=m.position-e,nt=m.position+e;nt>=tt?nt>W:W>nt;l=nt>=tt?++W:--W)l>=0&&l<s.length&&(a(s[l]),E++)}else{for(l=G=t;z>=t?z>G:G>z;l=z>=t?++G:--G)l>=0&&l<s.length&&(a(s[l]),E++);if(Wt.prefs.leaderboard)for(l=K=z,it=s.length;it>=z?it>K:K>it;l=it>=z?++K:--K)a(s[l])}return d.find("tr:not(.refreshed)").remove(),r&&(A="(<b>"+(s.length-E)+"</b> hidden)",Wt.prefs.leaderboard&&(A="(hide <b>"+(s.length-E)+"</b>)"),g=$("<span>").css("position","relative").html(" <span class='badge badge-success'>"+Vt.active_count()+"</span> active <span class='badge'>"+F+"</span> users"),i=$("<td colspan=4>").appendTo(r).append($("<span>").html(A)).append(" ").append(g)),F>1&&(qt()||("undefined"!=typeof eo&&null!==eo?eo.hide_disconnect:void 0))?$(".leaderboard").is(":hidden")&&($(".leaderboard").slideDown(),$(".singleuser").slideUp()):Vt.users[Wt.id]&&($(".singleuser .stats").empty().append(R(Vt.users[Wt.id],!!$(".singleuser").data("full"))),$(".singleuser").is(":hidden")&&($(".leaderboard").slideUp(),$(".singleuser").slideDown())),q()}},W=0,q=function(){var e,t,o,n;if(qt()&&!Wt.muwave){e=0,n=Vt.users;for(t in n)o=n[t],o.online()&&Vt.serverTime()-o.last_action<6e5&&e++;if(1===e){if(Date.now()-W<6e4)return;return W=Date.now(),Wt.check_public("",function(e){var t,o,n,i;i=[];for(t in e)o=e[t],o>0&&t!==Vt.name&&i.push(t);return i.length>0?(n=function(){var o,n,a;for(a=[],o=0,n=i.length;n>o;o++)t=i[o],a.push(t.link("/"+t)+(" ("+e[t]+") "));return a}(),$(".foreveralone .roomlist").html(n.join(" or ")),$(".foreveralone").slideDown()):$(".foreveralone").slideUp()})}return $(".foreveralone").slideUp()}},R=function(e,t){return e.members?U(e,t):H(e,t)},H=function(t,o){var n,i,a,s,u;return u=$("<div>").addClass("pseudotable"),s=function(e,t){return $("<div>").addClass("pseudorow").appendTo(u).append($("<span>").addClass("left").text(e)).append($("<span>").addClass("right").append(t))},n=function(){var e;return e=1<=arguments.length?r.call(arguments,0):[],s.apply(null,e).addClass("full").toggle(o)},a=function(e,t){return" <span class='mini-stat' title='"+e+"'> / "+t+"</span>"},s("Score",$("<span>").addClass("badge").text(B(t))),s("Correct",t.correct+a("Current Streak",t.streak)+a("Streak Record",t.streak_record)),Vt.interrupts&&(s("Interrupts",t.interrupts+a("Current Streak",t.negstreak)+a("Streak Record",t.negstreak_record)),n("Early",t.early+a("Powermarked Seen",t.earlyseen))),s("Seen",t.seen+a("Guesses",t.guesses)),t.team&&s("Team",t.team),t.admin_name&&s("Auth",t.admin_name),n("ID",t.id.slice(0,10)),n("Last Seen","<span style='font-size:x-small'>"+e(t.last_action)+"</span>"),o&&t.id!==Wt.id&&Wt.authorized("moderator")&&(i=$("<span>"),i.append(v(t.id,!0)),s("Admin",i)),u},U=function(e,t){var o,n,i;return n=$("<div>").addClass("pseudotable"),o=function(e,t){return $("<div>").addClass("pseudorow").appendTo(n).append($("<span>").addClass("left").text(e)).append($("<span>").addClass("right").append(t))},o("Score",$("<span>").addClass("badge").text(B(e))),o("Correct",jt(function(){var t,o,n,a;for(n=e.members,a=[],t=0,o=n.length;o>t;t++)i=n[t],a.push(i.correct);return a}())),Vt.interrupts&&(o("Interrupts",jt(function(){var t,o,n,a;for(n=e.members,a=[],t=0,o=n.length;o>t;t++)i=n[t],a.push(i.interrupts);return a}())),t&&o("Early",jt(function(){var t,o,n,a;for(n=e.members,a=[],t=0,o=n.length;o>t;t++)i=n[t],a.push(i.early);return a}()))),o("Guesses",jt(function(){var t,o,n,a;for(n=e.members,a=[],t=0,o=n.length;o>t;t++)i=n[t],a.push(i.guesses);return a}())),o("Members",e.members.length),n},M=function(){return L({year:Vt.info.year,difficulty:Vt.info.difficulty,category:Vt.info.category,tournament:Vt.info.tournament,tags:Vt.info.tags,round:Vt.info.round,num:Vt.info.num,qid:Vt.qid,question:Vt.question,generated_time:Vt.generated_time,answer:Vt.answer})},N=function(){var e,t,o,n,i,a,r;if(Vt.question&&Vt.generated_time){if(t=15,mt()&&(t=1),$(".bundle .ruling").tooltip("destroy"),$("#history .bundle").slice(t).find(".annotations").slideUp("normal",function(){return $(this).remove()}),$("#history .bundle").slice(t).slideUp("normal",function(){return $(this).is(".bookmarked")?($("#bookmarks").prepend($(this).slideDown()),$("#bookmarks .bundle").length?$("#whale").slideDown():void 0):$(this).remove()}),i=$("#history .bundle").first(),$(".bundle").removeClass("active"),i.find(".breadcrumb").click(function(){return 1}),e=M().width($("#history").width()),e.addClass("active"),$("#history").prepend(e.hide()),it(),$(".chat.typing").each(function(){var t,o;return t=$(this),Vt.serverTime()-t.data("last_update")>2e4?(t.removeClass("typing"),void 0):(o=t.clone().insertBefore(t),t.appendTo(e.find(".annotations")),o.slideUp("normal",function(){return $(this).remove()}))}),e.slideDown("normal").queue(function(){return e.width("auto"),$(this).dequeue()}),i.find(".readout").length>0){for(n=i.find(".readout .well>span"),a=0,r=n.length;r>a;a++)o=n[a],$(o).data("text")&&(o.childNodes[0].nodeValue=$(o).data("text"));i.find(".readout .well").append(n.contents()),n.remove(),i.find(".readout")[0].normalize(),i.queue(function(){return i.find(".readout").slideUp("normal"),$(this).dequeue()})}return rt()}},P=function(e){var t,o,n,i,a,r,s,u,l,h,c,d,p,m,f,y,g,b,w,v,k,_,E,C,A,T,D,O,S,z,I,j,N,q,F,M,R,U,H,L,P,B;for(l=$("<div>").addClass("alert alert-block alert-info report-form"),l.append($("<button>",{"data-dismiss":"alert",type:"button"}).html("&times;").addClass("close")),h=$("<form>"),h.addClass("form-horizontal").appendTo(l),w=$("<div>").addClass("control-group").appendTo(h),w.append($("<label>").addClass("control-label").text("Description")),r=$("<div>").addClass("controls").appendTo(w),U=["Wrong category","Incorrectly bolded","Change tags","Broken question"],O=0,j=U.length;j>O;O++)f=U[O],r.append($("<label>").addClass("radio").append($("<input type=radio name=description>").val(f.split(" ")[1].toLowerCase())).append(f));for(E=$("<button>",{type:"submit"}).addClass("btn btn-primary").text("Submit"),h.find(":radio").change(function(){return"category"===h.find(":radio:checked").val()?(s.slideDown(),$(i).trigger("change")):s.slideUp(),"bolded"===h.find(":radio:checked").val()?(t.slideDown(),E.disable(c())):t.slideUp(),"question"===h.find(":radio:checked").val()?(a.slideDown(),E.disable(!1)):a.slideUp(),"tags"===h.find(":radio:checked").val()?(T.slideDown(),E.disable(!1)):T.slideUp()}),T=$("<div>").addClass("control-group").appendTo(h).hide(),T.append($("<label>").addClass("control-label").text("Tags")),A=$("<select>"),T.append($("<div>").addClass("controls").append(A)),C={Science:["Biology","Chemistry","Physics","Math","Geology","Astronomy"],History:["American","Ancient","European","World"],"Fine Arts":["Art","Music","Other"],Literature:["American","European","Language Arts","World"],"Social Science":["Anthropology","Economics","Geography","Psychology"],Trash:["Film","Sports","Games","TV","Music"]},A.append(new Option("None","")),H=C[e.category]||[],S=0,N=H.length;N>S;S++)n=H[S],A.append(new Option(n));for(s=$("<div>").addClass("control-group").appendTo(h),s.append($("<label>").addClass("control-label").text("Category")),a=$("<div>").addClass("control-group").appendTo(h).hide(),a.append($("<label>").addClass("control-label").text("Comment")),g=$("<input type=text>").attr("placeholder","What needs to be fixed"),a.append($("<div>").addClass("controls").append(g)),t=$("<div>").addClass("control-group").appendTo(h).hide(),t.append($("<label>").addClass("control-label").text("Answer")),m=$("<ul>").addClass("nav nav-pills emboldinator"),t.append($("<div>").addClass("controls").append(m)),k=e.answer.replace(/([\{\}\[\]\(\)\-])/g,"`$1`").replace(/\ +/g," ` ").replace(/\ +/g," ").split("`"),u=!1,y=[],z=0,q=k.length;q>z;z++)v=k[z],"{"===v?u=!0:"}"===v?u=!1:v&&y.push([u,v]);for(c=function(){var t;return t=b(),console.log(t),t===e.answer?!0:-1===t.indexOf("{")?!0:!1},b=function(){return m.find("li a").map(function(){var e,t,o;return $(this).hasClass("bold")?(o=$(this).text(),t=o.match(/^\s*/)[0],e=o.match(/\s*$/)[0],""+t+"{"+o.trim()+"}"+e):$(this).text()}).toArray().join("~").replace(/~/g,"").replace(/\s+/g," ").replace(/\}\s*\{/g," ").replace(/\s([\]\)])/g,"$1").replace(/([\[\(])\s/g,"$1")},I=0,F=y.length;F>I;I++)L=y[I],p=L[0],D=L[1],d=$("<a>").toggleClass("bold",p).appendTo($("<li>").appendTo(m)).text(D).attr("href","#"),"["===(P=D.trim())||"]"===P||";"===P||","===P||"("===P||")"===P||'"'===P||""===P||"”"===P||"“"===P||"-"===P?(" "===D&&d.hide(),d.removeClass("bold").addClass("unboldable").click(function(){return!1})):d.click(function(){var e;return $(this).toggleClass("bold"),e=b(),E.disable(c()),!1});for(i=$("<select>"),s.append($("<div>").addClass("controls").append(i)),B=Vt.categories,R=0,M=B.length;M>R;R++)n=B[R],i.append(new Option(n));return $(i).change(function(){return E.disable(i.val()===e.category)}),i.val(e.category),$(i).change(),_=$("<div>").addClass("control-group").appendTo(h),o=$("<button>").addClass("btn").text("Cancel").click(function(e){return l.slideUp("normal",function(){return $(this).remove()}),e.stopPropagation(),e.preventDefault()}),$("<div>").addClass("controls").appendTo(_).append(E).append(" ").append(o),$(h).submit(function(){var t;return t=h.find(":radio:checked").val(),"bolded"===t?Wt.change_bold({id:e.qid,answer:b()}):"tags"===t?""===$(A).val()?Wt.tag_question({id:e.qid,tags:[]}):Wt.tag_question({id:e.qid,tags:[$(A).val()]}):("category"===t&&(e.fixed_category=i.val()),e.describe=t,Wt.report_question(e)),x("Reported Question","Protobowl has a new answer checking algorithm (finally!), it takes into account which words are bolded in the answer line to determine what to accept, prompt or reject. Please hit Edit and revise the bolding.").addClass("alert-success").insertAfter(l.parent().find(".annotations")),l.slideUp("normal",function(){return $(this).remove()}),!1}),r.find("input:radio")[0].checked=!0,l},L=function(e){var t,o,n,i,a,r,s,u,l,h,c,d,p;if(n=$("<div>").addClass("bundle").addClass("qid-"+e.qid),n.toggleClass("semi",Vt.semi),n.data("info",e),o=$("<ul>"),u=$("<a>",{href:"#",rel:"tooltip",title:"Bookmark this question"}).addClass("bookmark").click(function(t){return t.stopPropagation(),t.preventDefault(),t.shiftKey?Rt(e.qid,function(t){return Zt(e.qid,t.bookmarked+1)}):n.hasClass("bookmarked")?Zt(e.qid,0):Zt(e.qid,1)}),"function"==typeof Ft&&Ft(e.qid),u.addClass("icon-star-empty"),o.append($("<li>").addClass("pull-right").append(u)),i=function(e){var t;return o.find("li:not(.pull-right)").last().append($("<span>").addClass("divider").text("/")),t=$("<li>").text(e).appendTo(o)},e.tournament&&e.year?i(e.year+" "+e.tournament):e.year?i(e.year):e.tournament&&i(e.tournament),i(e.difficulty),i(e.category),e.tags)for(p=e.tags,c=0,d=p.length;d>c;c++)l=p[c],i(l);return o.find("li").last().append($("<span>").addClass("divider hidden-phone hidden-offline edit-button").text("/")),o.append($("<li>").addClass("clickable hidden-phone hidden-offline edit-button").text("Edit").click(function(t){return n.find(".report-form").length>0||P(e).insertBefore(n.find(".annotations")).hide().slideDown(),t.stopPropagation(),t.preventDefault()})),t=$("<li>").addClass("pull-right answer"),a=$("<li>").addClass("pull-right answer"),r=nt(e.answer),-1===(e.answer+"").indexOf("{")?(t.text(e.answer).css("font-weight","bold"),a.text(r).css("font-weight","bold")):(t.html(e.answer.replace(/\{/g,'<span class="bold">').replace(/\}/g,"</span>")),a.html(r.replace(/\{/g,'<span class="bold">').replace(/\}/g,"</span>"))),a.data("actual_answer",t),o.append(a),s=$("<div>").addClass("readout"),h=$("<div>").addClass("well").appendTo(s),h.append($("<span>").addClass("unread").text(e.question)),n.append($("<ul>").addClass("breadcrumb").append(o)).append(s).append($("<div>").addClass("sticky")).append($("<div>").addClass("annotations"))},rt=function(){return $(".bundle").not(".active").add(".bundle.revealed").find(".answer").not(".done").replaceWith(function(){return $(this).data("actual_answer").addClass("done")})},K=null,Q=-1,at=function(){var e,t,o,n,i,a,r;if(Vt.question&&Vt.timing&&K){for(n=Vt.time()-Vt.begin_time,t=Math.max(0,Q),e=t;n>Vt.cumulative[e];)e++;if(t>e)for(i=a=e;t>=e?t>a:a>t;i=t>=e?++a:--a)K[i].className="unread";for(i=r=t;e>=t?e>r:r>e;i=e>=t?++r:--r)K[i].className="",o=$(K[i]).data("text"),o&&(K[i].childNodes[0].nodeValue=o);return Q=e-1}},st={},G={},F=function(){var e,t,o,n,i,a,r;for(o=$("<div>").addClass("well"),t=$("<div>").css("overflow","hidden").css("width",0).css("height",0).appendTo("body").append(o),i=$("<span>").appendTo(o),e=r=33;126>r;e=++r)n=String.fromCharCode(e),i.text(n),a=i.width(),st[a]=n,G[n]=a;return t.remove()},nt=function(e){var t,o;return G.x>0||F(),o=function(){var o,n,i;for(i=[],o=0,n=e.length;n>o;o++)t=e[o],t in G?i.push(st[G[t]]):i.push(t);return i}(),o.join("")},it=function(){var e,t,o,n,i,a,r,s,u,l,h,c,d,m,f,y,g;if(Vt.question&&Vt.timing&&(d=Vt.question.split(" "),o=Vt.question.replace(/[^ \*]/g,"").indexOf("*"),e=$("#history .bundle.active"),l=e.data("starts")||[],h=e.data("stops")||[],u=e.find(".readout .well"),0!==u.length)){for(u.data("spots",l.join(",")),t=u.children(),i=[],a=e.data("finish_point"),r=m=0,y=d.length;y>=0?y>m:m>y;r=y>=0?++m:--m)n=$("<span>").addClass("unread"),-1!==d[r].indexOf("*")?n.append(" <span class='inline-icon'><span class='asterisk'>"+d[r]+"</span><i class='label icon-white icon-asterisk'></i></span> "):(c=d[r],n.data("text",c+" "),n.append(nt(c)+" ")),p.call(l,r)>=0?(s="label-important",r===d.length-1&&(s="label-info"),-1!==o&&o>r&&(s="label"),n.append(" <span class='inline-icon'><i class='label icon-white icon-bell  "+s+"'></i></span> ")):p.call(h,r)>=0?n.append(" <span class='inline-icon'><i class='label icon-white icon-pause label-warning'></i></span> "):a&&r===a&&n.append(" <span class='inline-icon'><i class='label icon-white icon-forward label-info'></i></span> "),i.push(n);for(r=f=0,g=d.length;g>=0?g>f:f>g;r=g>=0?++f:--f)t.eq(r).html()===i[r].html()?t.eq(r).addClass("unread"):t.eq(r).length>0?t.eq(r).replaceWith(i[r]):u.append(i[r]);return K=u[0].childNodes,Q=-1,at()}};var ut,lt,ht,ct,dt,pt,mt,ft,yt,gt,bt,wt,vt,kt,_t,$t,Et,p=[].indexOf||function(e){for(var t=0,o=this.length;o>t;t++)if(t in this&&this[t]===e)return t;return-1};$("#username").keyup(function(e){var t,o;return 13===e.keyCode&&$(this).blur(),t=$(this).val(),t.length>0?(Wt.set_name(t),o="username"+(("undefined"!=typeof u&&null!==u?u.email:void 0)||""),localStorage[o]=t):void 0}),$(".generate-name").click(function(){return"undefined"!=typeof mo&&null!==mo?($("#username").val(mo()),$("#username").keyup().focus()):void 0}),jQuery(".bundle .breadcrumb").live("click",function(){var e;return $(this).is(jQuery("#history .bundle .breadcrumb").first())?void 0:(e=$(this).parent().find(".readout"),e.width($("#history").width()).slideToggle("normal",function(){return e.width("auto")}))}),$(".new-room").mouseover(function(){return"undefined"!=typeof fo&&null!==fo?$(".new-room").attr("href",fo()):void 0}),ut="",$t=function(e){return e!==ut&&ut&&$(".prompt_input, .guess_input, .chat_input").blur(),ut=e,$(".actionbar").toggle(""===e),$(".chat_form").toggle("chat"===e),$(".guess_form").toggle("guess"===e),$(".prompt_form").toggle("prompt"===e),$(window).resize()},$(".chatbtn").click(function(){return $(".chat_input").val(""),yt()}),yt=function(e){if("@$> "===e)$(".chat_input").val(e);else if(!Wt.authorized(Vt.mute)||Wt.prefs.distraction)return;return"chat"!==ut&&($t("chat"),$(".chat_input").data("input_session",Math.random().toString(36).slice(3)).data("begin_time",+new Date)),$(".chat_input").keyup().focus()},_t=[0],vt=0,kt=function(){var e,t,o,n,i,a,r;if("localhost"===location.hostname||"_"===Wt.id[0])return!1;if(!qt())return!1;for(i=7,t=+new Date,o=[],n=!1,a=0,r=_t.length;r>a;a++)e=_t[a],5e3>t-e&&o.push(e);return o.length>=i&&(n=!0),vt>t&&(n=!0),_t=o.slice(-10),_t.push(t),n&&(vt=t+5e3,x("Rate Limited","You been rate limited for doing too many things in the past five seconds. ").addClass("alert-error").insertAfter(".bundle.active .annotations")),n},Et=function(){return kt()?void 0:Wt.skip()},ft=function(){return Vt.time()>=Vt.end_time&&!Vt.attempt?Wt.next():void 0},$(".skipbtn").click(Et),$(".nextbtn").click(ft),$(".buzzbtn").click(function(){var e;if(!$(".buzzbtn").prop("disabled")&&!kt())return $t("guess"),$(".guess_input").val("").addClass("disabled").focus(),e=+new Date,$(".sounds")[0].checked&&!$(".sounds").data("ding_sound")&&$(".sounds").data("ding_sound",new Audio("/sound/ding.wav")),Wt.buzz(Vt.qid,function(t){if("http://www.whosawesome.com/"===t){if($(".guess_input").removeClass("disabled"),$(".sounds")[0].checked&&$(".sounds").data("ding_sound").play(),window._gaq)return _gaq.push(["_trackEvent","Game","Response Latency","Buzz Accepted",new Date-e])}else if($t(""),window._gaq)return _gaq.push(["_trackEvent","Game","Response Latency","Buzz Rejected",new Date-e])})}),$(".score-reset").click(function(){return Wt.score()>50?n.confirm("Are you sure you want to reset your score?",function(e){return e?Wt.reset_score():void 0}):Wt.reset_score()}),$(".lose-command").click(function(){return Wt.cincinnatus()}),$(".pausebtn").click(function(){return kt()?void 0:Vt.time_freeze?Wt.unpause():Wt.pause()}),$(".chat_input").keydown(function(e){var t,o;return 47!==(t=e.keyCode)&&111!==t&&191!==t||0!==$(this).val().length||e.shiftKey||e.preventDefault(),27===(o=e.keyCode)?($(".chat_input").val(""),$(".chat_form").submit()):void 0}),$("input").keydown(function(e){return e.stopPropagation(),$(this).hasClass("disabled")?e.preventDefault():void 0});try{$(".chat_input").typeahead({source:function(){return pt(this.query)},matcher:function(e){return"@"===this.query[0]&&0===e.toLowerCase().indexOf(this.query.toLowerCase())}})}catch(Ct){}pt=function(e){var t,o,n,i,a,r,s,u,l,h,c,d,m;r="@"+e.slice(1).split(",").slice(0,-1).join(","),t=function(){var t,o,n,i;for(n=e.slice(1).split(",").slice(0,-1),i=[],t=0,o=n.length;o>t;t++)a=n[t],i.push($.trim(a));return i}(),r.length>1&&(r+=", "),i=["individuals"],h=Vt.users;for(o in h)s=h[o],c=s.name,p.call(i,c)<0&&i.push(s.name),s.team&&(d=s.team,p.call(i,d)<0)&&i.push(s.team);for(m=[],u=0,l=i.length;l>u;u++)n=i[u],p.call(t,n)<0&&m.push(""+r+n);return m},ht=function(e){var t,o,n,i,a,r,s,u,l;r="@",t=!0,o={},u=Vt.users;for(n in u)l=u[n],a=l.name,s=l.team,o[a]="!@"+n+", ",s||(s="individuals"),o[s]="*@"+s+", ";for(;t===!0;){t=!1,e=e.replace(/^[@\s,]*/g,"");for(a in o)if(i=o[a],e.slice(0,a.length)===a){r+=i,e=e.slice(a.length),t=!0;break}}for(a in o)if(i=o[a],e.slice(0,a.length)===a&&e.length>0){r+=i,e=e.slice(a.length);break}return[r.replace(/[\s,]*$/g,""),e]},gt=!1,bt="",dt="",wt=function(e){var t,o,n;return t=0,o=Math.random().toString(36).slice(2),n=function(){return++t<=e.length?(E({text:e.slice(0,t),session:o,user:"__protobot",done:t===e.length,time:Vt.serverTime()}),setTimeout(n,1e4/(80+50*Math.random()))):void 0},n()},lt=function(e,t){var o,n,i,a,r,s;return e=e.slice(0,1e3),("lobby"===(s=Vt.name)||"b"===s)&&(e=e.slice(0,140)),e.length<15&&/lonely/i.test(e)&&/re |m /i.test(e)&&!/you/i.test(e)&&!gt?(gt=!0,bt=$(".chat_input").data("input_session"),wt("I'm lonely too. Plz talk to meeeee")):gt&&(i=function(e){return e[Math.floor(e.length*Math.random())]},t&&/stahp|stop|not lonely/i.test(e)?(wt("Protobot disengaged. Prepare to languish in your solitude."),gt=!1):"undefined"!=typeof omeglebot_replies&&null!==omeglebot_replies&&bt!==$(".chat_input").data("input_session")&&(e.replace(/[^a-z]/g,"")in omeglebot_replies&&Math.random()>.3?(wt(i(omeglebot_replies[e.replace(/[^a-z]/g,"")])),bt=$(".chat_input").data("input_session")):t&&(Math.random()<.1&&Vt.active_count()>1?wt('Looks like some other people exist. Just say "stahp" if you want me to die in a hole, or if you want to stop sounding schizophrenic.'):(r=i(Object.keys(omeglebot_replies)),r=i(omeglebot_replies[r]),wt(r))))),"@"===e.slice(0,1)&&"@$>"!==e.slice(0,3)&&(a=ht(e),"@"===a[0]?e="@"+a[1]:(n=e.trim().slice(0,e.trim().length-a[1].trim().length).trim(),n!=="@"+(Wt.team||"individuals")&&(dt=n+" "),e=a.join(" "))),o=!1,$(".chat_input").data("cached_session")!==$(".chat_input").data("input_session")&&($(".chat_input").data("cached_session",$(".chat_input").data("input_session")),o=!0),Wt.chat({text:e,session:$(".chat_input").data("input_session"),first:o,done:t})},$(".chat_input").keyup(function(e){var t;if(13!==e.keyCode)return t=$(".chat_input").val(),$(".livechat")[0].checked&&!Wt.muwave&&"@"!==t.slice(0,1)?($(".chat_input").data("sent_typing",""),lt(t,!1)):$(".chat_input").data("sent_typing")!==$(".chat_input").data("input_session")?("@$>"!==t.slice(0,3)&&lt("(typing)",!1),$(".chat_input").data("sent_typing",$(".chat_input").data("input_session"))):void 0}),$(".chat_form").submit(function(e){var t;return $t(""),lt($(".chat_input").val(),!0),e.preventDefault(),t=new Date-$(".chat_input").data("begin_time"),window._gaq?_gaq.push(["_trackEvent","Chat","Typing Time","Posted Message",t]):void 0}),$(".guess_input").keyup(function(e){return 13!==e.keyCode?Wt.guess({text:$(".guess_input").val(),done:!1}):void 0}),$(".guess_form").submit(function(e){return $t(""),Wt.guess({text:$(".guess_input").val(),done:!0}),e.preventDefault()}),$(".prompt_input").keyup(function(e){return 13!==e.keyCode?Wt.guess({text:$(".prompt_input").val(),done:!1}):void 0}),$(".prompt_form").submit(function(e){return $t(""),Wt.guess({text:$(".prompt_input").val(),done:!0}),e.preventDefault()}),$(".textbar-submit").click(function(){return $(this).parents("form").submit()}),ct=!0,$("body").keyup(function(e){var t;return 83===(t=e.keyCode)?ct=!0:void 0}),$("body").keydown(function(e){var t,o,n,i,a,r,s,u,l,h,c,d,p,m;return"chat"===ut?$(".chat_input").focus():"guess"===ut?$(".guess_input").focus():(50===e.keyCode&&e.shiftKey&&($(".chatbtn").click(),$(".chat_input").focus()),190===e.keyCode&&(e.shiftKey||e.ctrlKey||e.metaKey||e.altKey)&&(e.preventDefault(),yt("@$> ")),e.shiftKey||e.ctrlKey||e.metaKey?void 0:(32===e.keyCode?(e.preventDefault(),1===$(".start-page").length?$(".nextbtn").click():$(".buzzbtn").click()):83===(t=e.keyCode)?ct&&(ct=!1,Et()):78===(o=e.keyCode)||74===o?ft():72===(s=e.keyCode)?$("#bookmarks .pager .previous a").click():76===(u=e.keyCode)?$("#bookmarks .pager .next a").click():75===(l=e.keyCode)?$(".bundle:not(.active):first .readout").slideToggle():80===(h=e.keyCode)||82===h?$(".pausebtn").click():47===(c=e.keyCode)||111===c||191===c||67===c||65===c||13===c?(e.preventDefault(),$(".chatbtn").click()):87===(d=e.keyCode)||222===d?(e.preventDefault(),$(".chat_input").val(dt||"@"),yt()):84===(p=e.keyCode)?(e.preventDefault(),$(".chat_input").val("@"+(Wt.team||"individuals")+" "),yt()):70===(m=e.keyCode)?Wt.finish():66===(n=e.keyCode)&&$(".bundle.active .bookmark").click(),("localhost"===location.hostname||"_"===(null!=(i=Wt.id)?i[0]:void 0)||"dev"in location.query)&&(68===(a=e.keyCode)?(Wt.buzz(Vt.qid),Wt.guess({text:Vt.answer.replace(/(\(|\[).*/,"").replace(/\{|\}/g,""),done:!0})):69===(r=e.keyCode)&&(Wt.buzz(Vt.qid),Wt.guess({text:"",done:!0}))),("undefined"!=typeof protobowl_config&&null!==protobowl_config?protobowl_config.development:void 0)?console.log(e.keyCode):void 0))
}),$(".speed").change(function(){var e;return $(".speed").not(this).val($(this).val()),$(".speed").data("last_update",+new Date),e=12e3/Math.round($(this).val()),+$(".speed").val()>$(".speed").prop("max")-10?Wt.set_speed(.1):Wt.set_speed(e)}),$(".categories").change(function(){return Wt.set_category($(".categories").val())}),$(".difficulties").change(function(){return Wt.set_difficulty($(".difficulties").val())}),$("#make_button").click(function(){return"__create"===$("#team_input").val()&&($("#team_input").val("Boxxy"),O()),Wt.set_team($("#team_input").val()),$("#team_modal").data("set_team",!0).modal("hide"),$("#team_input").blur()}),$("#team_modal").on("hidden",function(){return $("#team_modal").data("set_team")?void 0:Wt.set_team(Wt.team)}),$("#team_modal").on("shown",function(){return $("#team_input").focus()}),$("#team_modal form").submit(function(e){return e.preventDefault(),$("#make_button").click()}),$(".teams").change(function(){return"__create"===$(".teams").val()?$("#team_modal").modal("show").data("set_team",!1).find("input").val(Wt.team):Wt.set_team($(".teams").val())}),$(".multibuzz").change(function(){return Wt.set_max_buzz($(".multibuzz")[0].checked?null:1)}),$(".allowskip").change(function(){return Wt.set_skip($(".allowskip")[0].checked)}),$(".allowpause").change(function(){return Wt.set_pause($(".allowpause")[0].checked)}),$(".showbonus").change(function(){return Wt.set_bonus($(".showbonus")[0].checked)}),$(".livechat").change(function(){return Wt.pref("typing",$(".livechat")[0].checked)}),$(".lock").change(function(){return Wt.set_lock($(".lock")[0].checked)}),$(".adhd").change(function(){return Wt.prefs.distraction=$(".adhd")[0].checked,Wt.pref("distraction",Wt.prefs.distraction),Wt.prefs.distraction?($("p.annoying").removeClass("annoying").slideUp("normal",function(){return $(this).addClass("annoying")}),$("body").addClass("distraction"),Wt.prefs.timer_hide?void 0:setTimeout(function(){return $(".timer-widget").addClass("pulse"),setTimeout(function(){return $(".timer-widget").removeClass("pulse")},1500)},500)):($("body").removeClass("distraction"),$("p.annoying").hide().slideDown())}),$(".request-access").click(function(){return Wt.nominate()}),$(".movingwindow").change(function(){return $(".movingwindow")[0].checked?Wt.pref("movingwindow",20):Wt.pref("movingwindow",!1)}),$(".sounds").change(function(){return Wt.pref("sounds",$(".sounds")[0].checked),$(".sounds").data("ding_sound",new Audio("/sound/ding.wav"))}),mt=function(){return window.matchMedia?matchMedia("(max-width: 768px)").matches:!1},Modernizr.touch||mt()||($(".actionbar button").tooltip(),$(".actionbar button").click(function(){return $(".actionbar button").tooltip("hide")}),$("#history, .settings").tooltip({selector:"[rel=tooltip]",placement:function(){return mt()?"error":"left"}})),$("body").click(function(e){return $(".bundle .ruling").tooltip("destroy"),0===$(e.target).parents(".leaderboard, .popover").length?($(".leaderboard tbody tr").popover("destroy"),$(".popover").remove()):void 0}),$(".singleuser").click(function(){var e;return e=!$(".singleuser").data("full"),$(".singleuser").data("full",e),$(".singleuser .stats .full").slideToggle(e)}),$(".show_image").live("click",function(e){return e.preventDefault(),$(this).parent().find(".chat_image").slideToggle()}),$(".username").live("click",function(e){var t;t=Vt.users[$(this).data("id")],t&&(e.shiftKey||e.ctrlKey||e.metaKey)&&(e.preventDefault(),"chat"===ut&&"@"===$(".chat_input").val()[0]?-1===$(".chat_input").val().indexOf(t.name)&&$(".chat_input").val($(".chat_input").val().replace("@","@"+t.name+", ")):$(".chat_input").val("@"+t.name+" "),yt())}),$(".banhammer.make-tribunal").live("click",function(e){return e.preventDefault(),Wt.trigger_tribunal($(this).data("id"))}),$(".banhammer.instaban").live("click",function(e){return e.preventDefault(),Wt.ban_user($(this).data("id"))}),$(".banhammer.reprimand").live("click",function(e){return e.preventDefault(),Wt.reprimand({user:$(this).data("id"),reason:$(this).parents(".banham").data("reason")}),Vt.users[$(this).data("id")].__reprimanded=Date.now(),setTimeout(function(){return S()},15e3)}),$(".timer-widget").click(function(){return Wt.prefs.timer_hide=!$(".timer-widget").data("hidden"),Z(),Wt.pref("timer_hide",Wt.prefs.timer_hide)}),$(".leaderboard tbody tr").live("click",function(e){var t,o,n,i;return $(this).is(".ellipsis")?(Wt.prefs.leaderboard=!Wt.prefs.leaderboard,Wt.pref("leaderboard",Wt.prefs.leaderboard),et(),void 0):(n=$(this).data("entity"),e.shiftKey||e.ctrlKey||e.metaKey?(e.preventDefault(),"chat"===ut&&"@"===$(".chat_input").val()[0]?-1===$(".chat_input").val().indexOf(n.name)&&$(".chat_input").val($(".chat_input").val().replace("@","@"+n.name+", ")):$(".chat_input").val("@"+n.name+" "),yt(),void 0):(o=null!=(i=$(this).data("popover"))?i.enabled:void 0,t=$(".leaderboard tbody tr").map(function(){var e;return null!=(e=$(this).data("popover"))?e.$tip[0]:void 0}),$(".popover").not(t).fadeOut("fast",function(){return $(this).remove()}),$(".leaderboard tbody tr").popover("destroy"),o?void 0:($(this).popover({placement:mt()?"top":"left",trigger:"manual",title:""+n.name,content:function(){return R(n,!0)}}),$(this).popover("toggle"))))}),Modernizr.touch?($(".show-keyboard").hide(),$(".show-touch").show()):($(".show-keyboard").show(),$(".show-touch").hide()),$(".show-sidebar").click(function(e){return $(".sidebar").toggleClass("shown"),$(".sidebar").hasClass("shown")?($(".show-sidebar i").removeClass("icon-circle-arrow-right"),$(".show-sidebar i").addClass("icon-circle-arrow-left")):($(".show-sidebar i").removeClass("icon-circle-arrow-left"),$(".show-sidebar i").addClass("icon-circle-arrow-right")),e.preventDefault()}),$("body").live("swiperight",function(){return $(".sidebar").addClass("shown")}),$("body").live("swipeleft",function(){return $(".sidebar").removeClass("shown")});var xt,At,Tt,Dt,Ot,St,zt,It,jt,Ft,Nt,qt,Mt,Rt,Ut,Ht,Lt,Pt,Bt,Yt,Wt,Gt,Kt,Qt,Xt,Jt,Vt,Zt,eo,to,oo,no,ao,ro,so={}.hasOwnProperty,uo=function(e,t){function o(){this.constructor=e}for(var n in t)so.call(t,n)&&(e[n]=t[n]);return o.prototype=t.prototype,e.prototype=new o,e.__super__=t.prototype,e},r=[].slice,p=[].indexOf||function(e){for(var t=0,o=this.length;o>t;t++)if(t in this&&this[t]===e)return t;return-1};!function(){return"anachron"in location.query?window.WebSocket=function(){return 0}:void 0}(),function(){var e,t,o,n,i;try{n=new Date(protobowl_app_build),$("#version").text(""+(n.getMonth()+1)+"/"+n.getDate()+"/"+n.getFullYear()%100+" "+n.getHours()+":"+(n.getMinutes()/100).toFixed(2).slice(2))}catch(a){}try{if(t=new Date(protobowl_app_build),e=new Date(protobowl_html_build),i=Math.abs(t-e),i>=3600)return o=$("<div>").addClass("alert alert-info"),o.append($("<div>").append("<b>Version mismatch!</b> It appears that you are running HTML generated for a different version of protobowl. This could happen if you loaded this page before a server update has fully propagated. This will most likely not impact your protobowl experience. ")),o.insertAfter("#history")}catch(a){}}(),Lt=function(e){return null==e&&(e=function(){}),Lt.initialized?e():(Lt.initialized=!0,$.ajax({url:(("undefined"!=typeof protobowl_config&&null!==protobowl_config?protobowl_config["static"]:void 0)||"/")+"offline.js",cache:!0,dataType:"script",success:e}))},Gt=function(){return Lt(function(){var e,t,o,n,i,a;if(e="offline",localStorage.hasOwnProperty("room-"+Vt.name))try{t=JSON.parse(localStorage["room-"+Vt.name]),"temporary"!==t.me_id?(e=t.me_id,Vt.deserialize(t)):t=null}catch(r){}if(Wt.__listeners.joined({id:e,name:"offline user"}),null!=t?t.users:void 0)try{for(a=t.users,n=0,i=a.length;i>n;n++)o=a[n],o.id===e&&Wt.deserialize(o)}catch(r){}return Vt.sync(5),Wt.verb("joined the room"),"undefined"!=typeof Vo&&null!==Vo?Vo():void 0})},setTimeout(function(){return Vt.active_count()<=1&&Math.random()<.01?E({text:'Feeling lonely? Just say "I\'m Lonely" and talk to me!',user:"__protobot",done:!0}):void 0},3e4),setTimeout(function(){return navigator.onLine?D():void 0},6e5),Ht=function(){var e;return e=$("<div>").addClass("alert alert-info"),e.append($("<div>").append("A  ",$('<span class="label label-info">').text("server restart")," will happen momentarily. This may result in a message indicating that you have been disconnected from the server. However, don't panic as a new connection will automatically be established shortly afterwards. ")),w($("<div>").addClass("log doom-notice").append(e))},Mt=function(){var e,t;return"undefined"!=typeof Vo&&null!==Vo&&Vo(),$("#reload, #disconnect, #reconnect").hide(),$("#reconnect").show(),(null!=(t=Vt.attempt)?t.user:void 0)!==Wt.id&&(Vt.attempt=null),e=$("<div>").addClass("alert alert-error"),e.append($("<p>").append("You were ",$('<span class="label label-important">').text("disconnected")," from the server for some reason. ",$("<em>").text(new Date))),e.append($("<div>").append("This may be due to a drop in the network 			connectivity or a malfunction in the server. The client will automatically 			attempt to reconnect to the server and in the mean time, the app has automatically transitioned			into <b>offline mode</b>. You can continue playing alone with a limited offline set			of questions without interruption. However, you might want to try <a href=''>reloading</a>.")),w($("<div>").addClass("log disconnect-notice").append(e)),$.getJSON("https://api.github.com/gists/4272390?callback=?",function(e){var t,o,n,i,a,r;return t=e.data,n=e.meta,"Nothing"!==(i=null!=t?null!=(a=t.files)?null!=(r=a["protobowl-status.html"])?r.content:void 0:void 0:void 0)&&null!==i?(o=$("<div>").addClass("emergency-message"),o.append($("<div>").addClass("alert alert-info").html(t.files["protobowl-status.html"].content)),$(".emergency-message").remove(),$("#history").before(o)):void 0}),et(),V()},Ut=!1,eo=null,to=0,Kt=function(){var e,t,o,n,i,a,r,s,u,l,h,c,d;return s=function(){var e,t,o,n,i;return t=location.query.id||jQuery.cookie("protocookie"),e=null,("undefined"!=typeof protobowl_config&&null!==protobowl_config?protobowl_config.auth:void 0)&&(e=jQuery.cookie("protoauth")),"ninja"in location.query&&(i=new XMLHttpRequest,i.open("get",protobowl_config.sockets[0][0]+"stalkermode/ninjacode",!1),i.send(),e=i.responseText),t||(o="",t="PB4CL"+function(){var e,t;for(t=[],n=e=0;8>=e;n=++e)t.push(Math.random().toString(36).slice(2,6));return t}().join(""),jQuery.cookie("protocookie",t)),eo.emit("join",{cookie:t,auth:e,question_type:Vt.type,room_name:Vt.name,muwave:"muwave"in location.query,custom_id:location.query.id,version:7}),$(".disconnect-notice, .doom-notice").slideUp(),$("#reload, #disconnect, #reconnect").hide(),$("#disconnect").show()},h=function(e){var t,o,n;eo&&eo!==e&&(console.log("disconnecting from select"),eo.disconnect()),eo&&eo.removeAllListeners(),to>0&&w($("<div>").html("<strong>Warning</strong> You are not connected to the primary socket server. The primary server may be broken at this time, however, if it gets fixed, users may be stranded on different rooms.").addClass("alert")),eo=e,eo===u?j({verb:"established a connection to the secure server"}):eo.socket.options.secure?j({verb:"established a connection to the server (secure)"}):j({verb:"established a connection to the server"}),eo.on("disconnect",function(){return(null!=eo?eo.hide_disconnect:void 0)?void 0:Mt()}),n=Wt.__listeners;for(o in n)t=n[o],eo.on(o,t);return s()},e=function(e){return $("#load_error").remove(),eo?eo===e?s():setTimeout(function(){return eo.socket.connected===!0?(e.disconnect(),e.removeAllListeners()):h(e)},2718):h(e)},t=function(e){return e.socket.transport||console.log("ran out of options sir"),console.log("connect fail",e)},d=0,r=0,o=function(){var e;return r++,r===d?("undefined"!=typeof protobowl_config&&null!==protobowl_config?null!=(e=protobowl_config.sockets)?e.length:void 0:void 0)>to+1?(to++,Kt()):(console.log("errythings failed capn"),Gt()):void 0},n=5e3,c="undefined"!=typeof protobowl_config&&null!==protobowl_config?protobowl_config.sockets[to]:void 0,a=c[0],l=c[1],i=io.connect(a||location.hostname,{"connect timeout":n,"force new connection":!0}),d++,i.on("connect",function(){return e(i)}),i.on("connect_failed",function(){return t(i)}),i.on("error",o),"http:"===location.protocol&&l?(u=io.connect(l,{port:443,"connect timeout":n,"force new connection":!0,secure:!0}),d++,u.on("connect",function(){return e(u)}),u.on("connect_failed",function(){return t(u)}),u.on("error",o)):void 0},qt=function(){return null!=eo&&eo.socket.connected},Ot=function(e){function t(){return ro=t.__super__.constructor.apply(this,arguments)}return uo(t,e),t.prototype.online=function(){return this.online_state},t.prototype.emit=function(){var e;return e=1<=arguments.length?r.call(arguments,0):[],this.id===Wt.id?Wt.emit.apply(Wt,e):void 0},t}(d),St=function(e){function t(e,o){var n,i,a;t.__super__.constructor.call(this,e,o),this.__listeners={},n=["envelop_action","level","score","online","active","authorized","emit"];for(a in this)i=this[a],"function"==typeof i&&p.call(n,a)<0&&this.envelop_action(a)}return uo(t,e),t.prototype.emit=function(e,t){return"undefined"!=typeof No&&null!==No&&No()?Fo(e,t):this.__listeners[e](t)},t.prototype.authorized=function(e){return qt()?t.__super__.authorized.call(this,e):!0},t.prototype.envelop_action=function(e){return this[e]=function(t,o){var n;return qt()?eo.emit(e,t,o):"undefined"!=typeof No&&null!==No&&No()?qo(e,t,o):null!=(n=Vt.users[Wt.id])?"function"==typeof n[e]?n[e](t,o):void 0:void 0}},t}(Ot),zt=function(e){function t(e){t.__super__.constructor.call(this,e)}return uo(t,e),t.prototype.emit=function(){var e;return e=1<=arguments.length?r.call(arguments,0):[],Wt.emit.apply(Wt,e)},t.prototype.load_questions=function(e){var t=this;return"undefined"!=typeof Zo&&null!==Zo?Zo(e):setTimeout(function(){return t.load_questions(e)},100)},t.prototype.check_answer=function(e,t,o){return checkAnswer(e,t,o)},t.prototype.get_parameters=function(e,t,o){return this.load_questions(function(){return Po(e,t,o)})},t.prototype.count_questions=function(e,t,o,n){return this.load_questions(function(){return Io(e,t,o,n)})},t.prototype.get_question=function(e){var t=this;return this.load_questions(function(){var o;return o="custom"===t.category?t.distribution:t.category,Bo(t.type,t.difficulty,o,function(t){return e(t||g)})})},t.prototype.deserialize=function(e){var t,o,n,i;o=["users","attempt","generating_question","acl"],i=[];for(t in e)n=e[t],p.call(o,t)<0&&i.push(this[t]=n);return i},t}(m),Vt=new zt(location.pathname.replace(/^\/*/g,"").toLowerCase()||"temporary"),Vt.type=2===Vt.name.split("/").length?Vt.name.split("/")[0]:"qb",Wt=new St(Vt,"temporary"),document.title=""+Vt.name+" - Protobowl",Yt=function(e,t){return Wt.__listeners[e]=t},Yt("echo",function(e,t){return t("alive")}),Yt("impending_doom",function(){return Ht()}),Yt("redirect",function(e){return window.location=e}),Yt("alert",function(e){return window.alert(e)}),Yt("chat",function(e){return E(e)}),Yt("log",function(e){return j(e)}),Yt("bold",function(e){return k(e)}),Yt("reprimand",function(e){return z(e)}),Yt("debug",function(e){return T(e)}),Yt("sync",function(e){return no(e)}),Yt("throttle",function(){return x("Throttled","The server is ignoring you for a while because you've been doing too many things too quickly. ").addClass("alert-error").insertAfter(".bundle.active .annotations")}),Yt("verify",function(e){return"function"==typeof h?h(e):void 0}),Yt("rename_user",function(e){var t,o;return o=e.old_id,t=e.new_id,Wt.id===o&&(Wt.id=t,Vt.users[Wt.id]=Vt.users[o]),$(".user-"+o).removeClass("user-"+o).addClass("user-"+t),delete Vt.users[o]}),Yt("delete_user",function(e){return delete Vt.users[e],et()}),Yt("joined",function(e){var t;if("undefined"!=typeof s&&null!==s&&s&&Wt.link(s),Ut=!0,$("#slow").slideUp(),$(".disconnect-notice").slideUp(),Wt.id=e.id,Wt.ip=e.ip,"function"==typeof a&&a(e.ip),Vt.users[Wt.id]=new Ot(Vt,Wt.id),Wt.name=e.name,"_"!==Wt.id[0]&&"temporary"!==Wt.id){t="username"+(("undefined"!=typeof u&&null!==u?u.email:void 0)||"");try{localStorage[t]?e.existing||setTimeout(function(){return Wt.name=localStorage[t],Wt.set_name(Wt.name),$("#username").val(Wt.name)},137):localStorage[t]=e.name}catch(o){}}return e.muwave&&e.muwave<=34&&(window.WebSocket||$(".no-websocket").show(),$("#polling").slideDown()),$(".actionbar button").disable(!1),$("#username").val(Wt.name),$("#username").disable(!1),setTimeout(Lt,100)}),oo=[],Bt=[],Pt=-1,no=function(e){var t,o,n,i,a,r,s,u,l,h,c,d,m,f;o=["real_time","users"],oo.push(+new Date-e.real_time),Nt();for(t in e)l=e[t],p.call(o,t)<0&&(Vt[t]=l);if(qt()&&("timing"in e||Vt.__last_rate!==Vt.rate)&&(n=function(e,t){var o,n,i,a,r,s;for(n=0,r=[5].concat(e).slice(0,-1),s=[],i=0,a=r.length;a>i;i++)o=r[i],s.push(n+=Math.round(o*t));return s},Vt.cumulative=n(Vt.timing,Vt.rate),Vt.__last_rate=Vt.rate),"users"in e)for(u=["id"],m=e.users,c=0,d=m.length;d>c;c++){s=m[c],s.id in Vt.users||(Vt.users[s.id]=new Ot(Vt,s.id));for(t in s)l=s[t],p.call(u,t)<0&&(Vt.users[s.id][t]=l);if(s.id===Wt.id)for(t in s)l=s[t],p.call(u,t)<0&&(Wt[t]=l)}if($("body").toggleClass("offline",!qt()),"difficulties"in e&&X(),Z(),J(),S(),Pt!==Vt.time_freeze){for(Pt=Vt.time_freeze,h=Vt.attempt?"starts":"stops",i=Vt.time_freeze-Vt.begin_time,a=0;i>Vt.cumulative[a];)a++;r=$(".bundle.active").data(h)||[],f=a-1,p.call(r,f)<0&&r.push(a-1),$(".bundle.active").data(h,r),it()}return"users"in e?et():void 0},Yt("finish_question",function(e){var t,o;for(t=e-Vt.begin_time,o=0;t>Vt.cumulative[o];)o++;return $(".bundle.active").data("finish_point",o-1),it()}),xt=function(e){return jt(e)/e.length},jt=function(e){var t,o,n,i;for(o=0,n=0,i=e.length;i>n;n++)t=e[n],o+=t;return o},It=function(e){var t,o;return o=xt(e),Math.sqrt(xt(function(){var n,i,a;for(a=[],n=0,i=e.length;i>n;n++)t=e[n],a.push((t-o)*(t-o));return a}()))},Dt=function(e){var t;return t=e.sort(function(e,t){return e-t}),t[Math.floor(t.length/2)]||0},At=function(e){var t;return t=e.sort(function(e,t){return e-t}),t[~~(.75*t.length)]-t[~~(.25*t.length)]||0},Tt=function(e){var t,o;return o=e.sort(function(e,t){return e-t}),Dt(function(){var e,n,i;for(i=[],e=0,n=o.length;n>e;e++)t=o[e],i.push(Math.abs(t-mu));return i}())},Nt=function(){var e,t,o,n;return oo=oo.slice(-20),n=xt(oo),e=function(){var e,o,i;for(i=[],e=0,o=oo.length;o>e;e++)t=oo[e],n>=t&&i.push(t);return i}(),o=xt(e),n=xt(e),e=function(){var e,o,i;for(i=[],e=0,o=oo.length;o>e;e++)t=oo[e],n>=t&&i.push(t);return i}(),Vt.sync_offset=xt(e),$("#sync_offset").text(Vt.sync_offset.toFixed(1)+"±"+It(e).toFixed(1)+" ("+oo.length+")")},$(window).unload(function(){var e;return e=Vt.serialize(),e.me_id=Wt.id,e.archive_time=Date.now(),localStorage["room-"+Vt.name]=JSON.stringify(e)}),Qt=Date.now(),ao=function(){var e,t;if(qt())return e=36e5,Vt.serverTime()-Wt.last_action>e&&Date.now()-Qt>e&&(eo.disconnect(),n.dialog("<h4>Disconnected for Inactivity</h4> <p>You have been disconnected from the server for an extended period of inactivity.</p> <p>Simply press <span class='label label-info'>Reconnect</span> if you wish to reestablish a connection to the server to resume from the previous state, or press <span class='label'>Cancel</span> if you would like to continue using protobowl offline.</p> ",[{label:"Cancel"},{label:"Reconnect","class":"btn-primary",callback:function(){return eo.socket.reconnect(),Qt=Date.now()}}])),t=+new Date,eo.emit("echo",{},function(e){var o,n;return n=+new Date,o=n-t,Bt.push(o),oo.push(n-e),eo.emit("echo",{avg:xt(Bt.slice(-10)),std:It(Bt.slice(-10)),n:Bt.length},function(t){var o,i,a;return a=+new Date,o=a-n,i=t-e,oo.push(a-t),Bt.push(i),Bt.push(o),Nt(),Bt.length>0?$("#latency").text(xt(Bt).toFixed(1)+"±"+It(Bt).toFixed(1)+(" ("+Bt.length+")")):void 0})})},setTimeout(function(){var e;return e=function(){var t;return ao(),t=3e4,Wt.muwave&&(t=18e4),setTimeout(e,t)},e()},8e3),Jt=[],Rt=function(e,t){return Jt.push([e,t]),"function"==typeof jo?jo():void 0},Zt=function(e,t){return console.log("setting book",e,t),Rt(e,function(o){return o?(o.bookmarked=t,o.modified=Date.now(),Eo.put(o,function(){return Ft(e),"function"==typeof ln?ln():void 0},Yo)):console.log("question not found (set bookmark)",e)})},Ft=function(e){return Rt(e,function(t){var o,n;return t?(o=t.bookmarked,n=$(".qid-"+e).toggleClass("bookmarked",!!o).toggleClass("bookmark-2",2===o).toggleClass("bookmark-3",3===o).toggleClass("bookmark-4",o>=4),n.find(".bookmark").toggleClass("icon-star-empty",!o).toggleClass("icon-star",!!o)):void 0})},Xt=function(e,t){var o;return null==t&&(t={}),o=document.getElementById("_"+e),o||(o=$("<div>").attr("id","_"+e)),$(o).empty().append(jade[e](t))},function(){var e,t;return null!=document.hidden?(t="hidden",e="visibilitychange"):null!=document.mozHidden?(t="mozHidden",e="mozvisibilitychange"):null!=document.msHidden?(t="msHidden",e="msvisibilitychange"):null!=document.webkitHidden&&(t="webkitHidden",e="webkitvisibilitychange"),t?document.addEventListener(e,function(){return Wt.muwave?void 0:Wt.set_idle(document[t])},!1):void 0}(),"onLine"in navigator&&navigator.onLine===!1||"undefined"==typeof io||null===io||("undefined"!=typeof protobowl_config&&null!==protobowl_config?protobowl_config.offline:void 0)?Gt():(Kt(),setTimeout(function(){return Ut?void 0:$("#slow").slideDown()},3e3),setTimeout(Lt,2e3)),$("#load_error").remove(),$("#disconnect").click(function(e){return eo.disconnect(),e.preventDefault()}),$("#reconnect").click(function(e){return eo.socket.reconnect(),e.preventDefault()});